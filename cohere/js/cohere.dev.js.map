{
"version":3,
"file":"cohere.dev.js",
"sourceRoot":"file:///",
"sources":["/haxe/cohere/utils/AssetsList.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/AudioManager.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/BaseSound.hx","/haxe/cohere/.haxelib/compiletime/2,5,1/src/CompileTimeClassList.hx","/usr/lib/haxe/std/js/_std/EReg.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/HTML5Sound.hx","/usr/lib/haxe/std/js/_std/HxOverrides.hx","/haxe/cohere/utils/JConsole.hx","/usr/lib/haxe/std/List.hx","/haxe/cohere/.haxelib/perf,js/1,1,1/src/Perf.hx","/usr/lib/haxe/std/js/_std/Reflect.hx","/usr/lib/haxe/std/js/_std/Std.hx","/usr/lib/haxe/std/js/_std/Type.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/Utils.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/Waud.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/WaudSound.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/WebAudioAPISound.hx","/haxe/cohere/.haxelib/pixijs/3,0,29/src/pixi/plugins/app/Application.hx","/haxe/cohere/src/arm/cohere/Main.hx","/haxe/cohere/src/arm/cohere/core/components/ComponentController.hx","/haxe/cohere/src/arm/cohere/components/bg/BgController.hx","/haxe/cohere/src/arm/cohere/core/components/ComponentView.hx","/haxe/cohere/src/arm/cohere/components/bg/BgView.hx","/haxe/cohere/src/arm/cohere/components/bitmapfont/BitmapfontController.hx","/haxe/cohere/.haxelib/bindx2/2,5,2/src/bindx/macro/BindSignalProvider.hx","/haxe/cohere/src/arm/cohere/components/bitmapfont/BitmapfontView.hx","/haxe/cohere/src/arm/cohere/components/bunnymark/Bunny.hx","/haxe/cohere/src/arm/cohere/components/bunnymark/BunnymarkController.hx","/haxe/cohere/src/arm/cohere/components/bunnymark/BunnymarkView.hx","/haxe/cohere/src/arm/cohere/components/graphics/GraphicsController.hx","/haxe/cohere/src/arm/cohere/components/graphics/GraphicsView.hx","/haxe/cohere/src/arm/cohere/components/menu/MenuController.hx","/haxe/cohere/src/arm/cohere/components/menu/MenuView.hx","/haxe/cohere/src/arm/cohere/components/preloader/PreloaderController.hx","/haxe/cohere/src/arm/cohere/components/preloader/PreloaderView.hx","/haxe/cohere/src/arm/cohere/components/retina/RetinaController.hx","/haxe/cohere/src/arm/cohere/components/retina/RetinaView.hx","/haxe/cohere/src/arm/cohere/components/rope/RopeController.hx","/haxe/cohere/src/arm/cohere/components/rope/RopeView.hx","/haxe/cohere/src/arm/cohere/components/spritesheet/SpritesheetController.hx","/haxe/cohere/src/arm/cohere/components/spritesheet/SpritesheetView.hx","/haxe/cohere/src/arm/cohere/components/tween/TweenController.hx","/haxe/cohere/src/arm/cohere/components/tween/TweenView.hx","/haxe/cohere/src/arm/cohere/controller/Controller.hx","/haxe/cohere/.haxelib/compiletime/2,5,1/src/CompileTime.hx","/haxe/cohere/src/arm/cohere/core/components/ComponentModel.hx","/haxe/cohere/src/arm/cohere/core/loader/AssetLoader.hx","/haxe/cohere/src/arm/cohere/core/loader/AudioAsset.hx","/haxe/cohere/src/arm/cohere/core/loader/MultipackParser.hx","/haxe/cohere/src/arm/cohere/core/utils/BrowserUtils.hx","/haxe/cohere/src/arm/cohere/core/utils/StageProperties.hx","/haxe/cohere/src/arm/cohere/model/Model.hx","/haxe/cohere/.haxelib/bindx2/2,5,2/src/bindx/macro/BindableMacros.hx","/haxe/cohere/src/arm/cohere/view/View.hx","/haxe/cohere/.haxelib/bindx2/2,5,2/src/bindx/BindSignal.hx","/usr/lib/haxe/std/haxe/Timer.hx","/usr/lib/haxe/std/js/_std/haxe/ds/ObjectMap.hx","/usr/lib/haxe/std/js/_std/haxe/ds/StringMap.hx","/usr/lib/haxe/std/haxe/rtti/Meta.hx","/usr/lib/haxe/std/js/Boot.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/ClassMap.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/InjectionConfig.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/Injector.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/point/MethodInjectionPoint.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/point/ConstructorInjectionPoint.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/point/NoParamsConstructorInjectionPoint.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/point/PostConstructInjectionPoint.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/point/PropertyInjectionPoint.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/result/InjectionResult.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/result/InjectValueResult.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/actuators/GenericActuator.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/actuators/SimpleActuator.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/easing/Expo.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/Actuate.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/actuators/MethodActuator.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/actuators/MotionPathActuator.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/actuators/PropertyDetails.hx","/haxe/cohere/.haxelib/msignal/1,2,2/msignal/Signal.hx","/haxe/cohere/.haxelib/msignal/1,2,2/msignal/Slot.hx","/haxe/cohere/.haxelib/msignal/1,2,2/msignal/SlotList.hx","/usr/lib/haxe/std/js/_std/Math.hx","/haxe/cohere/.haxelib/waud/0,2,2/src/IWaudSound.hx","/haxe/cohere/.haxelib/bindx2/2,5,2/src/bindx/IBindable.hx","/usr/lib/haxe/std/haxe/Constraints.hx","/haxe/cohere/.haxelib/minject/1,6,1/minject/point/InjectionPoint.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/actuators/IGenericActuator.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/easing/IEasing.hx","/haxe/cohere/.haxelib/actuate/1,8,6/motion/MotionPath.hx"],
"sourcesContent":["class AssetsList {\n\n\tstatic var LIST:Array<String> = [\"assets/@1x/.DS_Store\",\n\t\t\t\"assets/@2x/.DS_Store\",\n\t\t\t\"assets/sounds/bg.mp3\",\n\t\t\t\"assets/sounds/loop.mp3\",\n\t\t\t\"assets/sounds/sound1.wav\",\n\t\t\t\"assets/sounds/sound2.wav\",\n\t\t\t\"assets/sounds/sound3.wav\",\n\t\t\t\"assets/sounds/sound4.wav\",\n\t\t\t\"assets/@1x/alphamask/bkg.jpg\",\n\t\t\t\"assets/@1x/alphamask/cells.png\",\n\t\t\t\"assets/@1x/alphamask/flowerTop.png\",\n\t\t\t\"assets/@1x/bunnymark/.DS_Store\",\n\t\t\t\"assets/@1x/bunnymark/bunnys.png\",\n\t\t\t\"assets/@1x/common/button.png\",\n\t\t\t\"assets/@1x/filters/BGrotate.jpg\",\n\t\t\t\"assets/@1x/filters/depth_blur_BG.jpg\",\n\t\t\t\"assets/@1x/filters/depth_blur_dudes.jpg\",\n\t\t\t\"assets/@1x/filters/depth_blur_moby.jpg\",\n\t\t\t\"assets/@1x/filters/LightRotate1.png\",\n\t\t\t\"assets/@1x/filters/LightRotate2.png\",\n\t\t\t\"assets/@1x/filters/panda.png\",\n\t\t\t\"assets/@1x/filters/SceneRotate.jpg\",\n\t\t\t\"assets/@1x/fonts/desyrel.png\",\n\t\t\t\"assets/@1x/fonts/desyrel.ttf\",\n\t\t\t\"assets/@1x/fonts/desyrel.xml\",\n\t\t\t\"assets/@1x/graphics/spinObj_01.png\",\n\t\t\t\"assets/@1x/graphics/spinObj_02.png\",\n\t\t\t\"assets/@1x/graphics/spinObj_03.png\",\n\t\t\t\"assets/@1x/graphics/spinObj_04.png\",\n\t\t\t\"assets/@1x/graphics/spinObj_05.png\",\n\t\t\t\"assets/@1x/graphics/spinObj_06.png\",\n\t\t\t\"assets/@1x/graphics/spinObj_07.png\",\n\t\t\t\"assets/@1x/graphics/spinObj_08.png\",\n\t\t\t\"assets/@1x/movieclip/.DS_Store\",\n\t\t\t\"assets/@1x/movieclip/SpriteSheet.json\",\n\t\t\t\"assets/@1x/movieclip/SpriteSheet.png\",\n\t\t\t\"assets/@1x/nape/ball.png\",\n\t\t\t\"assets/@1x/preloader/logo.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_01.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_02.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_03.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_04.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_05.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_06.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_07.png\",\n\t\t\t\"assets/@1x/rendertexture/spinObj_08.png\",\n\t\t\t\"assets/@1x/retina/img.jpg\",\n\t\t\t\"assets/@1x/rope/snake.png\",\n\t\t\t\"assets/@1x/spine/.DS_Store\",\n\t\t\t\"assets/@1x/spine/dragon.atlas\",\n\t\t\t\"assets/@1x/spine/dragon.json\",\n\t\t\t\"assets/@1x/spine/dragon.png\",\n\t\t\t\"assets/@1x/spine/dragon2.png\",\n\t\t\t\"assets/@1x/spine/goblins.atlas\",\n\t\t\t\"assets/@1x/spine/goblins.json\",\n\t\t\t\"assets/@1x/spine/goblins.png\",\n\t\t\t\"assets/@1x/spine/iP4_BGtile.jpg\",\n\t\t\t\"assets/@1x/spine/iP4_ground.png\",\n\t\t\t\"assets/@1x/spine/Pixie.atlas\",\n\t\t\t\"assets/@1x/spine/Pixie.json\",\n\t\t\t\"assets/@1x/spine/Pixie.png\",\n\t\t\t\"assets/@1x/spine/spineboy.atlas\",\n\t\t\t\"assets/@1x/spine/spineboy.json\",\n\t\t\t\"assets/@1x/spine/spineboy.png\",\n\t\t\t\"assets/@1x/spritesheet/.DS_Store\",\n\t\t\t\"assets/@1x/spritesheet/fighter.json\",\n\t\t\t\"assets/@1x/spritesheet/fighter.png\",\n\t\t\t\"assets/@1x/spritesheet/SpriteSheet.json\",\n\t\t\t\"assets/@1x/spritesheet/SpriteSheet.png\",\n\t\t\t\"assets/@1x/tiling/p2.jpeg\",\n\t\t\t\"assets/@2x/preloader/logo.png\",\n\t\t\t\"assets/@2x/retina/img.jpg\",\n\t\t\t\"\"];\n\n\tpublic static inline var ALPHAMASK_BKG_JPG:String = \"alphamask/bkg.jpg\";\n\tpublic static inline var GRAPHICS_SPINOBJ_06_PNG:String = \"graphics/spinObj_06.png\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_08_PNG:String = \"rendertexture/spinObj_08.png\";\n\tpublic static inline var GRAPHICS_SPINOBJ_05_PNG:String = \"graphics/spinObj_05.png\";\n\tpublic static inline var SPINE_IP4_BGTILE_JPG:String = \"spine/iP4_BGtile.jpg\";\n\tpublic static inline var SPINE_DRAGON_JSON:String = \"spine/dragon.json\";\n\tpublic static inline var SPINE_GOBLINS_ATLAS:String = \"spine/goblins.atlas\";\n\tpublic static inline var FILTERS_DEPTH_BLUR_BG_JPG:String = \"filters/depth_blur_BG.jpg\";\n\tpublic static inline var FILTERS_DEPTH_BLUR_MOBY_JPG:String = \"filters/depth_blur_moby.jpg\";\n\tpublic static inline var FILTERS_LIGHTROTATE2_PNG:String = \"filters/LightRotate2.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_PNG:String = \"movieclip/SpriteSheet.png\";\n\tpublic static inline var SOUNDS_LOOP_MP3:String = \"sounds/loop.mp3\";\n\tpublic static inline var COMMON_BUTTON_PNG:String = \"common/button.png\";\n\tpublic static inline var GRAPHICS_SPINOBJ_08_PNG:String = \"graphics/spinObj_08.png\";\n\tpublic static inline var ALPHAMASK_FLOWERTOP_PNG:String = \"alphamask/flowerTop.png\";\n\tpublic static inline var GRAPHICS_SPINOBJ_07_PNG:String = \"graphics/spinObj_07.png\";\n\tpublic static inline var SPINE_PIXIE_ATLAS:String = \"spine/Pixie.atlas\";\n\tpublic static inline var FILTERS_LIGHTROTATE1_PNG:String = \"filters/LightRotate1.png\";\n\tpublic static inline var SPINE_SPINEBOY_JSON:String = \"spine/spineboy.json\";\n\tpublic static inline var SOUNDS_SOUND4_WAV:String = \"sounds/sound4.wav\";\n\tpublic static inline var FONTS_DESYREL_XML:String = \"fonts/desyrel.xml\";\n\tpublic static inline var BUNNYMARK_BUNNYS_PNG:String = \"bunnymark/bunnys.png\";\n\tpublic static inline var FILTERS_SCENEROTATE_JPG:String = \"filters/SceneRotate.jpg\";\n\tpublic static inline var SOUNDS_SOUND3_WAV:String = \"sounds/sound3.wav\";\n\tpublic static inline var SPINE_PIXIE_JSON:String = \"spine/Pixie.json\";\n\tpublic static inline var SPINE_DRAGON_PNG:String = \"spine/dragon.png\";\n\tpublic static inline var PRELOADER_LOGO_PNG:String = \"preloader/logo.png\";\n\tpublic static inline var SPINE_IP4_GROUND_PNG:String = \"spine/iP4_ground.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_JSON:String = \"spritesheet/fighter.json\";\n\tpublic static inline var FILTERS_PANDA_PNG:String = \"filters/panda.png\";\n\tpublic static inline var RETINA_IMG_JPG:String = \"retina/img.jpg\";\n\tpublic static inline var SPRITESHEET_SPRITESHEET_PNG:String = \"spritesheet/SpriteSheet.png\";\n\tpublic static inline var SPINE_SPINEBOY_PNG:String = \"spine/spineboy.png\";\n\tpublic static inline var SOUNDS_SOUND2_WAV:String = \"sounds/sound2.wav\";\n\tpublic static inline var SPRITESHEET_SPRITESHEET_JSON:String = \"spritesheet/SpriteSheet.json\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_01_PNG:String = \"rendertexture/spinObj_01.png\";\n\tpublic static inline var SPINE_GOBLINS_JSON:String = \"spine/goblins.json\";\n\tpublic static inline var SPINE_SPINEBOY_ATLAS:String = \"spine/spineboy.atlas\";\n\tpublic static inline var SPINE_GOBLINS_PNG:String = \"spine/goblins.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_PNG:String = \"spritesheet/fighter.png\";\n\tpublic static inline var SOUNDS_BG_MP3:String = \"sounds/bg.mp3\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_JSON:String = \"movieclip/SpriteSheet.json\";\n\tpublic static inline var NAPE_BALL_PNG:String = \"nape/ball.png\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_02_PNG:String = \"rendertexture/spinObj_02.png\";\n\tpublic static inline var TILING_P2_JPEG:String = \"tiling/p2.jpeg\";\n\tpublic static inline var SOUNDS_SOUND1_WAV:String = \"sounds/sound1.wav\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_03_PNG:String = \"rendertexture/spinObj_03.png\";\n\tpublic static inline var FILTERS_BGROTATE_JPG:String = \"filters/BGrotate.jpg\";\n\tpublic static inline var FONTS_DESYREL_TTF:String = \"fonts/desyrel.ttf\";\n\tpublic static inline var FILTERS_DEPTH_BLUR_DUDES_JPG:String = \"filters/depth_blur_dudes.jpg\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_05_PNG:String = \"rendertexture/spinObj_05.png\";\n\tpublic static inline var GRAPHICS_SPINOBJ_02_PNG:String = \"graphics/spinObj_02.png\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_04_PNG:String = \"rendertexture/spinObj_04.png\";\n\tpublic static inline var GRAPHICS_SPINOBJ_01_PNG:String = \"graphics/spinObj_01.png\";\n\tpublic static inline var SPINE_DRAGON2_PNG:String = \"spine/dragon2.png\";\n\tpublic static inline var SPINE_PIXIE_PNG:String = \"spine/Pixie.png\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_06_PNG:String = \"rendertexture/spinObj_06.png\";\n\tpublic static inline var SPINE_DRAGON_ATLAS:String = \"spine/dragon.atlas\";\n\tpublic static inline var GRAPHICS_SPINOBJ_04_PNG:String = \"graphics/spinObj_04.png\";\n\tpublic static inline var GRAPHICS_SPINOBJ_03_PNG:String = \"graphics/spinObj_03.png\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_07_PNG:String = \"rendertexture/spinObj_07.png\";\n\tpublic static inline var ROPE_SNAKE_PNG:String = \"rope/snake.png\";\n\tpublic static inline var ALPHAMASK_CELLS_PNG:String = \"alphamask/cells.png\";\n\tpublic static inline var FONTS_DESYREL_PNG:String = \"fonts/desyrel.png\";\n\tpublic static inline var GRAPHICS_SPINOBJ_05:String = \"graphics_spinObj_05\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET:String = \"movieclip_SpriteSheet\";\n\tpublic static inline var SPINE_IP4_GROUND:String = \"spine_iP4_ground\";\n\tpublic static inline var SPINE_PIXIE:String = \"spine_Pixie\";\n\tpublic static inline var SPINE_SPINEBOY:String = \"spine_spineboy\";\n\tpublic static inline var COMMON_BUTTON:String = \"common_button\";\n\tpublic static inline var GRAPHICS_SPINOBJ_04:String = \"graphics_spinObj_04\";\n\tpublic static inline var NAPE_BALL:String = \"nape_ball\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_02:String = \"rendertexture_spinObj_02\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_04:String = \"rendertexture_spinObj_04\";\n\tpublic static inline var SPRITESHEET_FIGHTER:String = \"spritesheet_fighter\";\n\tpublic static inline var BUNNYMARK_BUNNYS:String = \"bunnymark_bunnys\";\n\tpublic static inline var TILING_P2:String = \"tiling_p2\";\n\tpublic static inline var GRAPHICS_SPINOBJ_07:String = \"graphics_spinObj_07\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_03:String = \"rendertexture_spinObj_03\";\n\tpublic static inline var SPINE_DRAGON:String = \"spine_dragon\";\n\tpublic static inline var SOUNDS_SOUND4:String = \"sounds_sound4\";\n\tpublic static inline var FILTERS_BGROTATE:String = \"filters_BGrotate\";\n\tpublic static inline var GRAPHICS_SPINOBJ_06:String = \"graphics_spinObj_06\";\n\tpublic static inline var SOUNDS_SOUND3:String = \"sounds_sound3\";\n\tpublic static inline var FILTERS_DEPTH_BLUR_DUDES:String = \"filters_depth_blur_dudes\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_05:String = \"rendertexture_spinObj_05\";\n\tpublic static inline var FILTERS_LIGHTROTATE1:String = \"filters_LightRotate1\";\n\tpublic static inline var SPINE_DRAGON2:String = \"spine_dragon2\";\n\tpublic static inline var GRAPHICS_SPINOBJ_08:String = \"graphics_spinObj_08\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_06:String = \"rendertexture_spinObj_06\";\n\tpublic static inline var ALPHAMASK_BKG:String = \"alphamask_bkg\";\n\tpublic static inline var ALPHAMASK_FLOWERTOP:String = \"alphamask_flowerTop\";\n\tpublic static inline var FILTERS_DEPTH_BLUR_BG:String = \"filters_depth_blur_BG\";\n\tpublic static inline var FILTERS_DEPTH_BLUR_MOBY:String = \"filters_depth_blur_moby\";\n\tpublic static inline var RETINA_IMG:String = \"retina_img\";\n\tpublic static inline var FILTERS_LIGHTROTATE2:String = \"filters_LightRotate2\";\n\tpublic static inline var GRAPHICS_SPINOBJ_01:String = \"graphics_spinObj_01\";\n\tpublic static inline var SOUNDS_SOUND2:String = \"sounds_sound2\";\n\tpublic static inline var FILTERS_PANDA:String = \"filters_panda\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_07:String = \"rendertexture_spinObj_07\";\n\tpublic static inline var ROPE_SNAKE:String = \"rope_snake\";\n\tpublic static inline var SPRITESHEET_SPRITESHEET:String = \"spritesheet_SpriteSheet\";\n\tpublic static inline var SOUNDS_BG:String = \"sounds_bg\";\n\tpublic static inline var ALPHAMASK_CELLS:String = \"alphamask_cells\";\n\tpublic static inline var FILTERS_SCENEROTATE:String = \"filters_SceneRotate\";\n\tpublic static inline var FONTS_DESYREL:String = \"fonts_desyrel\";\n\tpublic static inline var GRAPHICS_SPINOBJ_03:String = \"graphics_spinObj_03\";\n\tpublic static inline var GRAPHICS_SPINOBJ_02:String = \"graphics_spinObj_02\";\n\tpublic static inline var PRELOADER_LOGO:String = \"preloader_logo\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_08:String = \"rendertexture_spinObj_08\";\n\tpublic static inline var SOUNDS_LOOP:String = \"sounds_loop\";\n\tpublic static inline var RENDERTEXTURE_SPINOBJ_01:String = \"rendertexture_spinObj_01\";\n\tpublic static inline var SPINE_IP4_BGTILE:String = \"spine_iP4_BGtile\";\n\tpublic static inline var SOUNDS_SOUND1:String = \"sounds_sound1\";\n\tpublic static inline var SPINE_GOBLINS:String = \"spine_goblins\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_14:String = \"Explosion_Sequence_A 14.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_13:String = \"Explosion_Sequence_A 13.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0026:String = \"rollSequence0026.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0016:String = \"rollSequence0016.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0006:String = \"rollSequence0006.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_24:String = \"Explosion_Sequence_A 24.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0025:String = \"rollSequence0025.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_23:String = \"Explosion_Sequence_A 23.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0015:String = \"rollSequence0015.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0005:String = \"rollSequence0005.png\";\n\tpublic static inline var SPRITESHEET_SPRITESHEET_HELMLOK:String = \"helmlok.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_12:String = \"Explosion_Sequence_A 12.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_11:String = \"Explosion_Sequence_A 11.png\";\n\tpublic static inline var SPRITESHEET_SPRITESHEET_FLOWERTOP:String = \"flowerTop.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_22:String = \"Explosion_Sequence_A 22.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_21:String = \"Explosion_Sequence_A 21.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0024:String = \"rollSequence0024.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_20:String = \"Explosion_Sequence_A 20.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0014:String = \"rollSequence0014.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0004:String = \"rollSequence0004.png\";\n\tpublic static inline var SPRITESHEET_SPRITESHEET_EGGHEAD:String = \"eggHead.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_1:String = \"Explosion_Sequence_A 1.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_10:String = \"Explosion_Sequence_A 10.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0003:String = \"rollSequence0003.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_2:String = \"Explosion_Sequence_A 2.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_4:String = \"Explosion_Sequence_A 4.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0023:String = \"rollSequence0023.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0013:String = \"rollSequence0013.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_3:String = \"Explosion_Sequence_A 3.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0022:String = \"rollSequence0022.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0012:String = \"rollSequence0012.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_5:String = \"Explosion_Sequence_A 5.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0002:String = \"rollSequence0002.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0029:String = \"rollSequence0029.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0019:String = \"rollSequence0019.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_19:String = \"Explosion_Sequence_A 19.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0009:String = \"rollSequence0009.png\";\n\tpublic static inline var SPRITESHEET_SPRITESHEET_SKULLY:String = \"skully.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_18:String = \"Explosion_Sequence_A 18.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0028:String = \"rollSequence0028.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_17:String = \"Explosion_Sequence_A 17.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_6:String = \"Explosion_Sequence_A 6.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0018:String = \"rollSequence0018.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0008:String = \"rollSequence0008.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_8:String = \"Explosion_Sequence_A 8.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0021:String = \"rollSequence0021.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_27:String = \"Explosion_Sequence_A 27.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_7:String = \"Explosion_Sequence_A 7.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0011:String = \"rollSequence0011.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0001:String = \"rollSequence0001.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_9:String = \"Explosion_Sequence_A 9.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0010:String = \"rollSequence0010.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_16:String = \"Explosion_Sequence_A 16.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0000:String = \"rollSequence0000.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_15:String = \"Explosion_Sequence_A 15.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0027:String = \"rollSequence0027.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0017:String = \"rollSequence0017.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0007:String = \"rollSequence0007.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_26:String = \"Explosion_Sequence_A 26.png\";\n\tpublic static inline var MOVIECLIP_SPRITESHEET_EXPLOSION_SEQUENCE_A_25:String = \"Explosion_Sequence_A 25.png\";\n\tpublic static inline var SPRITESHEET_FIGHTER_ROLLSEQUENCE0020:String = \"rollSequence0020.png\";\n\n\tpublic static function exists(val:String):Bool {\n\t\treturn (AssetsList.LIST.indexOf(val) > -1);\n\t}\n}","import js.html.audio.AudioBufferSourceNode;\nimport js.html.audio.AudioContext;\nimport js.Browser;\n\nclass AudioManager {\n\n\tpublic var audioContext:AudioContext;\n\tpublic var bufferList:Map<String, Dynamic>;\n\tpublic var playingSounds:Map<String, Dynamic>;\n\n\tstatic var AudioContextClass:Dynamic;\n\n\tpublic function new() {\n\t\tbufferList = new Map();\n\t\tplayingSounds = new Map();\n\t}\n\n\tpublic function checkWebAudioAPISupport():Bool {\n\t\tif (Reflect.field(Browser.window, \"AudioContext\") != null) {\n\t\t\tAudioContextClass = Reflect.field(Browser.window, \"AudioContext\");\n\t\t\treturn true;\n\t\t}\n\t\telse if (Reflect.field(Browser.window, \"webkitAudioContext\") != null) {\n\t\t\tAudioContextClass = Reflect.field(Browser.window, \"webkitAudioContext\");\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic function unlockAudio() {\n\t\tif (audioContext == null) return;\n\t\tvar bfr = audioContext.createBuffer(1, 1, Waud.preferredSampleRate);\n\t\tvar src:AudioBufferSourceNode = audioContext.createBufferSource();\n\t\tsrc.buffer = bfr;\n\t\tsrc.connect(audioContext.destination);\n\t\tsrc.start(0);\n\t\tif (src.onended != null) src.onended = _unlockCallback;\n\t\telse haxe.Timer.delay(_unlockCallback, 1);\n\t}\n\n\tinline function _unlockCallback() {\n\t\tif (Waud.__touchUnlockCallback != null) Waud.__touchUnlockCallback();\n\t\tWaud.dom.ontouchend = null;\n\t}\n\n\tpublic function createAudioContext() {\n\t\tif (audioContext == null) {\n\t\t\ttry {\n\t\t\t\tif (AudioContextClass != null) audioContext = cast Type.createInstance(AudioContextClass, []);\n\t\t\t}\n\t\t\tcatch(e:Dynamic) {\n\t\t\t\taudioContext = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic function destroyContext() {\n\t\tif (audioContext != null && untyped __js__(\"this.audioContext\").close != null && untyped __js__(\"this.audioContext\").close != \"\") {\n\t\t\tuntyped __js__(\"this.audioContext\").close();\n\t\t}\n\t\taudioContext = null;\n\t}\n\n\tpublic function suspendContext() {\n\t\tif (audioContext != null) {\n\t\t\tif (untyped __js__(\"this.audioContext\").suspend != null) untyped __js__(\"this.audioContext\").suspend();\n\t\t}\n\t}\n\n\tpublic function resumeContext() {\n\t\tif (audioContext != null) {\n\t\t\tif (untyped __js__(\"this.audioContext\").resume != null) untyped __js__(\"this.audioContext\").resume();\n\t\t}\n\t}\n}","@:keep class BaseSound {\n\n\tpublic var isSpriteSound:Bool;\n\n\tvar _options:WaudSoundOptions;\n\tvar _isPlaying:Bool;\n\tvar _muted:Bool;\n\n\tpublic function new(url:String, ?options:WaudSoundOptions = null) {\n\t\tif (url == null || url == \"\") {\n\t\t\ttrace(\"invalid sound url\");\n\t\t\treturn;\n\t\t}\n\t\tif (Waud.audioManager == null) {\n\t\t\ttrace(\"initialise Waud using Waud.init() before loading sounds\");\n\t\t\treturn;\n\t\t}\n\t\tisSpriteSound = false;\n\t\t_isPlaying = false;\n\t\t_muted = false;\n\t\tif (options == null) options = {};\n\n\t\toptions.autoplay = (options.autoplay != null) ? options.autoplay : Waud.defaults.autoplay;\n\t\toptions.preload = (options.preload != null) ? options.preload : Waud.defaults.preload;\n\t\toptions.loop = (options.loop != null) ? options.loop : Waud.defaults.loop;\n\t\toptions.volume = (options.volume != null && options.volume >= 0 && options.volume <= 1) ? options.volume : Waud.defaults.volume;\n\n\t\t_options = options;\n\t}\n}","/****\n* Copyright (c) 2013 Jason O'Neil\n* \n* Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n* \n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n* \n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n* \n****/\n\nclass CompileTimeClassList \n{\n\tstatic var lists:Map<String, List<Class<Dynamic>>> = null;\n\t\n\tpublic static function get(id:String):List<Class<Dynamic>>\n\t{\n\t\tif (lists == null) initialise();\n\t\treturn lists.get(id);\n\t}\n\n\tpublic static inline function getTyped<T>(id:String, type:Class<T>):List<Class<T>>\n\t{\n\t\treturn cast get(id);\n\t}\n\n\tstatic function initialise()\n\t{\n\t\tlists = new Map();\n\t\tvar m = haxe.rtti.Meta.getType(CompileTimeClassList);\n\t\tif (m.classLists != null)\n\t\t{\n\t\t\tfor (item in m.classLists)\n\t\t\t{\n\t\t\t\tvar array:Array<String> = cast item;\n\t\t\t\tvar listID = array[0];\n\t\t\t\tvar list = new List();\n\t\t\t\tfor ( typeName in array[1].split(',') ) {\n\t\t\t\t\tvar type = Type.resolveClass(typeName);\n\t\t\t\t\tif ( type!=null ) list.push( type );\n\t\t\t\t}\n\t\t\t\tlists.set(listID, list);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:coreApi class EReg {\n\n\tvar r : HaxeRegExp;\n\n\tpublic function new( r : String, opt : String ) : Void {\n\t\topt = opt.split(\"u\").join(\"\"); // 'u' (utf8) depends on page encoding\n\t\tthis.r = new HaxeRegExp(r, opt);\n\t}\n\n\tpublic function match( s : String ) : Bool {\n\t\tif( r.global ) r.lastIndex = 0;\n\t\tr.m = r.exec(s);\n\t\tr.s = s;\n\t\treturn (r.m != null);\n\t}\n\n\tpublic function matched( n : Int ) : String {\n\t\treturn if( r.m != null && n >= 0 && n < r.m.length ) r.m[n] else throw \"EReg::matched\";\n\t}\n\n\tpublic function matchedLeft() : String {\n\t\tif( r.m == null ) throw \"No string matched\";\n\t\treturn r.s.substr(0,r.m.index);\n\t}\n\n\tpublic function matchedRight() : String {\n\t\tif( r.m == null ) throw \"No string matched\";\n\t\tvar sz = r.m.index+r.m[0].length;\n\t\treturn r.s.substr(sz,r.s.length-sz);\n\t}\n\n\tpublic function matchedPos() : { pos : Int, len : Int } {\n\t\tif( r.m == null ) throw \"No string matched\";\n\t\treturn { pos : r.m.index, len : r.m[0].length };\n\t}\n\n\tpublic function matchSub( s : String, pos : Int, len : Int = -1):Bool {\n\t\treturn if (r.global) {\n\t\t\tr.lastIndex = pos;\n\t\t\tr.m = r.exec(len < 0 ? s : s.substr(0, pos + len));\n\t\t\tvar b = r.m != null;\n\t\t\tif (b) {\n\t\t\t\tr.s = s;\n\t\t\t}\n\t\t\tb;\n\t\t} else {\n\t\t\t// TODO: check some ^/$ related corner cases\n\t\t\tvar b = match( len < 0 ? s.substr(pos) : s.substr(pos,len) );\n\t\t\tif (b) {\n\t\t\t\tr.s = s;\n\t\t\t\tr.m.index += pos;\n\t\t\t}\n\t\t\tb;\n\t\t}\n\t}\n\n\tpublic function split( s : String ) : Array<String> {\n\t\t// we can't use directly s.split because it's ignoring the 'g' flag\n\t\tvar d = \"#__delim__#\";\n\t\treturn untyped s.replace(r,d).split(d);\n\t}\n\n\tpublic function replace( s : String, by : String ) : String {\n\t\treturn untyped s.replace(r,by);\n\t}\n\n\tpublic function map( s : String, f : EReg -> String ) : String {\n\t\tvar offset = 0;\n\t\tvar buf = new StringBuf();\n\t\tdo {\n\t\t\tif (offset >= s.length)\n\t\t\t\tbreak;\n\t\t\telse if (!matchSub(s, offset)) {\n\t\t\t\tbuf.add(s.substr(offset));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar p = matchedPos();\n\t\t\tbuf.add(s.substr(offset, p.pos - offset));\n\t\t\tbuf.add(f(this));\n\t\t\tif (p.len == 0) {\n\t\t\t\tbuf.add(s.substr(p.pos, 1));\n\t\t\t\toffset = p.pos + 1;\n\t\t\t}\n\t\t\telse\n\t\t\t\toffset = p.pos + p.len;\n\t\t} while (r.global);\n\t\tif (!r.global && offset > 0 && offset < s.length)\n\t\t\tbuf.add(s.substr(offset));\n\t\treturn buf.toString();\n\t}\n}\n\n@:native(\"RegExp\")\nprivate extern class HaxeRegExp extends js.RegExp {\n\tvar m:js.RegExp.RegExpMatch;\n\tvar s:String;\n}\n","import haxe.Timer;\nimport js.html.SourceElement;\nimport js.html.AudioElement;\n\n@:expose @:keep class HTML5Sound extends BaseSound implements IWaudSound {\n\n\tvar _snd:AudioElement;\n\tvar _src:SourceElement;\n\tvar _tmr:Timer;\n\n\tpublic function new(url:String, ?options:WaudSoundOptions = null) {\n\t\tsuper(url, options);\n\t\t_snd = Waud.dom.createAudioElement();\n\t\t_addSource(url);\n\n\t\t_snd.autoplay = _options.autoplay;\n\t\t_snd.loop = _options.loop;\n\t\t_snd.volume = _options.volume;\n\n\t\tif (Std.string(_options.preload) == \"true\") _snd.preload = \"auto\";\n\t\telse if (Std.string(_options.preload) == \"false\") _snd.preload = \"none\";\n\t\telse _snd.preload = \"metadata\";\n\n\t\tif (_options.onload != null) {\n\t\t\t_snd.onloadeddata = function() {\n\t\t\t\t_options.onload(this);\n\t\t\t}\n\t\t}\n\n\t\t_snd.onplaying = function() {\n\t\t\t_isPlaying = true;\n\t\t}\n\n\t\t_snd.onended = function() {\n\t\t\t_isPlaying = false;\n\t\t\tif (_options.onend != null) _options.onend(this);\n\t\t}\n\n\t\tif (_options.onerror != null) {\n\t\t\t_snd.onerror = function() {\n\t\t\t\t_options.onerror(this);\n\t\t\t}\n\t\t}\n\n\t\tWaud.sounds.set(url, this);\n\n\t\t_snd.load();\n\t}\n\n\tfunction _addSource(src:String):SourceElement {\n\t\t_src = Waud.dom.createSourceElement();\n\t\t_src.src = src;\n\n\t\tif (Waud.types.get(_getExt(src)) != null) _src.type = Waud.types.get(_getExt(src));\n\t\t_snd.appendChild(_src);\n\n\t\treturn _src;\n\t}\n\n\tfunction _getExt(filename:String):String {\n\t\treturn filename.split(\".\").pop();\n\t}\n\n\tpublic function setVolume(val:Float) {\n\t\tif (val >= 0 && val <= 1) {\n\t\t\t_snd.volume = val;\n\t\t\t_options.volume = val;\n\t\t}\n\t}\n\n\tpublic function getVolume():Float {\n\t\treturn _options.volume;\n\t}\n\n\tpublic function mute(val:Bool) {\n\t\t_snd.muted = val;\n\t\tif (Utils.isiOS()) {\n\t\t\tif (val && isPlaying()) {\n\t\t\t\t_muted = true;\n\t\t\t\t_snd.pause();\n\t\t\t}\n\t\t\telse if (_muted) {\n\t\t\t\t_muted = false;\n\t\t\t\t_snd.play();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic function play(?spriteName:String, ?soundProps:AudioSpriteSoundProperties):IWaudSound {\n\t\tif (_muted) return this;\n\t\tstop();\n\t\tif (isSpriteSound && soundProps != null) {\n\t\t\t_snd.currentTime = soundProps.start;\n\t\t\tif (_tmr != null) _tmr.stop();\n\t\t\t_tmr = Timer.delay(function() {\n\t\t\t\tif (soundProps.loop != null && soundProps.loop) {\n\t\t\t\t\tplay(spriteName, soundProps);\n\t\t\t\t}\n\t\t\t\telse stop();\n\t\t\t}, Math.ceil(soundProps.duration * 1000));\n\t\t}\n\t\t_snd.play();\n\t\treturn this;\n\t}\n\n\tpublic function isPlaying():Bool {\n\t\treturn _isPlaying;\n\t}\n\n\tpublic function loop(val:Bool) {\n\t\t_snd.loop = val;\n\t}\n\n\tpublic function stop() {\n\t\t_snd.pause();\n\t\t_snd.currentTime = 0;\n\t}\n\n\tpublic function onEnd(callback:IWaudSound -> Void):IWaudSound {\n\t\t_options.onend = callback;\n\t\treturn this;\n\t}\n\n\tpublic function destroy() {\n\t\tif (_snd != null) {\n\t\t\t_snd.pause();\n\t\t\t_snd.removeChild(_src);\n\t\t\t_src = null;\n\t\t\t_snd = null;\n\t\t}\n\t}\n}","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:noDoc\nclass HxOverrides {\n\n\tstatic function dateStr( date :Date ) : String {\n\t\tvar m = date.getMonth() + 1;\n\t\tvar d = date.getDate();\n\t\tvar h = date.getHours();\n\t\tvar mi = date.getMinutes();\n\t\tvar s = date.getSeconds();\n\t\treturn date.getFullYear()\n\t\t\t+\"-\"+(if( m < 10 ) \"0\"+m else \"\"+m)\n\t\t\t+\"-\"+(if( d < 10 ) \"0\"+d else \"\"+d)\n\t\t\t+\" \"+(if( h < 10 ) \"0\"+h else \"\"+h)\n\t\t\t+\":\"+(if( mi < 10 ) \"0\"+mi else \"\"+mi)\n\t\t\t+\":\"+(if( s < 10 ) \"0\"+s else \"\"+s);\n\t}\n\n\tstatic function strDate( s : String ) : Date {\n\t\tswitch( s.length ) {\n\t\tcase 8: // hh:mm:ss\n\t\t\tvar k = s.split(\":\");\n\t\t\tvar d : Date = untyped __new__(Date);\n\t\t\tuntyped d[\"setTime\"](0);\n\t\t\tuntyped d[\"setUTCHours\"](k[0]);\n\t\t\tuntyped d[\"setUTCMinutes\"](k[1]);\n\t\t\tuntyped d[\"setUTCSeconds\"](k[2]);\n\t\t\treturn d;\n\t\tcase 10: // YYYY-MM-DD\n\t\t\tvar k = s.split(\"-\");\n\t\t\treturn new Date(cast k[0],cast untyped k[1] - 1,cast k[2],0,0,0);\n\t\tcase 19: // YYYY-MM-DD hh:mm:ss\n\t\t\tvar k = s.split(\" \");\n\t\t\tvar y = k[0].split(\"-\");\n\t\t\tvar t = k[1].split(\":\");\n\t\t\treturn new Date(cast y[0],cast untyped y[1] - 1,cast y[2],cast t[0],cast t[1],cast t[2]);\n\t\tdefault:\n\t\t\tthrow \"Invalid date format : \" + s;\n\t\t}\n\t}\n\n\tstatic function cca( s : String, index : Int ) : Null<Int> {\n\t\tvar x = (cast s).charCodeAt(index);\n\t\tif( x != x ) // fast isNaN\n\t\t\treturn untyped undefined; // isNaN will still return true\n\t\treturn x;\n\t}\n\n\tstatic function substr( s : String, pos : Int, ?len : Int ) : String {\n\t\tif( pos != null && pos != 0 && len != null && len < 0 ) return \"\";\n\t\tif( len == null ) len = s.length;\n\t\tif( pos < 0 ){\n\t\t\tpos = s.length + pos;\n\t\t\tif( pos < 0 ) pos = 0;\n\t\t}else if( len < 0 ){\n\t\t\tlen = s.length + len - pos;\n\t\t}\n\n\t\treturn (untyped s).substr(pos, len);\n\t}\n\n\tstatic function indexOf<T>( a : Array<T>, obj : T, i : Int) {\n\t\tvar len = a.length;\n\t\tif (i < 0) {\n\t\t\ti += len;\n\t\t\tif (i < 0) i = 0;\n\t\t}\n\t\twhile (i < len)\n\t\t{\n\t\t\tif (untyped __js__(\"a[i] === obj\"))\n\t\t\t\treturn i;\n\t\t\ti++;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic function lastIndexOf<T>( a : Array<T>, obj : T, i : Int) {\n\t\tvar len = a.length;\n\t\tif (i >= len)\n\t\t\ti = len - 1;\n\t\telse if (i < 0)\n\t\t\ti += len;\n\t\twhile (i >= 0)\n\t\t{\n\t\t\tif (untyped __js__(\"a[i] === obj\"))\n\t\t\t\treturn i;\n\t\t\ti--;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic function remove<T>( a : Array<T>, obj : T ) {\n\t\tvar i = a.indexOf(obj);\n\t\tif( i == -1 ) return false;\n\t\ta.splice(i,1);\n\t\treturn true;\n\t}\n\n\tstatic function iter<T>( a : Array<T> ) : Iterator<T> untyped {\n\t\treturn {\n\t\t\tcur : 0,\n\t\t\tarr : a,\n\t\t\thasNext : function() {\n\t\t\t\treturn __this__.cur < __this__.arr.length;\n\t\t\t},\n\t\t\tnext : function() {\n\t\t\t\treturn __this__.arr[__this__.cur++];\n\t\t\t}\n\t\t};\n\t}\n\n\tstatic function __init__() untyped {\n#if !js_es5\n\t\t__feature__('HxOverrides.indexOf', if( Array.prototype.indexOf ) __js__(\"HxOverrides\").indexOf = function(a,o,i) return Array.prototype.indexOf.call(a, o, i));\n\t\t__feature__('HxOverrides.lastIndexOf', if( Array.prototype.lastIndexOf ) __js__(\"HxOverrides\").lastIndexOf = function(a,o,i) return Array.prototype.lastIndexOf.call(a, o, i));\n#end\n\t}\n\n}\n","class JConsole {\n\n\t#if debug\n\tstatic var lastFileName:String;\n\tstatic var clrs:Array<String> = [\"green\", \"blue\", \"hotpink\", \"darkorange\", \"indigo\", \"brown\", \"olive\", \"blueviolet\", \"teal\", \"darkmagenta\", \"darkcyan\"];\n\tstatic var index:Int = 0;\n\t#end\n\n\tpublic static function log(msg:Dynamic) {\n\t\t#if debug untyped __js__(\"console\").log(msg); #end\n\t}\n\n\tpublic static function info(msg:Dynamic) {\n\t\t#if debug untyped __js__(\"console\").info(msg); #end\n\t}\n\n\tpublic static function warn(msg:Dynamic) {\n\t\t#if debug untyped __js__(\"console\").warn(msg); #end\n\t}\n\n\tpublic static function error(msg:Dynamic) {\n\t\t#if debug untyped __js__(\"console\").error(msg); #end\n\t}\n\n\tpublic static function trace(msg:Dynamic, ?inf:haxe.PosInfos) {\n\t\t#if debug\n\t\tif (lastFileName != inf.fileName) index++;\n\t\tif (index == clrs.length) index = 0;\n\t\tlastFileName = inf.fileName;\n\t\tif (inf != null && inf.customParams != null) for(v in inf.customParams ) msg += \" \" + v;\n\t\tuntyped __js__(\"console\").log(\"%c\" + inf.fileName + \"(\" + inf.methodName + \":\" + inf.lineNumber + \") \" + msg, \"color: \" + clrs[index]+ \";font-weight:bold;\");\n\t\t#end\n\t}\n}","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n\tA linked-list of elements. The list is composed of two-elements arrays\n\tthat are chained together. It is optimized so that adding or removing an\n\telement does not imply copying the whole array content every time.\n**/\nclass List<T> {\n\n\tprivate var h : Array<Dynamic>;\n\tprivate var q : Array<Dynamic>;\n\n\t/**\n\t\tThe length of `this` List.\n\t**/\n\tpublic var length(default,null) : Int;\n\n\t/**\n\t\tCreates a new empty list.\n\t**/\n\tpublic function new() {\n\t\tlength = 0;\n\t}\n\n\t/**\n\t\tAdds element `item` at the end of `this` List.\n\n\t\t`this.length` increases by 1.\n\t**/\n\tpublic function add( item : T ) {\n\t\tvar x:Array<Dynamic> = #if neko untyped __dollar__array(item,null) #else [item] #end;\n\t\tif( h == null )\n\t\t\th = x;\n\t\telse\n\t\t\tq[1] = x;\n\t\tq = x;\n\t\tlength++;\n\t}\n\n\t/**\n\t\tAdds element `item` at the beginning of `this` List.\n\n\t\t`this.length` increases by 1.\n\t**/\n\tpublic function push( item : T ) {\n\t\tvar x : Array<Dynamic> = #if neko\n\t\t\tuntyped __dollar__array(item,h)\n\t\t#else\n\t\t\t[item,h]\n\t\t#end;\n\t\th = x;\n\t\tif( q == null )\n\t\t\tq = x;\n\t\tlength++;\n\t}\n\n\t/**\n\t\tReturns the first element of `this` List, or null if no elements exist.\n\n\t\tThis function does not modify `this` List.\n\t**/\n\tpublic function first() : Null<T> {\n\t\treturn if( h == null ) null else h[0];\n\t}\n\n\t/**\n\t\tReturns the last element of `this` List, or null if no elements exist.\n\n\t\tThis function does not modify `this` List.\n\t**/\n\tpublic function last() : Null<T> {\n\t\treturn if( q == null ) null else q[0];\n\t}\n\n\n\t/**\n\t\tReturns the first element of `this` List, or null if no elements exist.\n\n\t\tThe element is removed from `this` List.\n\t**/\n\tpublic function pop() : Null<T> {\n\t\tif( h == null )\n\t\t\treturn null;\n\t\tvar x = h[0];\n\t\th = h[1];\n\t\tif( h == null )\n\t\t\tq = null;\n\t\tlength--;\n\t\treturn x;\n\t}\n\n\t/**\n\t\tTells if `this` List is empty.\n\t**/\n\tpublic function isEmpty() : Bool {\n\t\treturn (h == null);\n\t}\n\n\t/**\n\t\tEmpties `this` List.\n\n\t\tThis function does not traverse the elements, but simply sets the\n\t\tinternal references to null and `this.length` to 0.\n\t**/\n\tpublic function clear() : Void {\n\t\th = null;\n\t\tq = null;\n\t\tlength = 0;\n\t}\n\n\t/**\n\t\tRemoves the first occurence of `v` in `this` List.\n\n\t\tIf `v` is found by checking standard equality, it is removed from `this`\n\t\tList and the function returns true.\n\n\t\tOtherwise, false is returned.\n\t**/\n\tpublic function remove( v : T ) : Bool {\n\t\tvar prev = null;\n\t\tvar l = h;\n\t\twhile( l != null ) {\n\t\t\tif( l[0] == v ) {\n\t\t\t\tif( prev == null )\n\t\t\t\t\th = l[1];\n\t\t\t\telse\n\t\t\t\t\tprev[1] = l[1];\n\t\t\t\tif( q == l )\n\t\t\t\t\tq = prev;\n\t\t\t\tlength--;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tprev = l;\n\t\t\tl = l[1];\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t\tReturns an iterator on the elements of the list.\n\t**/\n\tpublic inline function iterator() : ListIterator<T> {\n\t\treturn new ListIterator<T>(h);\n\t}\n\n\t/**\n\t\tReturns a string representation of `this` List.\n\n\t\tThe result is enclosed in { } with the individual elements being\n\t\tseparated by a comma.\n\t**/\n\tpublic function toString() {\n\t\tvar s = new StringBuf();\n\t\tvar first = true;\n\t\tvar l = h;\n\t\ts.add(\"{\");\n\t\twhile( l != null ) {\n\t\t\tif( first )\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\ts.add(\", \");\n\t\t\ts.add(Std.string(l[0]));\n\t\t\tl = l[1];\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n\n\t/**\n\t\tReturns a string representation of `this` List, with `sep` separating\n\t\teach element.\n\t**/\n\tpublic function join(sep : String) {\n\t\tvar s = new StringBuf();\n\t\tvar first = true;\n\t\tvar l = h;\n\t\twhile( l != null ) {\n\t\t\tif( first )\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\ts.add(sep);\n\t\t\ts.add(l[0]);\n\t\t\tl = l[1];\n\t\t}\n\t\treturn s.toString();\n\t}\n\n\t/**\n\t\tReturns a list filtered with `f`. The returned list will contain all\n\t\telements for which `f(x) == true`.\n\t**/\n\tpublic function filter( f : T -> Bool ) {\n\t\tvar l2 = new List();\n\t\tvar l = h;\n\t\twhile( l != null ) {\n\t\t\tvar v = l[0];\n\t\t\tl = l[1];\n\t\t\tif( f(v) )\n\t\t\t\tl2.add(v);\n\t\t}\n\t\treturn l2;\n\t}\n\n\t/**\n\t\tReturns a new list where all elements have been converted by the\n\t\tfunction `f`.\n\t**/\n\tpublic function map<X>(f : T -> X) : List<X> {\n\t\tvar b = new List();\n\t\tvar l = h;\n\t\twhile( l != null ) {\n\t\t\tvar v = l[0];\n\t\t\tl = l[1];\n\t\t\tb.add(f(v));\n\t\t}\n\t\treturn b;\n\t}\n\n}\n\nprivate class ListIterator<T> {\n\tvar head:Array<Dynamic>;\n\tvar val:Dynamic;\n\n\tpublic inline function new(head:Array<Dynamic>) {\n\t\tthis.head = head;\n\t\tthis.val = null;\n\t}\n\n\tpublic inline function hasNext():Bool {\n\t\treturn head != null;\n\t}\n\n\tpublic inline function next():T {\n\t\tval = head[0];\n\t\thead = head[1];\n\t\treturn val;\n\t}\n}\n","import js.html.Performance;\nimport js.html.DivElement;\nimport js.Browser;\n\n@:expose class Perf {\n\n\tpublic static var MEASUREMENT_INTERVAL:Int = 1000;\n\n\tpublic static var FONT_FAMILY:String = \"Helvetica,Arial\";\n\n\tpublic static var FPS_BG_CLR:String = \"#00FF00\";\n\tpublic static var FPS_WARN_BG_CLR:String = \"#FF8000\";\n\tpublic static var FPS_PROB_BG_CLR:String = \"#FF0000\";\n\n\tpublic static var MS_BG_CLR:String = \"#FFFF00\";\n\tpublic static var MEM_BG_CLR:String = \"#086A87\";\n\tpublic static var INFO_BG_CLR:String = \"#00FFFF\";\n\tpublic static var FPS_TXT_CLR:String = \"#000000\";\n\tpublic static var MS_TXT_CLR:String = \"#000000\";\n\tpublic static var MEM_TXT_CLR:String = \"#FFFFFF\";\n\tpublic static var INFO_TXT_CLR:String = \"#000000\";\n\n\tpublic static var TOP_LEFT:String = \"TL\";\n\tpublic static var TOP_RIGHT:String = \"TR\";\n\tpublic static var BOTTOM_LEFT:String = \"BL\";\n\tpublic static var BOTTOM_RIGHT:String = \"BR\";\n\n\tpublic var fps:DivElement;\n\tpublic var ms:DivElement;\n\tpublic var memory:DivElement;\n\tpublic var info:DivElement;\n\n\tpublic var currentFps:Float;\n\tpublic var currentMs:Float;\n\tpublic var currentMem:String;\n\n\tvar _time:Float;\n\tvar _startTime:Float;\n\tvar _prevTime:Float;\n\tvar _ticks:Int;\n\tvar _fpsMin:Float;\n\tvar _fpsMax:Float;\n\tvar _memCheck:Bool;\n\tvar _pos:String;\n\tvar _offset:Float;\n\n\tvar _perfObj:Performance;\n\tvar _memoryObj:Memory;\n\n\tpublic function new(?pos = \"TR\", ?offset:Float = 0) {\n\t\t_perfObj = Browser.window.performance;\n\t\t_memoryObj = untyped __js__(\"window.performance\").memory;\n\t\t_memCheck = (_perfObj != null && _memoryObj != null && _memoryObj.totalJSHeapSize > 0);\n\n\t\tcurrentFps = 0;\n\t\tcurrentMs = 0;\n\t\tcurrentMem = \"0\";\n\n\t\t_pos = pos;\n\t\t_offset = offset;\n\t\t_time = 0;\n\t\t_ticks = 0;\n\t\t_fpsMin = Math.POSITIVE_INFINITY;\n\t\t_fpsMax = 0;\n\t\t_startTime = _now();\n\t\t_prevTime = -MEASUREMENT_INTERVAL;\n\n\t\t_createFpsDom();\n\t\t_createMsDom();\n\t\tif (_memCheck) _createMemoryDom();\n\t\tBrowser.window.requestAnimationFrame(cast _tick);\n\t}\n\n\tinline function _now():Float {\n\t\treturn (_perfObj != null && _perfObj.now != null) ? _perfObj.now() : Date.now().getTime();\n\t}\n\n\tfunction _tick() {\n\t\tvar time = _now();\n\t\t_ticks++;\n\n\t\tif (time > _prevTime + MEASUREMENT_INTERVAL) {\n\t\t\tcurrentMs = Math.round(time - _startTime);\n\t\t\tms.innerHTML = \"MS: \" + currentMs;\n\n\t\t\tcurrentFps = Math.round((_ticks * 1000) / (time - _prevTime));\n\t\t\t_fpsMin = Math.min(_fpsMin, currentFps);\n\t\t\t_fpsMax = Math.max(_fpsMax, currentFps);\n\n\t\t\tfps.innerHTML =  \"FPS: \" + currentFps + \" (\" + _fpsMin + \"-\" + _fpsMax + \")\";\n\n\t\t\tif (currentFps >= 30) fps.style.backgroundColor = FPS_BG_CLR;\n\t\t\telse if (currentFps >= 15) fps.style.backgroundColor = FPS_WARN_BG_CLR;\n\t\t\telse fps.style.backgroundColor = FPS_PROB_BG_CLR;\n\n\t\t\t_prevTime = time;\n\t\t\t_ticks = 0;\n\n\t\t\tif (_memCheck) {\n\t\t\t\tcurrentMem = _getFormattedSize(_memoryObj.usedJSHeapSize, 2);\n\t\t\t\tmemory.innerHTML = \"MEM: \" + currentMem;\n\t\t\t}\n\t\t}\n\t\t_startTime =  time;\n\n\t\tBrowser.window.requestAnimationFrame(cast _tick);\n\t}\n\n\tfunction _createDiv(id:String, ?top:Float = 0):DivElement {\n\t\tvar div:DivElement = Browser.document.createDivElement();\n\t\tdiv.id = id;\n\t\tdiv.className = id;\n\t\tdiv.style.position = \"absolute\";\n\n\t\tswitch (_pos) {\n\t\t\tcase \"TL\":\n\t\t\t\tdiv.style.left = _offset + \"px\";\n\t\t\t\tdiv.style.top = top + \"px\";\n\t\t\tcase \"TR\":\n\t\t\t\tdiv.style.right = _offset + \"px\";\n\t\t\t\tdiv.style.top = top + \"px\";\n\t\t\tcase \"BL\":\n\t\t\t\tdiv.style.left = _offset + \"px\";\n\t\t\t\tdiv.style.bottom = ((_memCheck) ? 48 : 32) - top + \"px\";\n\t\t\tcase \"BR\":\n\t\t\t\tdiv.style.right = _offset + \"px\";\n\t\t\t\tdiv.style.bottom = ((_memCheck) ? 48 : 32) - top + \"px\";\n\t\t}\n\n\t\tdiv.style.width = \"80px\";\n\t\tdiv.style.height = \"12px\";\n\t\tdiv.style.lineHeight = \"12px\";\n\t\tdiv.style.padding = \"2px\";\n\t\tdiv.style.fontFamily = FONT_FAMILY;\n\t\tdiv.style.fontSize = \"9px\";\n\t\tdiv.style.fontWeight = \"bold\";\n\t\tdiv.style.textAlign = \"center\";\n\t\tBrowser.document.body.appendChild(div);\n\t\treturn div;\n\t}\n\n\tfunction _createFpsDom() {\n\t\tfps = _createDiv(\"fps\");\n\t\tfps.style.backgroundColor = FPS_BG_CLR;\n\t\tfps.style.zIndex = \"995\";\n\t\tfps.style.color = FPS_TXT_CLR;\n\t\tfps.innerHTML = \"FPS: 0\";\n\t}\n\n\tfunction _createMsDom() {\n\t\tms = _createDiv(\"ms\", 16);\n\t\tms.style.backgroundColor = MS_BG_CLR;\n\t\tms.style.zIndex = \"996\";\n\t\tms.style.color = MS_TXT_CLR;\n\t\tms.innerHTML = \"MS: 0\";\n\t}\n\n\tfunction _createMemoryDom() {\n\t\tmemory = _createDiv(\"memory\", 32);\n\t\tmemory.style.backgroundColor = MEM_BG_CLR;\n\t\tmemory.style.color = MEM_TXT_CLR;\n\t\tmemory.style.zIndex = \"997\";\n\t\tmemory.innerHTML = \"MEM: 0\";\n\t}\n\n\tfunction _getFormattedSize(bytes:Float, ?frac:Int = 0):String {\n\t\tvar sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n\t\tif (bytes == 0) return \"0\";\n\t\tvar precision = Math.pow(10, frac);\n\t\tvar i = Math.floor(Math.log(bytes) / Math.log(1024));\n\t\treturn Math.round(bytes * precision / Math.pow(1024, i)) / precision + \" \" + sizes[i];\n\t}\n\n\tpublic function addInfo(val:String) {\n\t\tinfo = _createDiv(\"info\", (_memCheck) ? 48 : 32);\n\t\tinfo.style.backgroundColor = INFO_BG_CLR;\n\t\tinfo.style.color = INFO_TXT_CLR;\n\t\tinfo.style.zIndex = \"998\";\n\t\tinfo.innerHTML = val;\n\t}\n\n\tpublic function clearInfo() {\n\t\tif (info != null) {\n\t\t\tBrowser.document.body.removeChild(info);\n\t\t\tinfo = null;\n\t\t}\n\t}\n}\n\ntypedef Memory = {\n\tvar usedJSHeapSize:Float;\n\tvar totalJSHeapSize:Float;\n\tvar jsHeapSizeLimit:Float;\n}","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:coreApi class Reflect {\n\n\tpublic inline static function hasField( o : Dynamic, field : String ) : Bool {\n\t\treturn untyped __js__('Object').prototype.hasOwnProperty.call(o, field);\n\t}\n\n\tpublic static function field( o : Dynamic, field : String ) : Dynamic {\n\t\ttry return untyped o[field] catch( e : Dynamic ) return null;\n\t}\n\n\tpublic inline static function setField( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\to[field] = value;\n\t}\n\n\tpublic static inline function getProperty( o : Dynamic, field : String ) : Dynamic untyped {\n\t\tvar tmp;\n\t\treturn if( o == null ) __define_feature__(\"Reflect.getProperty\",null) else if( o.__properties__ && (tmp=o.__properties__[\"get_\"+field]) ) o[tmp]() else o[field];\n\t}\n\n\tpublic static inline function setProperty( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\tvar tmp;\n\t\tif( o.__properties__ && (tmp=o.__properties__[\"set_\"+field]) ) o[tmp](value) else o[field] = __define_feature__(\"Reflect.setProperty\",value);\n\t}\n\n\tpublic inline static function callMethod( o : Dynamic, func : haxe.Constraints.Function, args : Array<Dynamic> ) : Dynamic untyped {\n\t\treturn func.apply(o,args);\n\t}\n\n\tpublic static function fields( o : Dynamic ) : Array<String> {\n\t\tvar a = [];\n\t\tif (o != null) untyped {\n\t\t\tvar hasOwnProperty = __js__('Object').prototype.hasOwnProperty;\n\t\t\t__js__(\"for( var f in o ) {\");\n\t\t\tif( f != \"__id__\" && f != \"hx__closures__\" && hasOwnProperty.call(o, f) ) a.push(f);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn a;\n\t}\n\n\tpublic static function isFunction( f : Dynamic ) : Bool untyped {\n\t\treturn __js__(\"typeof(f)\") == \"function\" && !(js.Boot.isClass(f) || js.Boot.isEnum(f));\n\t}\n\n\tpublic static function compare<T>( a : T, b : T ) : Int {\n\t\treturn ( a == b ) ? 0 : (((cast a) > (cast b)) ? 1 : -1);\n\t}\n\n\tpublic static function compareMethods( f1 : Dynamic, f2 : Dynamic ) : Bool {\n\t\tif( f1 == f2 )\n\t\t\treturn true;\n\t\tif( !isFunction(f1) || !isFunction(f2) )\n\t\t\treturn false;\n\t\treturn f1.scope == f2.scope && f1.method == f2.method && f1.method != null;\n\t}\n\n\tpublic static function isObject( v : Dynamic ) : Bool untyped {\n\t\tif( v == null )\n\t\t\treturn false;\n\t\tvar t = __js__(\"typeof(v)\");\n\t\treturn (t == \"string\" || (t == \"object\" && v.__enum__ == null)) || (t == \"function\" && (js.Boot.isClass(v) || js.Boot.isEnum(v)) != null);\n\t}\n\n\tpublic static function isEnumValue( v : Dynamic ) : Bool {\n\t\treturn v != null && v.__enum__ != null;\n\t}\n\n\tpublic static function deleteField( o : Dynamic, field : String ) : Bool untyped {\n\t\tif( !hasField(o,field) ) return false;\n\t\t__js__(\"delete\")(o[field]);\n\t\treturn true;\n\t}\n\n\tpublic static function copy<T>( o : T ) : T {\n\t\tvar o2 : Dynamic = {};\n\t\tfor( f in Reflect.fields(o) )\n\t\t\tReflect.setField(o2,f,Reflect.field(o,f));\n\t\treturn o2;\n\t}\n\n\t@:overload(function( f : Array<Dynamic> -> Void ) : Dynamic {})\n\tpublic static function makeVarArgs( f : Array<Dynamic> -> Dynamic ) : Dynamic {\n\t\treturn function() {\n\t\t\tvar a = untyped Array.prototype.slice.call(__js__(\"arguments\"));\n\t\t\treturn f(a);\n\t\t};\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nimport js.Boot;\n\n@:keepInit\n@:coreApi class Std {\n\n\tpublic static inline function is( v : Dynamic, t : Dynamic ) : Bool {\n\t\treturn untyped js.Boot.__instanceof(v,t);\n\t}\n\n\tpublic static inline function instance<T:{},S:T>( value : T, c : Class<S> ) : S {\n\t\treturn untyped __instanceof__(value, c) ? cast value : null;\n\t}\n\n\tpublic static function string( s : Dynamic ) : String {\n\t\treturn untyped js.Boot.__string_rec(s,\"\");\n\t}\n\n\tpublic static inline function int( x : Float ) : Int {\n\t\treturn (cast x) | 0;\n\t}\n\n\tpublic static function parseInt( x : String ) : Null<Int> {\n\t\tvar v = untyped __js__(\"parseInt\")(x, 10);\n\t\t// parse again if hexadecimal\n\t\tif( v == 0 && (x.charCodeAt(1) == 'x'.code || x.charCodeAt(1) == 'X'.code) )\n\t\t\tv = untyped __js__(\"parseInt\")(x);\n\t\tif( untyped __js__(\"isNaN\")(v) )\n\t\t\treturn null;\n\t\treturn cast v;\n\t}\n\n\tpublic static inline function parseFloat( x : String ) : Float {\n\t\treturn untyped __js__(\"parseFloat\")(x);\n\t}\n\n\tpublic static function random( x : Int ) : Int {\n\t\treturn untyped x <= 0 ? 0 : Math.floor(Math.random()*x);\n\t}\n\n\tstatic function __init__() : Void untyped {\n\t\t__feature__(\"js.Boot.getClass\",String.prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"String\"] = String,String));\n\t\t__feature__(\"js.Boot.isClass\",String.__name__ = __feature__(\"Type.getClassName\",[\"String\"],true));\n\t\t__feature__(\"Type.resolveClass\",$hxClasses[\"Array\"] = Array);\n\t\t__feature__(\"js.Boot.isClass\",Array.__name__ = __feature__(\"Type.getClassName\",[\"Array\"],true));\n\t\t__feature__(\"Date.*\", {\n\t\t\t__feature__(\"js.Boot.getClass\",__js__('Date').prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"Date\"] = __js__('Date'),__js__('Date')));\n\t\t\t__feature__(\"js.Boot.isClass\",__js__('Date').__name__ = [\"Date\"]);\n\t\t});\n\t\t__feature__(\"Int.*\",{\n\t\t\tvar Int = __feature__(\"Type.resolveClass\", $hxClasses[\"Int\"] = { __name__ : [\"Int\"] }, { __name__ : [\"Int\"] });\n\t\t});\n\t\t__feature__(\"Dynamic.*\",{\n\t\t\tvar Dynamic = __feature__(\"Type.resolveClass\", $hxClasses[\"Dynamic\"] = { __name__ : [\"Dynamic\"] }, { __name__ : [\"Dynamic\"] });\n\t\t});\n\t\t__feature__(\"Float.*\",{\n\t\t\tvar Float = __feature__(\"Type.resolveClass\", $hxClasses[\"Float\"] = __js__(\"Number\"), __js__(\"Number\"));\n\t\t\tFloat.__name__ = [\"Float\"];\n\t\t});\n\t\t__feature__(\"Bool.*\",{\n\t\t\tvar Bool = __feature__(\"Type.resolveEnum\",$hxClasses[\"Bool\"] = __js__(\"Boolean\"), __js__(\"Boolean\"));\n\t\t\tBool.__ename__ = [\"Bool\"];\n\t\t});\n\t\t__feature__(\"Class.*\",{\n\t\t\tvar Class = __feature__(\"Type.resolveClass\", $hxClasses[\"Class\"] = { __name__ : [\"Class\"] }, { __name__ : [\"Class\"] });\n\t\t});\n\t\t__feature__(\"Enum.*\",{\n\t\t\tvar Enum = {};\n\t\t});\n\t\t__feature__(\"Void.*\",{\n\t\t\tvar Void = __feature__(\"Type.resolveEnum\", $hxClasses[\"Void\"] = { __ename__ : [\"Void\"] }, { __ename__ : [\"Void\"] });\n\t\t});\n\n#if !js_es5\n\t\t__feature__(\"Array.map\",\n\t\t\tif( Array.prototype.map == null )\n\t\t\t\tArray.prototype.map = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length )\n\t\t\t\t\t\ta[i] = f(__this__[i]);\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n\t\t__feature__(\"Array.filter\",\n\t\t\tif( Array.prototype.filter == null )\n\t\t\t\tArray.prototype.filter = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length ) {\n\t\t\t\t\t\tvar e = __this__[i];\n\t\t\t\t\t\tif( f(e) ) a.push(e);\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n#end\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nenum ValueType {\n\tTNull;\n\tTInt;\n\tTFloat;\n\tTBool;\n\tTObject;\n\tTFunction;\n\tTClass( c : Class<Dynamic> );\n\tTEnum( e : Enum<Dynamic> );\n\tTUnknown;\n}\n\n@:coreApi class Type {\n\n\tpublic static inline function getClass<T>( o : T ) : Class<T> {\n\t\treturn if (o == null) null else @:privateAccess js.Boot.getClass(o);\n\t}\n\n\tpublic static function getEnum( o : EnumValue ) : Enum<Dynamic> untyped {\n\t\tif( o == null )\n\t\t\treturn null;\n\t\treturn o.__enum__;\n\t}\n\n\tpublic static function getSuperClass( c : Class<Dynamic> ) : Class<Dynamic> untyped {\n\t\treturn c.__super__;\n\t}\n\n\n\tpublic static function getClassName( c : Class<Dynamic> ) : String {\n\t\tvar a : Array<String> = untyped c.__name__;\n\t\tif (a == null)\n\t\t\treturn null;\n\t\treturn a.join(\".\");\n\t}\n\n\tpublic static function getEnumName( e : Enum<Dynamic> ) : String {\n\t\tvar a : Array<String> = untyped e.__ename__;\n\t\treturn a.join(\".\");\n\t}\n\n\tpublic static function resolveClass( name : String ) : Class<Dynamic> untyped {\n\t\tvar cl : Class<Dynamic> = $hxClasses[name];\n\t\t// ensure that this is a class\n\t\tif( cl == null || !js.Boot.isClass(cl) )\n\t\t\treturn null;\n\t\treturn cl;\n\t}\n\n\tpublic static function resolveEnum( name : String ) : Enum<Dynamic> untyped {\n\t\tvar e : Dynamic = $hxClasses[name];\n\t\t// ensure that this is an enum\n\t\tif( e == null || !js.Boot.isEnum(e) )\n\t\t\treturn null;\n\t\treturn e;\n\t}\n\n\tpublic static function createInstance<T>( cl : Class<T>, args : Array<Dynamic> ) : T untyped {\n\t\tswitch( args.length ) {\n\t\tcase 0:\n\t\t\treturn __new__(cl);\n\t\tcase 1:\n\t\t\treturn __new__(cl,args[0]);\n\t\tcase 2:\n\t\t\treturn __new__(cl,args[0],args[1]);\n\t\tcase 3:\n\t\t\treturn __new__(cl,args[0],args[1],args[2]);\n\t\tcase 4:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3]);\n\t\tcase 5:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4]);\n\t\tcase 6:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5]);\n\t\tcase 7:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6]);\n\t\tcase 8:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);\n\t\tdefault:\n\t\t\tthrow \"Too many arguments\";\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static function createEmptyInstance<T>( cl : Class<T> ) : T untyped {\n\t\t__js__(\"function empty() {}; empty.prototype = cl.prototype\");\n\t\treturn __js__(\"new empty()\");\n\t}\n\n\tpublic static function createEnum<T>( e : Enum<T>, constr : String, ?params : Array<Dynamic> ) : T {\n\t\tvar f:Dynamic = Reflect.field(e,constr);\n\t\tif( f == null ) throw \"No such constructor \"+constr;\n\t\tif( Reflect.isFunction(f) ) {\n\t\t\tif( params == null ) throw \"Constructor \"+constr+\" need parameters\";\n\t\t\treturn Reflect.callMethod(e,f,params);\n\t\t}\n\t\tif( params != null && params.length != 0 )\n\t\t\tthrow \"Constructor \"+constr+\" does not need parameters\";\n\t\treturn f;\n\t}\n\n\tpublic static function createEnumIndex<T>( e : Enum<T>, index : Int, ?params : Array<Dynamic> ) : T {\n\t\tvar c : String = (untyped e.__constructs__)[index];\n\t\tif( c == null ) throw index+\" is not a valid enum constructor index\";\n\t\treturn createEnum(e,c,params);\n\t}\n\n\tpublic static function getInstanceFields( c : Class<Dynamic> ) : Array<String> {\n\t\tvar a = [];\n\t\tuntyped __js__(\"for(var i in c.prototype) a.push(i)\");\n\t\ta.remove(\"__class__\");\n\t\ta.remove(\"__properties__\");\n\t\treturn a;\n\t}\n\n\tpublic static function getClassFields( c : Class<Dynamic> ) : Array<String> {\n\t\tvar a = Reflect.fields(c);\n\t\ta.remove(\"__name__\");\n\t\ta.remove(\"__interfaces__\");\n\t\ta.remove(\"__properties__\");\n\t\ta.remove(\"__super__\");\n\t\ta.remove(\"__meta__\");\n\t\ta.remove(\"prototype\");\n\t\treturn a;\n\t}\n\n\tpublic static function getEnumConstructs( e : Enum<Dynamic> ) : Array<String> {\n\t\tvar a : Array<String> = untyped e.__constructs__;\n\t\treturn a.copy();\n\t}\n\n\tpublic static function typeof( v : Dynamic ) : ValueType untyped {\n\t\tswitch( __js__(\"typeof\")(v) ) {\n\t\tcase \"boolean\": return TBool;\n\t\tcase \"string\": return TClass(String);\n\t\tcase \"number\":\n\t\t\t// this should handle all cases : NaN, +/-Inf and Floats outside range\n\t\t\tif( Math.ceil(v) == v%2147483648.0 )\n\t\t\t\treturn TInt;\n\t\t\treturn TFloat;\n\t\tcase \"object\":\n\t\t\tif( v == null )\n\t\t\t\treturn TNull;\n\t\t\tvar e = v.__enum__;\n\t\t\tif( e != null )\n\t\t\t\treturn TEnum(e);\n\t\t\tvar c = js.Boot.getClass(v);\n\t\t\tif( c != null )\n\t\t\t\treturn TClass(c);\n\t\t\treturn TObject;\n\t\tcase \"function\":\n\t\t\tif( js.Boot.isClass(v) || js.Boot.isEnum(v) )\n\t\t\t\treturn TObject;\n\t\t\treturn TFunction;\n\t\tcase \"undefined\":\n\t\t\treturn TNull;\n\t\tdefault:\n\t\t\treturn TUnknown;\n\t\t}\n\t}\n\n\tpublic static function enumEq<T>( a : T, b : T ) : Bool untyped {\n\t\tif( a == b )\n\t\t\treturn true;\n\t\ttry {\n\t\t\tif( a[0] != b[0] )\n\t\t\t\treturn false;\n\t\t\tfor( i in 2...a.length )\n\t\t\t\tif( !enumEq(a[i],b[i]) )\n\t\t\t\t\treturn false;\n\t\t\tvar e = a.__enum__;\n\t\t\tif( e != b.__enum__ || e == null )\n\t\t\t\treturn false;\n\t\t} catch( e : Dynamic ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic inline static function enumConstructor( e : EnumValue ) : String {\n\t\treturn untyped e[0];\n\t}\n\n\tpublic inline static function enumParameters( e : EnumValue ) : Array<Dynamic> {\n\t\treturn untyped e.slice(2);\n\t}\n\n\tpublic inline static function enumIndex( e : EnumValue ) : Int {\n\t\treturn untyped e[1];\n\t}\n\n\tpublic static function allEnums<T>( e : Enum<T> ) : Array<T> {\n\t\treturn untyped e.__empty_constructs__;\n\t}\n\n}\n\n","import js.Browser;\n\nclass Utils {\n\n\tpublic static function isAndroid():Bool {\n\t\treturn ~/Android/i.match(Browser.navigator.userAgent);\n\t}\n\n\tpublic static function isiOS():Bool {\n\t\treturn ~/(iPad|iPhone|iPod)/i.match(Browser.navigator.userAgent);\n\t}\n\n\tpublic static function getiOSVersion():Array<Int> {\n\t\tvar v:EReg = ~/[0-9_]+?[0-9_]+?[0-9_]+/i;\n\t\tvar matched:Array<Int> = [];\n\t\tif (v.match(Browser.navigator.userAgent)) {\n\t\t\tvar match:Array<String> = v.matched(0).split(\"_\");\n\t\t\tmatched = [for (i in match) Std.parseInt(i)];\n\t\t}\n\t\treturn matched;\n\t}\n\n\tpublic static function isMobile():Bool {\n\t\tvar ua = Browser.navigator.userAgent;\n\t\treturn (~/Android/i.match(ua) || ~/webOS/i.match(ua)\n\t\t|| ~/iPhone/i.match(ua) || ~/iPad/i.match(ua) || ~/iPod/i.match(ua)\n\t\t|| ~/BlackBerry/i.match(ua) || ~/Windows Phone/i.match(ua));\n\t}\n\n\tpublic static function isChrome():Bool{\n\t\treturn Browser.navigator.userAgent.toLowerCase().indexOf(\"chrome\") > -1;\n\t}\n}","import js.html.HTMLDocument;\nimport js.html.AudioElement;\nimport js.Browser;\n\n@:expose @:keep class Waud {\n\n\tpublic static var isWebAudioSupported:Bool;\n\tpublic static var isHTML5AudioSupported:Bool;\n\tpublic static var audioManager:AudioManager;\n\tpublic static var defaults:WaudSoundOptions = {};\n\tpublic static var sounds:Map<String, IWaudSound>;\n\tpublic static var types:Map<String, String>;\n\tpublic static var dom:HTMLDocument;\n\tpublic static var preferredSampleRate:Int = 44100;\n\n\tstatic var audioElement:AudioElement;\n\n\tpublic static var __touchUnlockCallback:Void -> Void;\n\n\tpublic static function init(?d:HTMLDocument) {\n\t\tif (d == null) d = Browser.document;\n\t\tdom = d;\n\t\taudioElement = dom.createAudioElement();\n\t\tif (Waud.audioManager == null) Waud.audioManager = new AudioManager();\n\t\tisWebAudioSupported = Waud.audioManager.checkWebAudioAPISupport();\n\t\tisHTML5AudioSupported = (Reflect.field(Browser.window, \"Audio\") != null);\n\n\t\tif (isWebAudioSupported) Waud.audioManager.createAudioContext();\n\t\telse if (!isHTML5AudioSupported) trace(\"no audio support in this browser\");\n\n\t\tdefaults.autoplay = false;\n\t\tdefaults.loop = false;\n\t\tdefaults.preload = \"true\";\n\t\tdefaults.volume = 1;\n\n\t\tsounds = new Map();\n\n\t\ttypes = new Map();\n\t\ttypes.set(\"mp3\", \"audio/mpeg\");\n\t\ttypes.set(\"ogg\", \"audio/ogg\");\n\t\ttypes.set(\"wav\", \"audio/wav\");\n\t\ttypes.set(\"aac\", \"audio/aac\");\n\t\ttypes.set(\"m4a\", \"audio/x-m4a\");\n\t}\n\n\tpublic static function enableTouchUnlock(?callback:Void -> Void) {\n\t\t__touchUnlockCallback = callback;\n\t\tdom.ontouchend = Waud.audioManager.unlockAudio;\n\t}\n\n\tpublic static function mute(?val:Bool = true) {\n\t\tfor (sound in sounds) sound.mute(val);\n\t}\n\n\tpublic static function stop() {\n\t\tfor (sound in sounds) sound.stop();\n\t}\n\n\tpublic static function getFormatSupportString():String {\n\t\tvar support:String = \"OGG: \" + audioElement.canPlayType('audio/ogg; codecs=\"vorbis\"');\n\t\tsupport += \", WAV: \" + audioElement.canPlayType('audio/wav; codecs=\"1\"');\n\t\tsupport += \", MP3: \" + audioElement.canPlayType('audio/mpeg;');\n\t\tsupport += \", AAC: \" + audioElement.canPlayType('audio/aac;');\n\t\tsupport += \", M4A: \" + audioElement.canPlayType('audio/x-m4a;');\n\t\treturn support;\n\t}\n\n\tpublic static function isSupported():Bool {\n\t\tif (isWebAudioSupported == null || isHTML5AudioSupported == null) {\n\t\t\tisWebAudioSupported = Waud.audioManager.checkWebAudioAPISupport();\n\t\t\tisHTML5AudioSupported = (Reflect.field(Browser.window, \"Audio\") != null);\n\t\t}\n\t\treturn (isWebAudioSupported || isHTML5AudioSupported);\n\t}\n\n\tpublic static function isOGGSupported():Bool {\n\t\tvar canPlay = audioElement.canPlayType('audio/ogg; codecs=\"vorbis\"');\n\t\treturn (isHTML5AudioSupported && canPlay != null && (canPlay == \"probably\" || canPlay == \"maybe\"));\n\t}\n\n\tpublic static function isWAVSupported():Bool {\n\t\tvar canPlay = audioElement.canPlayType('audio/wav; codecs=\"1\"');\n\t\treturn (isHTML5AudioSupported && canPlay != null && (canPlay == \"probably\" || canPlay == \"maybe\"));\n\t}\n\n\tpublic static function isMP3Supported():Bool {\n\t\tvar canPlay = audioElement.canPlayType('audio/mpeg;');\n\t\treturn (isHTML5AudioSupported && canPlay != null && (canPlay == \"probably\" || canPlay == \"maybe\"));\n\t}\n\n\tpublic static function isAACSupported():Bool {\n\t\tvar canPlay = audioElement.canPlayType('audio/aac;');\n\t\treturn (isHTML5AudioSupported && canPlay != null && (canPlay == \"probably\" || canPlay == \"maybe\"));\n\t}\n\n\tpublic static function isM4ASupported():Bool {\n\t\tvar canPlay = audioElement.canPlayType('audio/x-m4a;');\n\t\treturn (isHTML5AudioSupported && canPlay != null && (canPlay == \"probably\" || canPlay == \"maybe\"));\n\t}\n}","import js.html.XMLHttpRequest;\nimport haxe.Json;\n\n@:expose @:keep class WaudSound implements IWaudSound {\n\n\tpublic var isSpriteSound:Bool;\n\n\tvar _snd:IWaudSound;\n\tvar _options:WaudSoundOptions;\n\tvar _spriteData:AudioSprite;\n\n\tpublic function new(src:String, ?options:WaudSoundOptions = null) {\n\t\tif (Waud.audioManager == null) {\n\t\t\ttrace(\"initialise Waud using Waud.init() before loading sounds\");\n\t\t\treturn;\n\t\t}\n\n\t\t_options = options;\n\n\t\tif (src.indexOf(\".json\") > 0) {\n\t\t\tisSpriteSound = true;\n\t\t\t_loadSpriteJson(src);\n\t\t}\n\t\telse {\n\t\t\tisSpriteSound = false;\n\t\t\t_init(src);\n\t\t}\n\t}\n\n\tfunction _loadSpriteJson(url:String) {\n\t\tvar xobj = new XMLHttpRequest();\n\t\txobj.overrideMimeType(\"application/json\");\n\t\txobj.open(\"GET\", url, true);\n\t\txobj.onreadystatechange = function() {\n\t\t\tif (xobj.readyState == 4 && xobj.status == 200) {\n\t\t\t\t_spriteData = Json.parse(xobj.response);\n\t\t\t\t_init(_spriteData.src);\n\t\t\t}\n\t\t};\n\t\txobj.send(null);\n\t}\n\n\tfunction _init(src:String) {\n\t\tif (Waud.isWebAudioSupported) _snd = new WebAudioAPISound(src, _options);\n\t\telse if (Waud.isHTML5AudioSupported) _snd = new HTML5Sound(src, _options);\n\t\telse trace(\"no audio support in this browser\");\n\n\t\t_snd.isSpriteSound = isSpriteSound;\n\t}\n\n\tpublic function setVolume(val:Float) {\n\t\t_snd.setVolume(val);\n\t}\n\n\tpublic function getVolume():Float {\n\t\treturn _snd.getVolume();\n\t}\n\n\tpublic function mute(val:Bool) {\n\t\t_snd.mute(val);\n\t}\n\n\tpublic function play(?spriteName:String, ?soundProps:AudioSpriteSoundProperties = null):IWaudSound {\n\t\tif (spriteName != null) {\n\t\t\tfor (snd in _spriteData.sprite) {\n\t\t\t\tif (snd.name == spriteName) {\n\t\t\t\t\tsoundProps = snd;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_snd.play(spriteName, soundProps);\n\t\treturn this;\n\t}\n\n\tpublic function isPlaying():Bool {\n\t\treturn _snd.isPlaying();\n\t}\n\n\tpublic function loop(val:Bool) {\n\t\t_snd.loop(val);\n\t}\n\n\tpublic function stop() {\n\t\t_snd.stop();\n\t}\n\n\tpublic function onEnd(callback:IWaudSound -> Void):IWaudSound {\n\t\t_snd.onEnd(callback);\n\t\treturn this;\n\t}\n\n\tpublic function destroy() {\n\t\t_snd.destroy();\n\t\t_snd = null;\n\t}\n}","import js.html.XMLHttpRequestResponseType;\nimport js.html.XMLHttpRequest;\nimport js.html.audio.GainNode;\nimport js.html.audio.AudioBufferSourceNode;\nimport js.html.audio.AudioBuffer;\n\n@:expose @:keep class WebAudioAPISound extends BaseSound implements IWaudSound {\n\n\tvar _url:String;\n\tvar _manager:AudioManager;\n\tvar _snd:AudioBufferSourceNode;\n\tvar _gainNode:GainNode;\n\n\tpublic function new(url:String, ?options:WaudSoundOptions = null) {\n\t\tsuper(url, options);\n\n\t\t_url = url;\n\t\t_manager = Waud.audioManager;\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.open(\"GET\", _url, true);\n\t\trequest.responseType = XMLHttpRequestResponseType.ARRAYBUFFER;\n\t\trequest.onload = _onSoundLoaded;\n\t\trequest.onerror = _error;\n\t\trequest.send();\n\n\t\tWaud.sounds.set(url, this);\n\t}\n\n\tfunction _onSoundLoaded(evt) {\n\t\t_manager.audioContext.decodeAudioData(evt.target.response, _decodeSuccess, _error);\n\t}\n\n\tfunction _decodeSuccess(buffer:AudioBuffer) {\n\t\tif (buffer == null) {\n\t\t\ttrace(\"empty buffer: \" + _url);\n\t\t\t_error();\n\t\t\treturn;\n\t\t}\n\t\t_manager.bufferList.set(_url, buffer);\n\t\tif (_options.onload != null) _options.onload(this);\n\t\tif (_options.autoplay) play();\n\t}\n\n\tinline function _error() {\n\t\tif (_options.onerror != null) _options.onerror(this);\n\t}\n\n\tfunction _makeSource(buffer:AudioBuffer):AudioBufferSourceNode {\n\t\tvar source:AudioBufferSourceNode = _manager.audioContext.createBufferSource();\n\t\t_gainNode = _manager.audioContext.createGain();\n\t\t_gainNode.gain.value = _options.volume;\n\t\tsource.buffer = buffer;\n\t\tsource.connect(_gainNode);\n\t\t_gainNode.connect(_manager.audioContext.destination);\n\t\treturn source;\n\t}\n\n\tpublic function play(?spriteName:String, ?soundProps:AudioSpriteSoundProperties):IWaudSound {\n\t\tif (_muted) return this;\n\t\tvar start:Float = 0;\n\t\tvar end:Float = -1;\n\t\tif (isSpriteSound && soundProps != null) {\n\t\t\tstart = soundProps.start;\n\t\t\tend = soundProps.duration;\n\t\t}\n\t\tvar buffer = _manager.bufferList.get(_url);\n\t\tif (buffer != null) {\n\t\t\t_snd = _makeSource(buffer);\n\t\t\tif (start >= 0 && end > -1) _snd.start(0, start, end);\n\t\t\telse {\n\t\t\t\t_snd.loop = _options.loop;\n\t\t\t\t_snd.start(0);\n\t\t\t}\n\n\t\t\t_isPlaying = true;\n\t\t\t_snd.onended = function() {\n\t\t\t\tif (isSpriteSound && soundProps != null && soundProps.loop && start >= 0 && end > -1) {\n\t\t\t\t\tplay(spriteName, soundProps);\n\t\t\t\t}\n\t\t\t\t_isPlaying = false;\n\t\t\t\tif (_options.onend != null) _options.onend(this);\n\t\t\t}\n\n\t\t\tif(_manager.playingSounds.get(_url) == null) _manager.playingSounds.set(_url, _snd);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tpublic function isPlaying():Bool {\n\t\treturn _isPlaying;\n\t}\n\n\tpublic function loop(val:Bool) {\n\t\tif (_snd == null) return;\n\t\t_snd.loop = val;\n\t}\n\n\tpublic function setVolume(val:Float) {\n\t\tif (_gainNode == null) return;\n\t\t_options.volume = val;\n\t\t_gainNode.gain.value = _options.volume;\n\t}\n\n\tpublic function getVolume():Float {\n\t\treturn _options.volume;\n\t}\n\n\tpublic function mute(val:Bool) {\n\t\t_muted = val;\n\t\tif (_gainNode == null) return;\n\t\tif (val) _gainNode.gain.value = 0;\n\t\telse _gainNode.gain.value = _options.volume;\n\t}\n\n\tpublic function stop() {\n\t\tif (_snd == null) return;\n\t\t_snd.stop(0);\n\t}\n\n\tpublic function onEnd(callback:IWaudSound -> Void):IWaudSound {\n\t\t_options.onend = callback;\n\t\treturn this;\n\t}\n\n\tpublic function destroy() {\n\t\tif (_snd != null) {\n\t\t\t_snd.stop(0);\n\t\t\t_snd.disconnect();\n\t\t\t_snd = null;\n\t\t}\n\t\tif (_gainNode != null) {\n\t\t\t_gainNode.disconnect();\n\t\t\t_gainNode = null;\n\t\t}\n\t}\n}","package pixi.plugins.app;\n\nimport pixi.core.renderers.webgl.WebGLRenderer;\nimport pixi.core.renderers.canvas.CanvasRenderer;\nimport pixi.core.renderers.Detector;\nimport pixi.core.display.Container;\nimport js.html.Event;\nimport js.html.Element;\nimport js.html.CanvasElement;\nimport js.Browser;\n\n/**\n * Pixi Boilerplate Helper class that can be used by any application\n * @author Adi Reddy Mora\n * http://adireddy.github.io\n * @license MIT\n * @copyright 2015\n */\nclass Application {\n\n\t/**\n     * Sets the pixel ratio of the application.\n     * default - 1\n     */\n\tpublic var pixelRatio:Float;\n\n\t/**\n\t * Default frame rate is 60 FPS and this can be set to true to get 30 FPS.\n\t * default - false\n\t */\n\tpublic var skipFrame(default, set):Bool;\n\n\t/**\n\t * Default frame rate is 60 FPS and this can be set to anything between 1 - 60.\n\t * default - 60\n\t */\n\tpublic var fps(default, set):Int;\n\n\t/**\n\t * Width of the application.\n\t * default - Browser.window.innerWidth\n\t */\n\tpublic var width:Float;\n\n\t/**\n\t * Height of the application.\n\t * default - Browser.window.innerHeight\n\t */\n\tpublic var height:Float;\n\n\t/**\n\t * Renderer transparency property.\n\t * default - false\n\t */\n\tpublic var transparent:Bool;\n\n\t/**\n\t * Graphics antialias property.\n\t * default - false\n\t */\n\tpublic var antialias:Bool;\n\n\t/**\n\t * Force FXAA shader antialias instead of native (faster).\n\t * default - false\n\t */\n\tpublic var forceFXAA:Bool;\n\n\t/**\n\t * Force round pixels.\n\t * default - false\n\t */\n\tpublic var roundPixels:Bool;\n\n\t/**\n\t * This sets if the CanvasRenderer will clear the canvas or not before the new render pass.\n     * If the scene is NOT transparent Pixi will use a canvas sized fillRect operation every frame to set the canvas background color.\n     * If the scene is transparent Pixi will use clearRect to clear the canvas every frame.\n     * Disable this by setting this to false. For example if your game has a canvas filling background image you often don't need this set.\n\t * default - true\n\t */\n\tpublic var clearBeforeRender:Bool;\n\n\t/**\n\t * enables drawing buffer preservation, enable this if you need to call toDataUrl on the webgl context\n\t * default - false\n\t */\n\tpublic var preserveDrawingBuffer:Bool;\n\n\t/**\n\t * Whether you want to resize the canvas and renderer on browser resize.\n\t * Should be set to false when custom width and height are used for the application.\n\t * default - true\n\t */\n\tpublic var autoResize:Bool;\n\n\t/**\n\t * Sets the background color of the stage.\n\t * default - 0xFFFFFF\n\t */\n\tpublic var backgroundColor:Int;\n\n\t/**\n\t * Update listener \tfunction\n\t */\n\tpublic var onUpdate:Float -> Void;\n\n\t/**\n\t * Window resize listener \tfunction\n\t */\n\tpublic var onResize:Void -> Void;\n\n\t/**\n\t * Canvas Element\n\t * Read-only\n\t */\n\tpublic var canvas(default, null):CanvasElement;\n\n\t/**\n\t * Renderer\n\t * Read-only\n\t */\n\tpublic var renderer(default, null):Dynamic;\n\n\t/**\n\t * Global Container.\n\t * Read-only\n\t */\n\tpublic var stage(default, null):Container;\n\n\tpublic static inline var AUTO:String = \"auto\";\n\tpublic static inline var RECOMMENDED:String = \"recommended\";\n\tpublic static inline var CANVAS:String = \"canvas\";\n\tpublic static inline var WEBGL:String = \"webgl\";\n\n\tvar _frameCount:Int;\n\n\tpublic function new() {\n\t\t_setDefaultValues();\n\t}\n\n\tfunction set_fps(val:Int):Int {\n\t\t_frameCount = 0;\n\t\treturn fps = (val >= 1 && val < 60) ? Std.int(val) : 60;\n\t}\n\n\tfunction set_skipFrame(val:Bool):Bool {\n\t\tif (val) {\n\t\t\ttrace(\"pixi.plugins.app.Application > Deprecated: skipFrame - use fps property and set it to 30 instead\");\n\t\t\tfps = 30;\n\t\t}\n\t\treturn skipFrame = val;\n\t}\n\n\tinline function _setDefaultValues() {\n\t\tpixelRatio = 1;\n\t\tskipFrame = false;\n\t\tautoResize = true;\n\t\ttransparent = false;\n\t\tantialias = false;\n\t\tforceFXAA = false;\n\t\troundPixels = false;\n\t\tclearBeforeRender = true;\n\t\tpreserveDrawingBuffer = false;\n\t\tbackgroundColor = 0xFFFFFF;\n\t\twidth = Browser.window.innerWidth;\n\t\theight = Browser.window.innerHeight;\n\t\tfps = 60;\n\t}\n\n\t/**\n\t * Starts pixi application setup using the properties set or default values\n\t * @param [rendererType] - Renderer type to use AUTO (default) | CANVAS | WEBGL\n\t * @param [stats] - Enable/disable stats for the application.\n\t * Note that stats.js is not part of pixi so don't forget to include it you html page\n\t * Can be found in libs folder. \"libs/stats.min.js\" <script type=\"text/javascript\" src=\"libs/stats.min.js\"></script>\n\t * @param [parentDom] - By default canvas will be appended to body or it can be appended to custom element if passed\n\t */\n\n\tpublic function start(?rendererType:String = \"auto\", ?parentDom:Element) {\n\t\tcanvas = Browser.document.createCanvasElement();\n\t\tcanvas.style.width = width + \"px\";\n\t\tcanvas.style.height = height + \"px\";\n\t\tcanvas.style.position = \"absolute\";\n\t\tif (parentDom == null) Browser.document.body.appendChild(canvas);\n\t\telse parentDom.appendChild(canvas);\n\n\t\tstage = new Container();\n\n\t\tvar renderingOptions:RenderingOptions = {};\n\t\trenderingOptions.view = canvas;\n\t\trenderingOptions.backgroundColor = backgroundColor;\n\t\trenderingOptions.resolution = pixelRatio;\n\t\trenderingOptions.antialias = antialias;\n\t\trenderingOptions.forceFXAA = forceFXAA;\n\t\trenderingOptions.autoResize = autoResize;\n\t\trenderingOptions.transparent = transparent;\n\t\trenderingOptions.clearBeforeRender = clearBeforeRender;\n\t\trenderingOptions.preserveDrawingBuffer = preserveDrawingBuffer;\n\n\t\tif (rendererType == AUTO) renderer = Detector.autoDetectRenderer(width, height, renderingOptions);\n\t\telse if (rendererType == CANVAS) renderer = new CanvasRenderer(width, height, renderingOptions);\n\t\telse renderer = new WebGLRenderer(width, height, renderingOptions);\n\n\t\tif (roundPixels) renderer.roundPixels = true;\n\n\t\tBrowser.document.body.appendChild(renderer.view);\n\t\tif (autoResize) Browser.window.onresize = _onWindowResize;\n\t\tBrowser.window.requestAnimationFrame(_onRequestAnimationFrame);\n\n\t\t#if stats addStats(); #end\n\t}\n\n\tpublic function pauseRendering() {\n\t\tBrowser.window.onresize = null;\n\t\tBrowser.window.requestAnimationFrame(function(elapsedTime) {});\n\t}\n\n\tpublic function resumeRendering() {\n\t\tif (autoResize) Browser.window.onresize = _onWindowResize;\n\t\tBrowser.window.requestAnimationFrame(_onRequestAnimationFrame);\n\t}\n\n\t@:noCompletion function _onWindowResize(event:Event) {\n\t\twidth = Browser.window.innerWidth;\n\t\theight = Browser.window.innerHeight;\n\t\trenderer.resize(width, height);\n\t\tcanvas.style.width = width + \"px\";\n\t\tcanvas.style.height = height + \"px\";\n\n\t\tif (onResize != null) onResize();\n\t}\n\n\t@:noCompletion function _onRequestAnimationFrame(elapsedTime:Float) {\n\t\t_frameCount++;\n\t\tif (_frameCount == Std.int(60 / fps)) {\n\t\t\t_frameCount = 0;\n\t\t\tif (onUpdate != null) onUpdate(elapsedTime);\n\t\t\trenderer.render(stage);\n\t\t}\n\t\tBrowser.window.requestAnimationFrame(_onRequestAnimationFrame);\n\t}\n\n\tpublic function addStats() {\n\t\tif (untyped __js__(\"window\").Perf != null) {\n\t\t\tnew Perf().addInfo([\"UNKNOWN\", \"WEBGL\", \"CANVAS\"][renderer.type] + \" - \" + pixelRatio);\n\t\t}\n\t}\n}","package arm.cohere;\n\nimport minject.Injector;\nimport arm.cohere.core.utils.BrowserUtils;\nimport arm.cohere.controller.Controller;\nimport arm.cohere.view.View;\nimport arm.cohere.model.Model;\nimport arm.cohere.core.utils.StageProperties;\nimport pixi.plugins.app.Application;\nimport js.Browser;\nimport pixi.core.Pixi;\nimport msignal.Signal.Signal0;\nimport msignal.Signal.Signal1;\n\nclass Main extends Application {\n\n\tpublic static var resize:Signal0;\n\tpublic static var update:Signal1<Float>;\n\n\tvar _stageProperties:StageProperties;\n\tvar _model:Model;\n\tvar _view:View;\n\tvar _controller:Controller;\n\n\tpublic function new() {\n\t\tsuper();\n\t\t_setStageProperties();\n\t\t_setScreenDimensions();\n\t\t_init();\n\n\t\tPixi.RESOLUTION = _stageProperties.pixelRatio;\n\t\tsuper.start();\n\t\t_setupApplication();\n\n\t\tvar perf = new Perf(Perf.BOTTOM_RIGHT);\n\t\tperf.addInfo([\"UNKNOWN\", \"WEBGL\", \"CANVAS\"][renderer.type] + \" - \" + pixelRatio);\n\t}\n\n\tinline function _setStageProperties() {\n\t\t_stageProperties = new StageProperties();\n\t\t_stageProperties.actualPixelRatio = Browser.window.devicePixelRatio;\n\t\t_stageProperties.pixelRatio = BrowserUtils.getPixelRatio();\n\t}\n\n\tinline function _setScreenDimensions() {\n\t\t_stageProperties.screenWidth = Browser.window.innerWidth;\n\t\t_stageProperties.screenHeight = Browser.window.innerHeight;\n\t\t_stageProperties.orientation = (_stageProperties.screenWidth > _stageProperties.screenHeight) ? StageProperties.LANDSCAPE : StageProperties.PORTRAIT;\n\t}\n\n\tinline function _init() {\n\t\tresize = new Signal0();\n\t\tupdate = new Signal1(Float);\n\n\t\tpixelRatio = _stageProperties.pixelRatio;\n\t\tbackgroundColor = 0xFFFFFF;\n\t\troundPixels = true;\n\t\tonUpdate = _onUpdate;\n\t\tonResize = _onResize;\n\t\ttransparent = true;\n\t}\n\n\tinline function _setupApplication() {\n\t\tstage.interactive = true;\n\n\t\t_model = new Model();\n\t\t_model.updateFps.add(_onUpdateFps);\n\t\t_view = new View(stage);\n\t\t_controller = new Controller();\n\n\t\tvar injector = new Injector();\n\t\tinjector.mapValue(StageProperties, _stageProperties);\n\t\tinjector.mapValue(Model, _model);\n\t\tinjector.mapValue(View, _view);\n\t\tinjector.injectInto(_controller);\n\n\t\t_controller.init();\n\t}\n\n\tfunction _onUpdateFps(val:Int) {\n\t\tif (val > 0) fps = val;\n\t}\n\n\tfunction _onUpdate(time:Float) {\n\t\tupdate.dispatch(time);\n\t}\n\n\tfunction _onResize() {\n\t\t_setScreenDimensions();\n\t\tresize.dispatch();\n\t}\n\n\tstatic function main() {\n\t\tWaud.init();\n\t\tnew Main();\n\t}\n}","package arm.cohere.core.components;\n\nimport arm.cohere.model.Model;\n\n@:keepSub class ComponentController {\n\n\t@inject public var model:Model;\n\n\tpublic function new() {}\n\n\tpublic function init() {}\n\n\tpublic function setup() {}\n\n\tpublic function reset() {}\n}","package arm.cohere.components.bg;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\n\nclass BgController extends ComponentController {\n\n\t@inject public var view:BgView;\n\n\toverride public function setup() {\n\t\tview.playBgSound();\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\n\t}\n}","package arm.cohere.core.components;\n\nimport arm.cohere.view.View;\nimport arm.cohere.core.utils.StageProperties;\nimport arm.cohere.core.loader.AssetLoader;\nimport pixi.core.display.Container;\n\n@SuppressWarnings(\"checkstyle:Dynamic\")\n@:keepSub class ComponentView {\n\n\t@inject public var loader:AssetLoader;\n\t@inject public var stageProperties:StageProperties;\n\n\tvar _container:Container;\n\n\tpublic var componentName:String;\n\n\tpublic var view(default, null):View;\n\n\tpublic var index(default, default):Int;\n\n\tpublic function new(mainView:View, viewName:String) {\n\t\tview = mainView;\n\n\t\t_container = new Container();\n\t\t_container.name = viewName + \"Container\";\n\n\t\tcomponentName = viewName.substring(0, viewName.indexOf(\"View\")).toLowerCase();\n\t}\n\n\tpublic inline function show() {\n\t\t_container.visible = true;\n\t}\n\n\tpublic inline function hide() {\n\t\t_container.visible = false;\n\t}\n\n\tpublic function init() {\n\t\tview.stage.addChild(_container);\n\t}\n\n\tpublic function addAssetsToLoad() {}\n\n\tpublic function destroy() {\n\t\t_container.destroy(true);\n\t\tview.stage.removeChild(_container);\n\t\t_container = null;\n\t}\n\n\tpublic function applyIndex() {\n\t\tif (index != null && index <= view.stage.children.length - 1) view.stage.setChildIndex(_container, index);\n\t\telse {\n\t\t\tindex = view.stage.children.length - 1;\n\t\t\tview.stage.setChildIndex(_container, index);\n\t\t}\n\t}\n}","package arm.cohere.components.bg;\n\nimport arm.cohere.core.utils.BrowserUtils;\nimport arm.cohere.core.components.ComponentView;\n\nclass BgView extends ComponentView {\n\n\toverride public function addAssetsToLoad() {\n\t\tloader.addAudioAsset(AssetsList.SOUNDS_BG, AssetsList.SOUNDS_BG_MP3);\n\t}\n\n\tpublic function playBgSound() {\n\t\t/*if (BrowserUtils.isiOS()) {\n\t\t\tWaud.enableTouchUnlock(function() {\n\t\t\t\tloader.playAudio(AssetsList.SOUNDS_BG, true);\n\t\t\t});\n\t\t}\n\t\telse loader.playAudio(AssetsList.SOUNDS_BG, true);*/\n\t}\n}","package arm.cohere.components.bitmapfont;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\nimport bindx.Bind;\n\nclass BitmapfontController extends ComponentController {\n\n\t@inject public var view:BitmapfontView;\n\n\toverride public function setup() {\n\t\tBind.bind(model.currentDemo, _onCurrentDemoChange);\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\t\tif (to == Model.BITMAPFONT) view.start();\n\t\telse view.end();\n\t}\n}","package bindx.macro;\n\nimport bindx.BindSignal.Signal;\nimport haxe.macro.Expr;\nimport haxe.macro.Type;\nimport haxe.macro.Context;\nimport bindx.BindSignal;\n\nusing bindx.macro.MacroUtils;\nusing haxe.macro.Tools;\n\nclass BindSignalProvider implements IBindingSignalProvider {\n\n    /**\n     * default value: true\n     */\n    static inline var LAZY_SIGNAL = \"lazySignal\";\n    /**\n     * default value: false\n     */\n    static inline var INLINE_SIGNAL_GETTER = \"inlineSignalGetter\";\n    \n    public function new() {}\n\n    @:extern static inline function signalName(fieldName:String):String return fieldName + SignalTools.SIGNAL_POSTFIX;\n    @:extern static inline function signalGetterName(fieldName:String):String return \"get_\" + signalName(fieldName);\n    @:extern static inline function signalPrivateName(fieldName:String):String return \"_\" + signalName(fieldName);\n\n    public function getFieldDispatcher(field:Field, res:Array<Field>):Void {\n        switch (field.kind) {\n            case FFun(_):\n                generateSignal(field, macro : bindx.BindSignal.MethodSignal, macro new bindx.BindSignal.MethodSignal(), res);\n            case FProp(_, _, type, _) | FVar(type, _):\n                generateSignal(field, macro : bindx.BindSignal.FieldSignal<$type>, macro new bindx.BindSignal.FieldSignal<$type>(), res);\n        }\n    }\n\n    public function getFieldChangedExpr(field:Field, oldValue:Expr, newValue:Expr):Expr {\n        var args = switch (field.kind) { case FFun(_): []; case _: [oldValue, newValue]; }\n        return dispatchSignal(macro this, field.name, args, hasLazy(field.bindableMeta()));\n    }\n\n    public function getClassFieldBindExpr(expr:Expr, field:ClassField, listener:Expr):Expr {\n        var signalName = signalName(field.name);\n        return macro @:privateAccess $expr.$signalName.add($listener);\n    }\n\n    public function getClassFieldBindToExpr(expr:Expr, field:ClassField, target:Expr):Expr {\n        var signalName = signalName(field.name);\n        return switch (field.kind) {\n            case FMethod(_):\n                var fieldName = field.name;\n                macro @:privateAccess {\n                    var listener = function () $target = $expr.$fieldName();\n                    $expr.$signalName.add(listener);\n                    function __unbind__() $expr.$signalName.remove(listener);\n                }\n            case FVar(_, _):\n                var type = field.type.follow().toComplexType();\n                macro @:privateAccess {\n                    var listener = function (from:$type, to:$type) $target = to;\n                    $expr.$signalName.add(listener);\n                    function __unbind__() $expr.$signalName.remove(listener);\n                }\n            }\n    }\n\n    public function getClassFieldUnbindExpr(expr:Expr, field:ClassField, listener:Expr):Expr {\n        var signalName = signalName(field.name);\n        return if (!listener.isNullOrEmpty())\n            macro @:privateAccess $expr.$signalName.remove($listener);\n        else\n            macro @:privateAccess $expr.$signalName.removeAll();\n    }\n\n    public function getClassFieldChangedExpr(expr:Expr, field:ClassField, oldValue:Expr, newValue:Expr):Expr {\n        var args = switch (field.kind) {\n            case FMethod(_): \n                if (!oldValue.isNullOrEmpty())\n                    Context.error(\"method notify doesn't require oldValue\", oldValue.pos);\n                if (!newValue.isNullOrEmpty())\n                    Context.error(\"method notify doesn't require newValue\", newValue.pos);\n                [];\n            case FVar(_, _):\n                if (oldValue.isNullOrEmpty() && newValue.isNullOrEmpty())\n                    Context.error(\"method notify require oldValue and newValue\", oldValue.pos);\n                [oldValue, newValue];\n        }\n        return dispatchSignal(expr, field.name, args, hasLazy(field.bindableMeta()));\n    }\n    \n    public function getUnbindAllExpr(expr:ExprOf<IBindable>, type:Type):Expr {\n        return macro bindx.BindSignal.SignalTools.unbindAll($expr);\n    }\n\n    public function getBindAllExpr(expr:ExprOf<IBindable>, type:Type, listener:Expr, force:Bool = true):Expr {\n        return macro bindx.BindSignal.SignalTools.bindAll($expr, $listener, $v{force});\n    }\n\n    function generateSignal(field:Field, type:ComplexType, builder:Expr, res:Array<Field>):Void {\n        var fieldName = field.name;\n        var signalName = signalName(fieldName);\n        var meta = field.bindableMeta();\n        var inlineSignalGetter = meta.findParam(INLINE_SIGNAL_GETTER);\n\n        if (hasLazy(meta)) {\n            var signalPrivateName = signalPrivateName(field.name);\n            res.push({\n                name: signalPrivateName,\n                kind: FVar(type, null),\n                pos: field.pos,\n                meta: [ { name:SignalTools.BIND_SIGNAL_META, pos:field.pos, params: [macro $v{fieldName}, macro true] } ],\n                access: [APrivate]\n            });\n\n            res.push({\n                name: signalName,\n                kind: FProp(\"get\", \"never\", type, null),\n                pos: field.pos,\n                access: [APrivate]\n            });\n\n            var getter = macro function foo() {\n                if (this.$signalPrivateName == null)\n                    this.$signalPrivateName = ${builder};\n                return $i{signalPrivateName};\n            };\n            var getterAccess = [APrivate];\n            if (inlineSignalGetter.isNotNullAndTrue()) getterAccess.push(AInline);\n\n            res.push({\n                name: signalGetterName(field.name),\n                kind: FFun(switch (getter.expr) { case EFunction (_, func): func; case _: throw false; }),\n                pos: field.pos,\n                access: getterAccess\n            });\n        } else {\n            if (inlineSignalGetter != null)\n                Context.warning('$INLINE_SIGNAL_GETTER works only with lazy signals', inlineSignalGetter.pos);\n\n            res.push({\n                name: signalName,\n                kind: FProp(\"default\", \"null\", type, builder),\n                pos: field.pos,\n                access: [APrivate],\n                meta: [ { name:SignalTools.BIND_SIGNAL_META, pos:field.pos, params: [macro $v{fieldName}, macro false] } ]\n            });\n        }\n    }\n\n    inline function dispatchSignal(expr:Expr, fieldName:String, args:Array<Expr>, lazy:Bool):Expr {\n        return \n            if (lazy) {\n                var signalPrivateName = signalPrivateName(fieldName);\n                macro @:privateAccess {\n                    if ($expr.$signalPrivateName != null)\n                        $expr.$signalPrivateName.dispatch($a { args } );\n                }\n            } else {\n                var signalName = signalName(fieldName);\n                macro @:privateAccess $expr.$signalName.dispatch($a { args } );\n            }\n    }\n\n    @:extern inline function hasLazy(meta:MetadataEntry):Bool {\n        return meta.findParam(LAZY_SIGNAL).isNullOrTrue();\n    }\n}","package arm.cohere.components.bitmapfont;\n\nimport pixi.extras.BitmapText;\nimport arm.cohere.core.components.ComponentView;\n\nclass BitmapfontView extends ComponentView {\n\n\tvar _bitmapFont:BitmapText;\n\n\toverride public function addAssetsToLoad() {\n\t\tloader.addAsset(AssetsList.FONTS_DESYREL, AssetsList.FONTS_DESYREL_XML);\n\t}\n\n\tpublic function start() {\n\t\t_bitmapFont = new BitmapText(\"bitmap fonts are\\n now supported!\", {font: \"60px Desyrel\"});\n\t\t_container.addChild(_bitmapFont);\n\n\t\t_resize();\n\t\tif (Main.resize != null) Main.resize.add(_resize);\n\t}\n\n\tpublic function end() {\n\t\t_container.removeChildren();\n\t\t_bitmapFont = null;\n\t}\n\n\tfunction _resize() {\n\t\t_container.position.set((stageProperties.screenWidth - _container.width) / 2, (stageProperties.screenHeight - _container.height) / 2);\n\t}\n}","package arm.cohere.components.bunnymark;\n\nimport pixi.core.textures.Texture;\nimport pixi.core.sprites.Sprite;\n\nclass Bunny extends Sprite {\n\n\tpublic var speedX(default, default):Float;\n\tpublic var speedY(default, default):Float;\n\tpublic var scaleSpeed(default, default):Float;\n\tpublic var rotationSpeed(default, default):Float;\n\n\tpublic function new(texture:Texture) {\n\t\tsuper(texture);\n\t}\n}","package arm.cohere.components.bunnymark;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\nimport bindx.Bind;\n\nclass BunnymarkController extends ComponentController {\n\n\t@inject public var view:BunnymarkView;\n\n\toverride public function setup() {\n\t\tBind.bind(model.currentDemo, _onCurrentDemoChange);\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\t\tif (to == Model.BUNNYMARK) view.start();\n\t\telse view.end();\n\t}\n}","package arm.cohere.components.bunnymark;\n\nimport pixi.core.math.shapes.Rectangle;\nimport pixi.core.text.Text;\nimport js.html.Event;\nimport js.Browser;\nimport pixi.core.particles.ParticleContainer;\nimport pixi.core.textures.Texture;\nimport arm.cohere.core.components.ComponentView;\n\nclass BunnymarkView extends ComponentView {\n\n\tpublic var useWorker:Bool;\n\n\tvar _bunnyTexture:Texture;\n\tvar _bunnys:Array<Bunny> = [];\n\tvar _bunnyTextures:Array<Texture> = [];\n\n\tvar _gravity:Float = 0.5;\n\n\tvar _maxX:Float;\n\tvar _maxY:Float;\n\n\tvar _count:Int = 0;\n\tvar _bunnyContainer:ParticleContainer;\n\n\tvar _bunnyType:Int;\n\tvar _currentTexture:Texture;\n\tvar _counter:Text;\n\n\toverride public function addAssetsToLoad() {\n\t\tloader.addAsset(AssetsList.BUNNYMARK_BUNNYS, AssetsList.BUNNYMARK_BUNNYS_PNG);\n\t}\n\n\tpublic function start() {\n\t\t_maxX = Browser.window.innerWidth;\n\t\t_maxY = Browser.window.innerHeight;\n\n\t\t_counter = new Text(\"0 BUNNIES (touch/click to add)\", { fill: \"#105CB6\", font: \"bold 12px Courier\" });\n\t\t_container.addChild(_counter);\n\n\t\t_bunnyContainer = new ParticleContainer();\n\t\t_bunnyContainer.addChild(_bunnyContainer);\n\t\t_container.addChild(_bunnyContainer);\n\n\t\t_bunnyTexture = loader.getTexture(AssetsList.BUNNYMARK_BUNNYS);\n\t\tvar bunny1 = new Texture(_bunnyTexture.baseTexture, new Rectangle(2, 47, 26, 37));\n\t\tvar bunny2 = new Texture(_bunnyTexture.baseTexture, new Rectangle(2, 86, 26, 37));\n\t\tvar bunny3 = new Texture(_bunnyTexture.baseTexture, new Rectangle(2, 125, 26, 37));\n\t\tvar bunny4 = new Texture(_bunnyTexture.baseTexture, new Rectangle(2, 164, 26, 37));\n\t\tvar bunny5 = new Texture(_bunnyTexture.baseTexture, new Rectangle(2, 2, 26, 37));\n\n\t\t_bunnyTextures = [bunny1, bunny2, bunny3, bunny4, bunny5];\n\t\t_bunnyType = 1;\n\t\t_currentTexture = _bunnyTextures[_bunnyType];\n\n\t\tBrowser.document.addEventListener(\"touchstart\", _onTouchStart, true);\n\t\tBrowser.document.addEventListener(\"mousedown\", _onTouchStart, true);\n\t\tif (Main.update != null) Main.update.add(_update);\n\t\tif (Main.resize != null) Main.resize.add(_resize);\n\t}\n\n\tfunction _onTouchStart(event:Event) {\n\t\t_bunnyType++;\n\t\t_bunnyType %= 5;\n\t\t_currentTexture = _bunnyTextures[_bunnyType];\n\n\t\tif (_count < 200000) {\n\t\t\tfor (i in 0 ... 500) {\n\t\t\t\tvar bunny = new Bunny(_currentTexture);\n\t\t\t\tbunny.speedX = Math.random() * 5;\n\t\t\t\tbunny.speedY = (Math.random() * 5) - 3;\n\t\t\t\tbunny.anchor.set(0, 1);\n\t\t\t\tbunny.scale.set(0.5 + Math.random() * 0.5, 0.5 + Math.random() * 0.5);\n\t\t\t\tbunny.rotation = (Math.random() - 0.5);\n\t\t\t\t_bunnys.push(bunny);\n\t\t\t\t_container.addChild(bunny);\n\t\t\t\t_count++;\n\t\t\t}\n\t\t}\n\t\t_counter.text = _count + \" BUNNIES\";\n\t}\n\n\tfunction _update(elapsedTime:Float) {\n\t\tfor (i in 0 ... _bunnys.length) {\n\t\t\tvar bunny = _bunnys[i];\n\t\t\tbunny.position.x += bunny.speedX;\n\t\t\tbunny.position.y += bunny.speedY;\n\t\t\tbunny.speedY += _gravity;\n\n\t\t\tif (bunny.position.x > _maxX) {\n\t\t\t\tbunny.speedX *= -1;\n\t\t\t\tbunny.position.x = _maxX;\n\t\t\t}\n\t\t\telse if (bunny.position.x < 0) {\n\t\t\t\tbunny.speedX *= -1;\n\t\t\t\tbunny.position.x = 0;\n\t\t\t}\n\n\t\t\tif (bunny.position.y > _maxY) {\n\t\t\t\tbunny.speedY *= -0.85;\n\t\t\t\tbunny.position.y = _maxY;\n\t\t\t\tif (Math.random() > 0.5) bunny.speedY -= Math.random() * 6;\n\t\t\t}\n\t\t\telse if (bunny.position.y < 0) {\n\t\t\t\tbunny.speedY = 0;\n\t\t\t\tbunny.position.y = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _resize() {\n\t\t_maxX = Browser.window.innerWidth;\n\t\t_maxY = Browser.window.innerHeight;\n\t}\n\n\tpublic function end() {\n\t\t_container.removeChildren();\n\t\t_counter = null;\n\t\t_bunnyContainer = null;\n\t\t_count = 0;\n\t\t_bunnyTextures = [];\n\n\t\tBrowser.document.removeEventListener(\"touchstart\", _onTouchStart, true);\n\t\tBrowser.document.removeEventListener(\"mousedown\", _onTouchStart, true);\n\t}\n}","package arm.cohere.components.graphics;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\nimport bindx.Bind;\n\nclass GraphicsController extends ComponentController {\n\n\t@inject public var view:GraphicsView;\n\n\toverride public function setup() {\n\t\tBind.bind(model.currentDemo, _onCurrentDemoChange);\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\t\tif (to == Model.GRAPHICS) view.start();\n\t\telse view.end();\n\t}\n}","package arm.cohere.components.graphics;\n\nimport pixi.core.math.shapes.Rectangle;\nimport js.Browser;\nimport pixi.core.graphics.Graphics;\nimport pixi.core.textures.Texture;\nimport arm.cohere.core.components.ComponentView;\n\nclass GraphicsView extends ComponentView {\n\n\tvar _graphics:Graphics;\n\tvar _thing:Graphics;\n\tvar _count:Float;\n\n\tpublic function start() {\n\t\t_count = 0;\n\t\t_graphics = new Graphics();\n\t\t_graphics.beginFill(0xFF3300);\n\t\t_graphics.lineStyle(10, 0xffd900, 1);\n\n\t\t_graphics.moveTo(50, 50);\n\t\t_graphics.lineTo(250, 50);\n\t\t_graphics.lineTo(100, 100);\n\t\t_graphics.lineTo(250, 220);\n\t\t_graphics.lineTo(50, 220);\n\t\t_graphics.lineTo(50, 50);\n\t\t_graphics.endFill();\n\n\t\t_graphics.lineStyle(10, 0xFF0000, 0.8);\n\t\t_graphics.beginFill(0xFF700B, 1);\n\n\t\t_graphics.moveTo(210, 300);\n\t\t_graphics.lineTo(450, 320);\n\t\t_graphics.lineTo(570, 350);\n\t\t_graphics.lineTo(580, 20);\n\t\t_graphics.lineTo(330, 120);\n\t\t_graphics.lineTo(410, 200);\n\t\t_graphics.lineTo(210, 300);\n\t\t_graphics.endFill();\n\n\t\t_graphics.lineStyle(2, 0x0000FF, 1);\n\t\t_graphics.drawRect(50, 250, 100, 100);\n\n\t\t_graphics.lineStyle(0);\n\t\t_graphics.beginFill(0xFFFF0B, 0.5);\n\t\t_graphics.drawCircle(470, 200, 100);\n\n\t\t_graphics.lineStyle(20, 0x33FF00);\n\t\t_graphics.moveTo(30, 30);\n\t\t_graphics.lineTo(600, 300);\n\n\t\t_container.addChild(_graphics);\n\n\t\t_thing = new Graphics();\n\t\t_container.addChild(_thing);\n\n\t\t_container.interactive = true;\n\t\t_container.hitArea = new Rectangle(0, 0, Browser.window.innerWidth, Browser.window.innerHeight);\n\t\t_container.on(\"click\", _onStageClick);\n\t\t_container.on(\"tap\", _onStageClick);\n\n\t\t_resize();\n\n\t\tif (Main.update != null) Main.update.add(_update);\n\t\tif (Main.resize != null) Main.resize.add(_resize);\n\t}\n\n\tfunction _update(t:Float) {\n\t\t_count += 0.1;\n\t\t_thing.clear();\n\t\t_thing.lineStyle(30, 0xFF0000, 1);\n\t\t_thing.beginFill(0xFF0000, 0.5);\n\n\t\t_thing.moveTo(-120 + Math.sin(_count) * 20, -100 + Math.cos(_count) * 20);\n\t\t_thing.lineTo(120 + Math.cos(_count) * 20, -100 + Math.sin(_count) * 20);\n\t\t_thing.lineTo(120 + Math.sin(_count) * 20, 100 + Math.cos(_count) * 20);\n\t\t_thing.lineTo(-120 + Math.cos(_count) * 20, 100 + Math.sin(_count) * 20);\n\t\t_thing.lineTo(-120 + Math.sin(_count) * 20, -100 + Math.cos(_count) * 20);\n\n\t\t_thing.rotation = _count * 0.1;\n\t}\n\n\tfunction _onStageClick() {\n\t\t_graphics.lineStyle(Math.random() * 30, Std.int(Math.random() * 0xFFFFFF), 1);\n\t\t_graphics.moveTo(Math.random() * Browser.window.innerWidth, Math.random() * Browser.window.innerHeight);\n\t\t_graphics.lineTo(Math.random() * Browser.window.innerWidth, Math.random() * Browser.window.innerHeight);\n\t}\n\n\tpublic function end() {\n\t\t_container.removeChildren();\n\t\t_container.interactive = false;\n\t\t_container.off(\"click\", _onStageClick);\n\t\t_container.off(\"tap\", _onStageClick);\n\t\t_graphics = null;\n\t\t_thing = null;\n\t}\n\n\tfunction _resize() {\n\t\t_graphics.position.set(Browser.window.innerWidth / 2 - _graphics.width / 2, Browser.window.innerHeight / 2 - _graphics.height / 2);\n\t\t_thing.position.set(Browser.window.innerWidth / 2, Browser.window.innerHeight / 2);\n\t}\n}","package arm.cohere.components.menu;\n\nimport arm.cohere.core.components.ComponentController;\n\nclass MenuController extends ComponentController {\n\n\t@inject public var view:MenuView;\n\n\toverride public function setup() {\n\t\tview.setup();\n\t\tview.demo.add(_onDemoChange);\n\t\tview.fps.add(_onFpsChange);\n\t}\n\n\tfunction _onDemoChange(val:String) {\n\t\tmodel.currentDemo = val.toLowerCase();\n\t}\n\n\tfunction _onFpsChange(val:Int) {\n\t\tmodel.fps = val;\n\t}\n}","package arm.cohere.components.menu;\n\nimport dat.controllers.Controller;\nimport msignal.Signal.Signal1;\nimport dat.gui.GUI;\n\nimport arm.cohere.core.components.ComponentView;\n\nclass MenuView extends ComponentView {\n\n\tpublic var demo:Signal1<String>;\n\tpublic var fps:Signal1<Int>;\n\n\tvar _menu:GUI;\n\tvar _demoList:Controller;\n\tvar _fps:Controller;\n\tvar _data:Dynamic;\n\n\tpublic function setup() {\n\t\tdemo = new Signal1(String);\n\t\tfps = new Signal1(Int);\n\n\t\t_data = { demo: \"\", fps: 60 }\n\n\t\t_menu = new GUI();\n\t\t_demoList = _menu.add(_data, \"demo\", [\"none\", \"Retina\", \"Bunnymark\", \"Spritesheet\", \"Bitmapfont\", \"Graphics\", \"Rope\", \"Tween\"]);\n\t\t_demoList.onChange(_changeDemo);\n\n\t\t_fps = _menu.add(_data, \"fps\", 1, 60);\n\t\t_fps.onChange(_changeFps);\n\t}\n\n\tfunction _changeDemo(val:String) {\n\t\tdemo.dispatch(val);\n\t}\n\n\tfunction _changeFps(val:Int) {\n\t\tfps.dispatch(val);\n\t}\n}","package arm.cohere.components.preloader;\n\nimport arm.cohere.core.components.ComponentController;\n\nclass PreloaderController extends ComponentController {\n\n\t@inject public var view:PreloaderView;\n\n\toverride public function init() {\n\t\tsuper.init();\n\t\tview.setup();\n\t\tview.ready.addOnce(_onReady);\n\t}\n\n\toverride public function setup() {\n\t\tview.reset();\n\t\tview = null;\n\t}\n\n\tfunction _onReady() {\n\t\tmodel.preloaderReady = true;\n\t}\n}","package arm.cohere.components.preloader;\n\nimport pixi.core.graphics.Graphics;\nimport msignal.Signal.Signal0;\nimport pixi.core.sprites.Sprite;\nimport pixi.core.display.Container;\nimport arm.cohere.core.components.ComponentView;\n\nclass PreloaderView extends ComponentView {\n\n\tpublic var ready:Signal0;\n\n\tvar _logo:Sprite;\n\tvar _loadingBarContainer:Container;\n\tvar _loadingBar:Graphics;\n\tvar _loadingBarBG:Graphics;\n\n\toverride public function init() {\n\t\tsuper.init();\n\t\tready = new Signal0();\n\t}\n\n\tpublic function setup() {\n\t\tloader.addAsset(AssetsList.PRELOADER_LOGO, AssetsList.PRELOADER_LOGO_PNG);\n\t\tloader.start(_onLoaded);\n\t}\n\n\tfunction _onLoaded() {\n\t\t_logo = new Sprite(loader.getTexture(AssetsList.PRELOADER_LOGO));\n\t\t_logo.anchor.set(0.5);\n\t\t_container.addChild(_logo);\n\n\t\t_createLoadingBar();\n\t\t_resize();\n\t\tif (Main.update != null) Main.update.add(_update);\n\t\tif (Main.resize != null) Main.resize.add(_resize);\n\n\t\tloader.reset();\n\t\tready.dispatch();\n\t}\n\n\tfunction _createLoadingBar() {\n\t\t_loadingBarContainer = new Container();\n\t\t_container.addChild(_loadingBarContainer);\n\n\t\t_loadingBarBG = new Graphics();\n\t\t_loadingBarBG.beginFill(0xD8D8D8);\n\t\t_loadingBarBG.drawRect(0, 0, 204, 26);\n\t\t_loadingBarBG.endFill();\n\n\t\t_loadingBar = new Graphics();\n\t\t_loadingBar.beginFill(0xFF0055);\n\t\t_loadingBar.drawRect(0, 0, 200, 22);\n\t\t_loadingBar.endFill();\n\n\t\t_loadingBarContainer.addChild(_loadingBarBG);\n\t\t_loadingBarContainer.addChild(_loadingBar);\n\t\t_loadingBar.x = _loadingBar.y = 2;\n\t\t_loadingBar.scale.x = 0.02;\n\n\t\t_loadingBarContainer.position.set(_logo.x - _loadingBarBG.width / 2, _logo.y + _logo.height / 2 + 10);\n\t}\n\n\tpublic function reset() {\n\t\t_container.removeChild(_logo);\n\t\t_container.removeChild(_loadingBarContainer);\n\t\t_loadingBarContainer = null;\n\t\t_logo = null;\n\t}\n\n\tfunction _update(elapsed:Float) {\n\t\tif (_loadingBar != null) _loadingBar.scale.x = loader.loadProgress / 100;\n\t}\n\n\tfunction _resize() {\n\t\t_container.position.set(stageProperties.screenWidth / 2, stageProperties.screenHeight / 2 - 25);\n\t}\n}","package arm.cohere.components.retina;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\nimport bindx.Bind;\n\nclass RetinaController extends ComponentController {\n\n\t@inject public var view:RetinaView;\n\n\toverride public function setup() {\n\t\tBind.bind(model.currentDemo, _onCurrentDemoChange);\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\t\tif (to == Model.RETINA) view.start();\n\t\telse view.end();\n\t}\n}","package arm.cohere.components.retina;\n\nimport pixi.core.textures.Texture;\nimport pixi.core.sprites.Sprite;\nimport pixi.core.text.Text;\nimport js.Browser;\nimport arm.cohere.core.components.ComponentView;\n\nclass RetinaView extends ComponentView {\n\n\tvar _img:Sprite;\n\tvar _label:Text;\n\n\toverride public function addAssetsToLoad() {\n\t\tloader.addAsset(AssetsList.RETINA_IMG, AssetsList.RETINA_IMG_JPG);\n\t}\n\n\tfunction _getPixelRatio():Float {\n\t\treturn (Browser.window.devicePixelRatio >= 2) ? 2 : 1;\n\t}\n\n\tpublic function start() {\n\t\t_img = new Sprite(loader.getTexture(AssetsList.RETINA_IMG));\n\t\t_img.anchor.set(0.5);\n\t\t_img.name = \"img\";\n\t\t_img.position.set(Browser.window.innerWidth / 2, Browser.window.innerHeight / 2);\n\t\t_container.addChild(_img);\n\n\t\t_label = new Text(\"Pixel Ratio: \" + _getPixelRatio(), { fill: \"#105CB6\", font: \"bold 12px Courier\" });\n\t\t_container.addChild(_label);\n\t}\n\n\tpublic function end() {\n\t\t_container.removeChildren();\n\t\t_img = null;\n\t\t_label = null;\n\t}\n}","package arm.cohere.components.rope;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\nimport bindx.Bind;\n\nclass RopeController extends ComponentController {\n\n\t@inject public var view:RopeView;\n\n\toverride public function setup() {\n\t\tBind.bind(model.currentDemo, _onCurrentDemoChange);\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\t\tif (to == Model.ROPE) view.start();\n\t\telse view.end();\n\t}\n}","package arm.cohere.components.rope;\n\nimport js.Browser;\nimport pixi.mesh.Rope;\nimport pixi.core.display.Container;\nimport pixi.core.math.Point;\nimport pixi.plugins.app.Application;\nimport pixi.core.textures.Texture;\nimport arm.cohere.core.components.ComponentView;\n\nclass RopeView extends ComponentView {\n\n\tvar _count:Float;\n\tvar _points:Array<Point>;\n\tvar _length:Float;\n\n\toverride public function addAssetsToLoad() {\n\t\tloader.addAsset(AssetsList.ROPE_SNAKE, AssetsList.ROPE_SNAKE_PNG);\n\t}\n\n\tpublic function start() {\n\t\t_count = 0;\n\t\t_points = [];\n\t\t_length = Browser.window.innerWidth / 20;\n\n\t\tfor (i in 0 ... 20) {\n\t\t\tvar segSize = _length;\n\t\t\t_points.push(new Point(i * _length, 0));\n\t\t};\n\n\t\tvar strip = new Rope(loader.getTexture(AssetsList.ROPE_SNAKE), _points);\n\t\t_container.addChild(strip);\n\n\t\tstrip.position.set(10, Browser.window.innerHeight / 2);\n\n\t\tif (Main.update != null) Main.update.add(_update);\n\t}\n\n\tfunction _update(elapsedTime:Float) {\n\t\t_count += 0.1;\n\t\tfor (i in 0 ... _points.length) {\n\t\t\t_points[i].y = Math.sin(i * 0.5 + _count) * 30;\n\t\t\t_points[i].x = i * _length + Math.cos(i * 0.3 + _count) * 20;\n\t\t}\n\t}\n\n\tpublic function end() {\n\t\t_container.removeChildren();\n\t}\n}","package arm.cohere.components.spritesheet;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\nimport bindx.Bind;\n\nclass SpritesheetController extends ComponentController {\n\n\t@inject public var view:SpritesheetView;\n\n\toverride public function setup() {\n\t\tBind.bind(model.currentDemo, _onCurrentDemoChange);\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\t\tif (to == Model.SPRITESHEET) view.start();\n\t\telse view.end();\n\t}\n}","package arm.cohere.components.spritesheet;\n\nimport pixi.core.display.Container;\nimport pixi.core.textures.Texture;\nimport pixi.extras.MovieClip;\nimport js.html.Event;\nimport pixi.core.text.Text;\nimport js.Browser;\nimport arm.cohere.core.components.ComponentView;\n\nclass SpritesheetView extends ComponentView {\n\n\tvar _counter:Text;\n\tvar _fighterTextures:Array<Texture>;\n\tvar _count:Int;\n\tvar _isAdding:Bool;\n\tvar _spriteContainer:Container;\n\n\toverride public function addAssetsToLoad() {\n\t\tloader.addAsset(AssetsList.SPRITESHEET_FIGHTER, AssetsList.SPRITESHEET_FIGHTER_JSON);\n\t}\n\n\tpublic function start() {\n\t\t_count = 0;\n\t\t_isAdding = false;\n\t\t_fighterTextures = [];\n\t\t_spriteContainer = new Container();\n\t\t_container.addChild(_spriteContainer);\n\n\t\tfor (i in 0 ... 29) {\n\t\t\tvar frame:String = \"\" + i;\n\t\t\tif (i < 10) frame = \"0\" + frame;\n\t\t\t_fighterTextures.push(loader.getTexture(\"rollSequence00\" + frame + \".png\"));\n\t\t}\n\n\t\t_counter = new Text(_count + \" SPRITES\", { fill: \"#0000FF\", font: \"bold 12px Courier\" });\n\t\t_container.addChild(_counter);\n\n\t\t_addFighter(Browser.window.innerWidth / 2, Browser.window.innerHeight / 2);\n\n\t\tBrowser.document.addEventListener(\"touchstart\", _onTouchStart, true);\n\t\tBrowser.document.addEventListener(\"touchend\", _onTouchEnd, true);\n\t\tBrowser.document.addEventListener(\"mousedown\", _onTouchStart, true);\n\t\tBrowser.document.addEventListener(\"mouseup\", _onTouchEnd, true);\n\n\t\tif (Main.update != null) Main.update.add(_update);\n\t}\n\n\tfunction _onTouchStart(event:Event) {\n\t\t_isAdding = true;\n\t}\n\n\tfunction _onTouchEnd(event:Event) {\n\t\t_isAdding = false;\n\t}\n\n\tfunction _addFighter(x:Float, y:Float) {\n\t\tvar fighter:MovieClip = new MovieClip(_fighterTextures);\n\t\tfighter.anchor.set(0.5);\n\t\tfighter.position.set(x, y);\n\t\tfighter.play();\n\n\t\t_spriteContainer.addChild(fighter);\n\t\t_count++;\n\t\t_counter.text = _count + \" SPRITES\";\n\t}\n\n\tfunction _update(elapsedTime:Float) {\n\t\tif (_isAdding) _addFighter(Std.random(Browser.window.innerWidth), Std.random(Browser.window.innerHeight));\n\t}\n\n\tpublic function end() {\n\t\t_container.removeChildren();\n\t\t_count = 0;\n\t\t_isAdding = false;\n\t\t_fighterTextures = [];\n\t\t_spriteContainer = null;\n\n\t\tBrowser.document.removeEventListener(\"touchstart\", _onTouchStart, true);\n\t\tBrowser.document.removeEventListener(\"touchend\", _onTouchEnd, true);\n\t\tBrowser.document.removeEventListener(\"mousedown\", _onTouchStart, true);\n\t\tBrowser.document.removeEventListener(\"mouseup\", _onTouchEnd, true);\n\t}\n}","package arm.cohere.components.tween;\n\nimport arm.cohere.model.Model;\nimport arm.cohere.core.components.ComponentController;\nimport bindx.Bind;\n\nclass TweenController extends ComponentController {\n\n\t@inject public var view:TweenView;\n\n\toverride public function setup() {\n\t\tBind.bind(model.currentDemo, _onCurrentDemoChange);\n\t}\n\n\tfunction _onCurrentDemoChange(from:String, to:String) {\n\t\tif (to == Model.TWEEN) view.start();\n\t\telse view.end();\n\t}\n}","package arm.cohere.components.tween;\n\nimport pixi.core.sprites.Sprite;\nimport motion.Actuate;\nimport arm.cohere.core.components.ComponentView;\n\nclass TweenView extends ComponentView {\n\n\tvar _twnObj:Sprite;\n\n\tvar _x:Float;\n\n\tpublic var x(get, set):Float;\n\n\tfunction get_x():Float {\n\t\treturn _x;\n\t}\n\n\tfunction set_x(value:Float):Float {\n\t\t_x = value;\n\t\treturn _x;\n\t}\n\n\toverride public function addAssetsToLoad() {\n\t\tloader.addAsset(AssetsList.PRELOADER_LOGO, AssetsList.PRELOADER_LOGO_PNG);\n\t}\n\n\tpublic function start() {\n\t\t_twnObj = new Sprite(loader.getTexture(AssetsList.PRELOADER_LOGO));\n\t\t_twnObj.anchor.set(0.5);\n\t\t_twnObj.alpha = 0;\n\t\t_container.addChild(_twnObj);\n\n\t\tActuate.update(test, 1, [0], [100]);\n\t\tActuate.tween(_twnObj, 2, { alpha: 1 }).repeat().reflect().delay(1);\n\n\t\t_resize();\n\t\tif (Main.resize != null) Main.resize.add(_resize);\n\n\t}\n\n\tfunction test(val:Float) {\n\t\tx = val;\n\t\ttrace(x);\n\t}\n\n\tpublic function end() {\n\t\t_container.removeChildren();\n\t}\n\n\tfunction _resize() {\n\t\t_container.position.set(stageProperties.screenWidth / 2, stageProperties.screenHeight / 2 - 25);\n\t}\n}","package arm.cohere.controller;\n\nimport minject.Injector;\nimport arm.cohere.core.components.ComponentModel;\nimport arm.cohere.core.components.ComponentView;\nimport arm.cohere.core.utils.StageProperties;\nimport arm.cohere.core.components.ComponentController;\nimport arm.cohere.core.loader.AssetLoader;\nimport arm.cohere.view.View;\nimport arm.cohere.model.Model;\n\nclass Controller {\n\n\t@inject public var model:Model;\n\t@inject public var view:View;\n\t@inject public var stageProperties:StageProperties;\n\n\tpublic var componentControllers:Array<ComponentController>;\n\n\tvar _loader:AssetLoader;\n\tvar _componentViews:Array<ComponentView>;\n\n\tpublic function new() {\n\t\tCompileTime.importPackage(\"arm.cohere.components\");\n\t\tcomponentControllers = [];\n\t\t_componentViews = [];\n\t}\n\n\tpublic function init() {\n\t\tmodel.init();\n\t\tview.init();\n\n\t\tmodel.addAssets.addOnce(_onAddAssets);\n\n\t\t_setupLoader();\n\t\t_setupComponents();\n\t}\n\n\tinline function _setupLoader() {\n\t\t_loader = new AssetLoader();\n\t\t_loader.baseUrl = \"assets/\";\n\t\t_loader.pixelRatio = stageProperties.pixelRatio;\n\t}\n\n\tfunction _onAddAssets() {\n\t\tview.addAssetsToLoad();\n\t\tfor (view in _componentViews) view.addAssetsToLoad();\n\t\t_loader.start(_onPreloadingComplete);\n\t}\n\n\tfunction _onPreloadingComplete() {\n\t\tfor (controller in componentControllers) controller.setup();\n\t\t_componentViews = null;\n\t}\n\n\tfunction _setupComponents() {\n\t\tvar models:List<Class<ComponentModel>> = CompileTime.getAllClasses(ComponentModel);\n\t\tvar views:List<Class<ComponentView>> = CompileTime.getAllClasses(ComponentView);\n\t\tvar controllers:List<Class<ComponentController>> = CompileTime.getAllClasses(ComponentController);\n\n\t\tvar viewInjector = new Injector();\n\t\tviewInjector.mapValue(AssetLoader, _loader);\n\t\tviewInjector.injectInto(view);\n\n\t\tvar modelMap:Map<String, Class<ComponentModel>> = new Map();\n\t\tfor (modelClass in models) modelMap.set(Type.getClassName(modelClass).split(\".\").pop(), modelClass);\n\n\t\tvar viewMap:Map<String, Class<ComponentView>> = new Map();\n\t\tfor (viewClass in views) viewMap.set(Type.getClassName(viewClass).split(\".\").pop(), viewClass);\n\n\t\tfor (controllerClass in controllers) {\n\t\t\tvar controllerName = Type.getClassName(controllerClass).split(\".\").pop();\n\t\t\tcontrollerName = controllerName.substring(0, controllerName.indexOf(\"Controller\"));\n\t\t\tvar modelClass = modelMap.get(controllerName + \"Model\");\n\t\t\tvar viewClass = viewMap.get(controllerName + \"View\");\n\t\t\t_setupComponent(modelClass, viewClass, controllerClass);\n\t\t}\n\n\t\t_componentViews.sort(function(comp1:ComponentView, comp2:ComponentView):Int {\n\t\t\treturn Reflect.compare(comp1.index, comp2.index);\n\t\t});\n\n\t\tfor (view in _componentViews) view.applyIndex();\n\t}\n\n\tfunction _setupComponent(modelClass:Class<ComponentModel>, viewClass:Class<ComponentView>, controllerClass:Class<ComponentController>) {\n\t\tvar componentInjector = new Injector();\n\t\tcomponentInjector.mapValue(Model, model);\n\n\t\tvar componentModel:ComponentModel = null;\n\t\tvar componentView:ComponentView = null;\n\n\t\tif (modelClass != null) {\n\t\t\tcomponentModel = Type.createInstance(modelClass, []);\n\t\t\tcomponentInjector.mapValue(modelClass, componentModel);\n\n\t\t\tvar modelInjector = new Injector();\n\t\t\tmodelInjector.mapValue(Model, model);\n\t\t\tmodelInjector.injectInto(componentModel);\n\n\t\t\tcomponentModel.init();\n\t\t}\n\n\t\tif (viewClass != null) {\n\t\t\tvar viewName = Type.getClassName(viewClass).split(\".\").pop();\n\t\t\tcomponentView = Type.createInstance(viewClass, [view, viewName]);\n\t\t\tcomponentInjector.mapValue(viewClass, componentView);\n\n\t\t\tvar viewInjector = new Injector();\n\t\t\tviewInjector.mapValue(AssetLoader, _loader);\n\t\t\tviewInjector.mapValue(StageProperties, stageProperties);\n\t\t\tviewInjector.injectInto(componentView);\n\n\t\t\tcomponentView.init();\n\t\t\t_componentViews.push(cast(componentView, ComponentView));\n\t\t}\n\n\t\tvar componentController:ComponentController = Type.createInstance(controllerClass, []);\n\t\tcomponentInjector.injectInto(componentController);\n\t\tcomponentController.init();\n\t\tcomponentControllers.push(componentController);\n\t}\n\n\tpublic function reset() {\n\t\tmodel.reset();\n\t\tview.reset();\n\t}\n}","/****\n* Copyright (c) 2013 Jason O'Neil\n* \n* Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n* \n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n* \n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n* \n****/\n\nimport haxe.macro.Context;\nimport haxe.macro.Expr;\nimport haxe.macro.Type;\nimport haxe.macro.Format;\nimport haxe.Json;\nusing StringTools;\nusing Lambda;\n\nclass CompileTime \n{\n    /** Inserts a date object of the date and time that this was compiled */\n    macro public static function buildDate():ExprOf<Date> {\n        var date = Date.now();\n        var year = toExpr(date.getFullYear());\n        var month = toExpr(date.getMonth());\n        var day = toExpr(date.getDate());\n        var hours = toExpr(date.getHours());\n        var mins = toExpr(date.getMinutes());\n        var secs = toExpr(date.getSeconds());\n        return macro new Date($year, $month, $day, $hours, $mins, $secs);\n    }\n\n    /** Returns a string of the date and time that this was compiled */\n    macro public static function buildDateString():ExprOf<String> {\n        return toExpr(Date.now().toString());\n    }\n\n    /** Reads a file at compile time, and inserts the contents into your code as a string.  The file path is resolved using `Context.resolvePath`, so it will search all your class paths */\n    macro public static function readFile(path:String):ExprOf<String> {\n        return toExpr(loadFileAsString(path));\n    }\n\n    /** Reads a file at compile time, and inserts the contents into your code as an interpolated string, similar to using 'single $quotes'.  */\n    macro public static function interpolateFile(path:String):ExprOf<String> {\n        return Format.format( toExpr(loadFileAsString(path)) );\n    }\n\n    /** Same as readFile, but checks that the file is valid Json */\n    macro public static function readJsonFile(path:String):ExprOf<String> {\n        var content = loadFileAsString(path);\n        try Json.parse(content) catch (e:Dynamic) {\n            haxe.macro.Context.error('Json from $path failed to validate: $e', Context.currentPos());\n        }\n        return toExpr(content);\n    }\n\n    /** Same as readFile, but checks that the file is valid Json */\n    macro public static function parseJsonFile(path:String):ExprOf<{}> {\n        var content = loadFileAsString(path);\n        var obj = try Json.parse(content) catch (e:Dynamic) {\n            haxe.macro.Context.error('Json from $path failed to validate: $e', Context.currentPos());\n        }\n        return toExpr(obj);\n    }\n\n    /** Same as readFile, but checks that the file is valid Xml */\n    macro public static function readXmlFile(path:String):ExprOf<String> {\n        var content = loadFileAsString(path);\n        try Xml.parse(content) catch (e:Dynamic) {\n            haxe.macro.Context.error('Xml from $path failed to validate: $e', Context.currentPos());\n        }\n        return toExpr(content);\n    }\n\n    #if markdown\n        /** Same as readFile, but checks that the file is valid Xml */\n        macro public static function readMarkdownFile(path:String):ExprOf<String> {\n            var content = loadFileAsString(path);\n            try {\n                content = Markdown.markdownToHtml( content );\n                Xml.parse(content); \n            } catch (e:Dynamic) {\n                haxe.macro.Context.error('Markdown from $path did not produce valid XML: $e', Context.currentPos());\n            }\n            return toExpr(content);\n        }\n    #end\n\n    /** Import a package at compile time.  Is a simple mapping to haxe.macro.Compiler.include(), but means you don't have to wrap your code in conditionals. */\n    macro public static function importPackage(path:String, ?recursive:Bool = true, ?ignore : Array<String>, ?classPaths : Array<String>) {\n        haxe.macro.Compiler.include(path, recursive, ignore, classPaths);\n        return toExpr(0);\n    }\n\n    /** Returns an Array of Classes.  By default it will return all classes, but you can also search for classes in a particular package, \n    classes that extend a particular type, and you can choose whether to look for classes recursively or not. */\n    macro public static function getAllClasses<T>(?inPackage:String, ?includeChildPackages:Bool = true, ?extendsBaseClass:ExprOf<Class<T>>):ExprOf<Iterable<Class<T>>> {\n        var p = Context.currentPos();\n        var baseClass:ClassType = getClassTypeFromExpr(extendsBaseClass);\n        var baseClassName:String = (baseClass == null) ? \"\" : baseClass.pack.join('.') + '.' + baseClass.name;\n        var listIDExpr = toExpr(inPackage + \",\" + includeChildPackages + \",\" + baseClassName);\n        Context.onGenerate(checkForMatchingClasses.bind(inPackage, includeChildPackages, baseClass, listIDExpr, p));\n        if (extendsBaseClass!=null)\n            return macro CompileTimeClassList.getTyped($listIDExpr, $extendsBaseClass);\n        else\n            return macro CompileTimeClassList.get($listIDExpr);\n    }\n\n    #if macro\n        static function toExpr(v:Dynamic) {\n            return Context.makeExpr(v, Context.currentPos());\n        }\n\n        static function loadFileAsString(path:String) {\n            try {\n                var p = Context.resolvePath(path);\n                Context.registerModuleDependency(Context.getLocalModule(),p);\n                return sys.io.File.getContent(p);\n            } \n            catch(e:Dynamic) {\n                return haxe.macro.Context.error('Failed to load file $path: $e', Context.currentPos());\n            }\n        }\n\n        static function isSameClass(a:ClassType, b:ClassType):Bool {\n            return (\n                a.pack.join(\".\") == b.pack.join(\".\")\n                && a.name == b.name \n            );\n        }\n\n        static function implementsInterface(cls:ClassType, interfaceToMatch:ClassType):Bool {\n            while (cls!=null) {\n                for ( i in cls.interfaces ) {\n                    if (isSameClass(i.t.get(), interfaceToMatch)) {\n                        return true;\n                    }\n                }\n                if (cls.superClass!=null) {\n                    cls = cls.superClass.t.get();\n                }\n                else cls = null;\n            }\n            return false;\n        }\n\n        static function isSubClassOfBaseClass(subClass:ClassType, baseClass:ClassType):Bool {\n            var cls = subClass;\n            while (cls.superClass != null)\n            {\n                cls = cls.superClass.t.get();\n                if (isSameClass(baseClass, cls)) { return true; }\n            }\n            return false;\n        }\n\n        static function getClassTypeFromExpr(e:Expr):ClassType {\n            var ct:ClassType = null;\n            var fullClassName = null;\n            var parts = new Array<String>();\n            var nextSection = e.expr;\n            while (nextSection != null) {\n                // Break the loop unless we explicitly encounter a next section...\n                var s = nextSection;\n                nextSection = null;\n\n                switch (s) {\n                    // Might be a direct class name, no packages\n                    case EConst(c):\n                        switch (c) {\n                            case CIdent(s):\n                                if (s != \"null\") parts.unshift(s);\n                            default:\n                        }\n                    // Might be a fully qualified package name\n                    // { expr => EField({ expr => EField({ expr => EConst(CIdent(sys)), pos => #pos(src/server/Server.hx:35: characters 53-56) },db), pos => #pos(src/server/Server.hx:35: characters 53-59) },Object), pos => #pos(src/server/Server.hx:35: characters 53-66) }\n                    case EField(e, field):\n                        parts.unshift(field);\n                        nextSection = e.expr;\n                    default:\n                }\n            }\n            fullClassName = parts.join(\".\");\n            if (fullClassName != \"\") {\n                switch (Context.getType(fullClassName)) {\n                    case TInst(classType, _):\n                        ct = classType.get();\n                    default:\n                        throw \"Currently CompileTime.getAllClasses() can only search by package name or base class, not interface, typedef etc.\";\n                }\n            }\n            return ct;\n        }\n\n        static function checkForMatchingClasses(?inPackage:String, ?includeChildPackages:Bool = true, ?baseClass:ClassType, listIDExpr:Expr, p:Position, arr:Array<haxe.macro.Type>) {\n            var classesFound:Array<String> = [];\n            for (type in arr) {\n                switch (type) {\n                    // We only care for Classes \n                    case TInst(t, _):\n                        var include = true;\n\n                        if (t.get().isInterface)\n                            include = false;\n\n                        // Check if it belongs to a certain package or subpackage\n                        if (inPackage != null) {\n                            if (includeChildPackages) {\n                                if (t.toString().startsWith(inPackage) == false) \n                                    include = false;\n                            }\n                            else {\n                                var re = new EReg(\"^\" + inPackage + \"\\\\.([A-Z][a-zA-Z0-9]*)$\", \"\");\n                                if (re.match(t.toString()) == false)\n                                    include = false;\n                            }\n                        }\n\n                        // Check if it is a subclass of a certain type\n                        if (baseClass != null) {\n                            if (baseClass.isInterface) {\n                                if (implementsInterface(t.get(), baseClass) == false)\n                                    include = false;\n                            }\n                            else {\n                                if (isSubClassOfBaseClass(t.get(), baseClass) == false)\n                                    include = false;\n                            }\n                        }\n\n                        if (include) \n                            classesFound.push(t.toString()); \n                    default:\n                }\n            }\n\n            // Create a list of all the qualified class names\n            var classNames = classesFound.map(function (c) { return c.toString(); });\n            var classNamesExpr = toExpr(classNames.join(\",\"));\n\n            // Get the CompileTimeClassList class\n            var ct:ClassType = null;\n            switch (Context.getType(\"CompileTimeClassList\")) {\n                case TInst(classType, _):\n                    ct = classType.get();\n                default:\n            }\n\n            // If the @classLists metadata already exists, get a copy of it and remove it\n            // (We'll re-add it in a minute)\n            var classListsMetaArray:Array<Expr>;\n            if (ct.meta.has('classLists')) {\n                classListsMetaArray = ct.meta.get().filter(function (i) { return i.name == \"classLists\"; })[0].params;\n                ct.meta.remove('classLists');\n            }\n            else {\n                classListsMetaArray = [];\n            }\n            \n            // Add the class names to CompileTimeClassList as metadata\n            var itemAsArray = macro [$listIDExpr, $classNamesExpr];\n            classListsMetaArray.push(itemAsArray);\n            ct.meta.add('classLists', classListsMetaArray, Context.currentPos());\n\n            return;\n        }\n    #end\n}\n","package arm.cohere.core.components;\n\nimport arm.cohere.model.Model;\n\n@:keepSub class ComponentModel  {\n\n\t@inject public var model:Model;\n\n\tpublic function new() {}\n\n\tpublic function init() {}\n\n\tpublic function reset() {}\n}","package arm.cohere.core.loader;\n\nimport pixi.loaders.Resource;\nimport pixi.core.textures.Texture;\nimport pixi.loaders.Loader;\n\nclass AssetLoader extends Loader {\n\n\tpublic var pixelRatio(null, default):Float;\n\tpublic var count(default, null):Int;\n\tpublic var loadProgress:Float;\n\tpublic var resolution(default, default):String;\n\tpublic var muteAudio(default, set):Bool;\n\n\tvar _onComplete:Void -> Void;\n\tvar _onProgress:Void -> Void;\n\tvar _loadCount:Int;\n\tvar _audioCount:Int;\n\tvar _audioKeys:Array<String>;\n\tvar _audioAssets:Map<String, AudioAsset>;\n\tvar _audioAssetPaths:Map<String, String>;\n\n\tpublic function new() {\n\t\tsuper();\n\t\tcount = 0;\n\t\tloadProgress = 0;\n\t\tpixelRatio = 1;\n\t\t_loadCount = 0;\n\t\t_audioCount = 0;\n\t\t_audioKeys = [];\n\t\t_audioAssets = new Map();\n\t\t_audioAssetPaths = new Map();\n\t\tMultipackParser.loader = this;\n\t\tuse(MultipackParser.parse);\n\t}\n\n\tpublic function start(?onComplete:Void -> Void, ?onProgress:Void -> Void) {\n\t\t_onComplete = onComplete;\n\t\t_onProgress = onProgress;\n\n\t\tif (_audioCount > 0) _loadAudioAsset();\n\t\telse load(_onComplete);\n\t}\n\n\tfunction _loadAudioAsset() {\n\t\tvar id = _audioKeys.pop();\n\t\t_audioAssets.set(id, new AudioAsset(baseUrl + _audioAssetPaths.get(id), false, false, _onAudioAssetLoaded, _onAudioAssetLoadError));\n\t}\n\n\tfunction _onAudioAssetLoaded(snd:IWaudSound) {\n\t\t_checkAudioLoadCount();\n\t}\n\n\tfunction _onAudioAssetLoadError(snd:IWaudSound) {\n\t\t_checkAudioLoadCount();\n\t}\n\n\tinline function _checkAudioLoadCount() {\n\t\t_loadCount++;\n\t\tif (_loadCount == _audioCount) {\n\t\t\tif (count - _audioCount > 0) load(_onComplete);\n\t\t\telse _onComplete();\n\t\t}\n\t\telse if (_audioKeys.length > 0) _loadAudioAsset();\n\t\t_checkProgress();\n\t}\n\n\tfunction _onAssetLoaded(resource:Resource) {\n\t\t_loadCount++;\n\t\t_checkProgress();\n\t}\n\n\tfunction _checkProgress() {\n\t\tloadProgress = (_loadCount / count) * 100;\n\t\tif (_onProgress != null) _onProgress();\n\t}\n\n\tpublic inline function addAudioAsset(id:String, path:String) {\n\t\tcount++;\n\t\t_audioCount++;\n\t\t_audioAssetPaths.set(id, path);\n\t\t_audioKeys.push(id);\n\t}\n\n\tpublic function addAsset(id:String, path:String, ?usePixelRatio:Bool = true) {\n\t\tif (!exists(id)) {\n\t\t\tvar url:String = \"\";\n\t\t\tif (usePixelRatio) {\n\t\t\t\tif (AssetsList.exists(baseUrl + getResoultionPath() + getPixelRatioPath() + path)) {\n\t\t\t\t\turl = getResoultionPath() + getPixelRatioPath() + path;\n\t\t\t\t}\n\t\t\t\telse if (AssetsList.exists(baseUrl + getResoultionPath() + getPixelRatioPath(1) + path)) {\n\t\t\t\t\turl = getResoultionPath() + getPixelRatioPath(1) + path;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (AssetsList.exists(baseUrl + getResoultionPath() + path)) url = getResoultionPath() + path;\n\t\t\telse if (AssetsList.exists(baseUrl + path)) url = path;\n\n\t\t\tif (url != \"\") {\n\t\t\t\tadd(id, url, { loadType: _getLoadtype(path) }, _onAssetLoaded);\n\t\t\t\tcount++;\n\t\t\t}\n\t\t\telse JConsole.info(\"'\" + baseUrl + path + \"' not availabble in AssetList. Make sure the asset is available or run the build to update AssetsList\");\n\t\t}\n\t}\n\n\tpublic inline function getUrl(id:String):String {\n\t\treturn Reflect.field(resources, id) != null ? Reflect.field(resources, id).url : null;\n\t}\n\n\t@SuppressWarnings(\"checkstyle:Dynamic\")\n\tpublic function getJson(id:String):Dynamic {\n\t\tvar resource:Resource = Reflect.field(resources, id);\n\t\tif (resource != null && ~/(json|text|txt)/i.match(resource.xhrType)) return resource.data;\n\t\telse JConsole.error(\"JSON wth index '\" + id + \"' not found\");\n\t\treturn null;\n\t}\n\n\tpublic function getTexture(id:String):Texture {\n\t\tvar resource:Resource = Reflect.field(resources, id);\n\t\tif (resource != null && resource.texture != null) return resource.texture;\n\t\telse if (Texture.fromFrame(id) != null) return Texture.fromFrame(id);\n\t\telse JConsole.error(\"Texture with id '\" + id + \"' not found\");\n\t\treturn null;\n\t}\n\n\tpublic function getTextureFromSpritesheet(id:String, frame:String):Texture {\n\t\tvar resource:Resource = Reflect.field(resources, id);\n\t\tif (resource != null && resource.isJson && resource.textures != null) {\n\t\t\tvar texture = Reflect.field(resource.textures, frame);\n\t\t\tif (texture != null) return texture;\n\t\t\telse JConsole.error(\"Texture with frame'\" + frame + \"' not found in \" + id);\n\t\t}\n\t\telse JConsole.error(\"Spritesheet with id '\" + id + \"' not found\");\n\t\treturn null;\n\t}\n\n\tpublic inline function exists(id:String):Bool {\n\t\treturn (Reflect.field(resources, id) != null);\n\t}\n\n\tpublic function playAudio(id:String, ?loop:Bool = false, ?onend:IWaudSound -> Void) {\n\t\tvar snd:AudioAsset = _audioAssets.get(id);\n\t\tsnd.play(loop, onend);\n\t}\n\n\tpublic function playAudioOnDemand(id:String, url:String, ?loop:Bool = false, ?onend:IWaudSound -> Void) {\n\t\tJConsole.log(\"ID: \" + id);\n\t\tvar snd:AudioAsset;\n\t\tif (_audioAssets.get(id) == null) {\n\t\t\tsnd = new AudioAsset(baseUrl + url, true, loop);\n\t\t\t_audioAssets.set(id, snd);\n\t\t}\n\t\telse {\n\t\t\tsnd = _audioAssets.get(id);\n\t\t\tsnd.play(loop, onend);\n\t\t}\n\t}\n\n\tpublic function getAudio(id:String):AudioAsset {\n\t\tif (_audioAssets.get(id) != null) return _audioAssets.get(id);\n\t\telse JConsole.error(\"Audio with id '\" + id + \"' not found\");\n\t\treturn null;\n\t}\n\n\toverride public function reset() {\n\t\tremoveAllListeners();\n\t\tcount = 0;\n\t\t_loadCount = 0;\n\t\t_audioCount = 0;\n\t\tloadProgress = 0;\n\t\t_audioKeys = [];\n\t\tresources = {};\n\t\tsuper.reset();\n\t}\n\n\tpublic inline function getResoultionPath():String {\n\t\treturn (resolution != null) ? resolution + \"/\" : \"\";\n\t}\n\n\tpublic inline function getPixelRatioPath(?val:Float):String {\n\t\treturn (val != null) ? \"@\" + val + \"x/\" : \"@\" + pixelRatio + \"x/\";\n\t}\n\n\tfunction set_muteAudio(val:Bool):Bool {\n\t\tWaud.mute(val);\n\t\treturn muteAudio = val;\n\t}\n\n\tfunction _getLoadtype(asset:String):Int {\n\t\t//type: XHR: 1, IMAGE: 2, AUDIO: 3, VIDEO: 4\n\t\tif (~/(.png|.gif|.svg|.jpg|.jpeg|.bmp)/i.match(asset)) return 2;\n\t\telse if (~/(.mp3|.wav|.ogg|.aac|.m4a|.oga|.webma)/i.match(asset)) return 3;\n\t\telse if (~/(.mp4|.webm|.m3u8)/i.match(asset)) return 4;\n\t\treturn 1;\n\t}\n}","package arm.cohere.core.loader;\n\nclass AudioAsset {\n\n\tpublic var volume(default, set):Float;\n\n\tvar _snd:WaudSound;\n\n\tpublic function new(path:String, ?autoPlay:Bool = false, ?loop:Bool = false, ?loadComplete:IWaudSound -> Void, ?loadError:IWaudSound -> Void) {\n\t\tvar options:WaudSoundOptions = {};\n\t\toptions.autoplay = autoPlay;\n\t\toptions.loop = loop;\n\t\tif (loadComplete != null) options.onload = loadComplete;\n\t\tif (loadError != null) options.onerror = loadError;\n\t\t_snd = new WaudSound(path, options);\n\t}\n\n\tpublic function play(?loop:Bool = false, ?onend:IWaudSound -> Void) {\n\t\t_snd.stop();\n\t\t_snd.loop(loop);\n\t\t_snd.play();\n\t\tif (onend != null) _snd.onEnd(onend);\n\t}\n\n\tpublic function stop() {\n\t\t_snd.stop();\n\t}\n\n\tfunction set_volume(val:Float):Float {\n\t\t_snd.setVolume(val);\n\t\treturn volume = val;\n\t}\n}","package arm.cohere.core.loader;\n\nimport pixi.loaders.Resource;\nimport pixi.core.utils.Utils;\nimport pixi.core.math.shapes.Rectangle;\nimport pixi.core.textures.Texture;\n\nclass MultipackParser {\n\n\tpublic static var loader:AssetLoader;\n\n\tpublic static function parse(resource:Resource, next:Void -> Void) {\n\t\tvar data:MultipackSpriteSheet = resource.data;\n\t\tif (data != null && data.multipack) {\n\t\t\tvar textures:Array<MultipackTexture> = data.textures;\n\t\t\tvar imgCount:Int = textures.length;\n\t\t\tvar imgLoadedCount:Int = 0;\n\t\t\tvar resolution:Float = Utils.getResolutionOfUrl(resource.url);\n\n\t\t\tvar baseURL:String = resource.url.split(loader.baseUrl)[1];\n\t\t\tbaseURL = baseURL.substring(0, baseURL.lastIndexOf(\"/\") + 1);\n\n\t\t\tfor (texture in textures) {\n\t\t\t\tvar url:String = baseURL + texture.meta.image;\n\t\t\t\tloader.add(texture.meta.image, url, { loadType: 2, crossOrigin:resource.crossOrigin }, function(image:Resource) {\n\n\t\t\t\t\tvar frames:Array<FrameData> = texture.frames;\n\t\t\t\t\tfor (n in Reflect.fields(frames)) {\n\t\t\t\t\t\tvar frameData:FrameData = Reflect.field(frames, n);\n\t\t\t\t\t\tvar rect = frameData.frame;\n\t\t\t\t\t\tif (rect != null) {\n\t\t\t\t\t\t\tvar size:Rectangle = new Rectangle(rect.x, rect.y, rect.w, rect.h);\n\t\t\t\t\t\t\tvar trim:Rectangle = null;\n\n\t\t\t\t\t\t\tif (frameData.trimmed) {\n\t\t\t\t\t\t\t\tvar actualSize = frameData.sourceSize;\n\t\t\t\t\t\t\t\tvar realSize = frameData.spriteSourceSize;\n\t\t\t\t\t\t\t\ttrim = new Rectangle(realSize.x / resolution, realSize.y / resolution, actualSize.w / resolution, actualSize.h / resolution);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsize.x /= resolution;\n\t\t\t\t\t\t\tsize.y /= resolution;\n\t\t\t\t\t\t\tsize.width /= resolution;\n\t\t\t\t\t\t\tsize.height /= resolution;\n\n\t\t\t\t\t\t\tTexture.addTextureToCache(new Texture(image.texture.baseTexture, size, size.clone(), trim), n);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tnext();\n\t\t}\n\t\telse next();\n\t}\n}\n\ntypedef MultipackSpriteSheet = {\n\tvar multipack:Bool;\n\tvar textures:Array<MultipackTexture>;\n}\n\ntypedef MultipackTexture = {\n\tvar frames:Array<FrameData>;\n\tvar meta:MetaData;\n}\n\ntypedef FrameData = {\n\tvar frame:Frame;\n\tvar rotated:Bool;\n\tvar trimmed:Bool;\n\tvar format:String;\n\tvar spriteSourceSize:SpriteSourceSize;\n\tvar sourceSize:SourceSize;\n}\n\ntypedef Frame = {\n\tvar x:Float;\n\tvar y:Float;\n\tvar w:Float;\n\tvar h:Float;\n}\n\ntypedef SpriteSourceSize = {\n\tvar x:Float;\n\tvar y:Float;\n\tvar w:Float;\n\tvar h:Float;\n}\n\ntypedef SourceSize = {\n\tvar w:Float;\n\tvar h:Float;\n}\n\ntypedef MetaData = {\n\tvar app:String;\n\tvar version:String;\n\tvar image:String;\n\tvar format:String;\n\tvar size:String;\n\tvar scale:String;\n\tvar smartupdate:String;\n}","package arm.cohere.core.utils;\n\nimport js.Browser;\n\nclass BrowserUtils {\n\n\tpublic static function getPixelRatio():Float {\n\t\tvar pixelRatio:Int = (Browser.window.devicePixelRatio <= 2) ? Math.floor(Browser.window.devicePixelRatio) : 2;\n\t\tif (isiOS() && (Browser.window.screen.width == 320 && Browser.window.screen.height == 480)) pixelRatio = 1;\n\t\tif (pixelRatio < 1) pixelRatio = 1;\n\t\t//if (isiOS() && pixelRatio > 1 && getiOSVersion()[0] < 8) pixelRatio = 1;\n\t\tJConsole.info(\"Pixel Ratio: \" + pixelRatio);\n\t\treturn pixelRatio;\n\t}\n\n\tpublic static function isAndroid():Bool {\n\t\treturn ~/Android/i.match(Browser.navigator.userAgent);\n\t}\n\n\tpublic static function isiOS():Bool {\n\t\treturn ~/(iPad|iPhone|iPod)/i.match(Browser.navigator.userAgent);\n\t}\n\n\tpublic static function getiOSVersion():Array<Int> {\n\t\tvar v:EReg = ~/[0-9_]+?[0-9_]+?[0-9_]+/i;\n\t\tvar matched:Array<Int> = [];\n\t\tif (v.match(Browser.navigator.userAgent)) {\n\t\t\tvar match:Array<String> = v.matched(0).split(\"_\");\n\t\t\tmatched = [for (i in match) Std.parseInt(i)];\n\t\t}\n\t\tJConsole.info(\"iOS v\" + matched);\n\t\treturn matched;\n\t}\n\n\tpublic static function isMobile():Bool {\n\t\tvar ua = Browser.navigator.userAgent;\n\t\treturn (~/Android/i.match(ua) || ~/webOS/i.match(ua)\n\t\t|| ~/iPhone/i.match(ua) || ~/iPad/i.match(ua) || ~/iPod/i.match(ua)\n\t\t|| ~/BlackBerry/i.match(ua) || ~/Windows Phone/i.match(ua));\n\t}\n\n\tpublic static function isChrome():Bool{\n\t\treturn Browser.navigator.userAgent.toLowerCase().indexOf(\"chrome\") > -1;\n\t}\n\n\tpublic static function refreshWindow() {\n\t\tJConsole.log(Browser.window.document.location.href);\n\t\tBrowser.window.document.location.href = Browser.window.document.location.href;\n\t}\n}","package arm.cohere.core.utils;\n\nclass StageProperties {\n\n\tpublic static inline var LANDSCAPE:String = \"LANDSCAPE\";\n\tpublic static inline var PORTRAIT:String = \"PORTRAIT\";\n\n\tpublic static inline var BUCKET_OVERLAP_FULL:String = \"BUCKET_OVERLAP_FULL\";\n\tpublic static inline var BUCKET_OVERLAP_HORIZONTAL:String = \"BUCKET_OVERLAP_HORIZONTAL\";\n\tpublic static inline var BUCKET_OVERLAP_VERTICAL:String = \"BUCKET_OVERLAP_VERTICAL\";\n\n\tpublic var actualPixelRatio:Float;\n\tpublic var pixelRatio:Float;\n\tpublic var screenWidth:Float;\n\tpublic var screenHeight:Float;\n\tpublic var bucketWidth:Float;\n\tpublic var bucketHeight:Float;\n\tpublic var screenX:Float;\n\tpublic var screenY:Float;\n\tpublic var orientation:String;\n\tpublic var bucketOverlapType:String;\n\n\tpublic function new() {\n\t\tpixelRatio = 1;\n\t\tscreenWidth = 1024;\n\t\tscreenHeight = 768;\n\t\tbucketWidth = 1024;\n\t\tbucketHeight = 768;\n\t\tscreenX = 0;\n\t\tscreenY = 0;\n\t}\n}","package arm.cohere.model;\n\nimport msignal.Signal.Signal0;\nimport msignal.Signal.Signal1;\nimport bindx.Bind;\nimport bindx.IBindable;\n\nusing bindx.Bind;\n\nclass Model implements IBindable {\n\n\tpublic static inline var BUNNYMARK:String = \"bunnymark\";\n\tpublic static inline var RETINA:String = \"retina\";\n\tpublic static inline var SPRITESHEET:String = \"spritesheet\";\n\tpublic static inline var BITMAPFONT:String = \"bitmapfont\";\n\tpublic static inline var GRAPHICS:String = \"graphics\";\n\tpublic static inline var ROPE:String = \"rope\";\n\tpublic static inline var TWEEN:String = \"tween\";\n\n\tpublic var addAssets:Signal0;\n\tpublic var updateFps:Signal1<Int>;\n\n\tpublic var preloaderReady(default, set):Bool;\n\tpublic var fps(default, set):Int;\n\n\t@:bindable public var currentDemo:String;\n\n\tpublic function new() {\n\t\taddAssets = new Signal0();\n\t\tupdateFps = new Signal1(Int);\n\t}\n\n\tpublic function init() {}\n\n\tpublic function reset() {}\n\n\tfunction set_preloaderReady(val:Bool):Bool {\n\t\tif (val) addAssets.dispatch();\n\t\treturn preloaderReady = val;\n\t}\n\n\tfunction set_fps(val:Int):Int {\n\t\tupdateFps.dispatch(val);\n\t\treturn fps = val;\n\t}\n}","package bindx.macro;\n\nimport bindx.macro.GenericError;\nimport haxe.macro.Type;\nimport haxe.macro.Expr;\nimport haxe.macro.Context;\n\nusing haxe.macro.Tools;\nusing Lambda;\nusing StringTools;\nusing bindx.macro.MacroUtils;\n\nclass BindableMacros {\n\n    static inline var OLD_VALUE = \"__oldValue__\";\n    static inline var NEW_VALUE = \"__newValue__\";\n\n    /**\n     * default value: false\n     */\n    static public inline var INLINE_SETTER = \"inlineSetter\";\n    /**\n     * default value: false\n     */\n    static public inline var FORCE = \"force\";\n    \n    static public inline var BINDABLE_FIELDS = \":bindableFields\";\n\n\tstatic var processed:Array<String> = [];\n\n    static var bindingSignalProvider:IBindingSignalProvider;\n    \n    macro static public function buildIBindable():Array<Field> {\n        var type = Context.getLocalType();\n        var tName = type.toComplexType().toString();\n        if (processed.indexOf(tName) > -1) {\n            return null;\n        }\n        processed.push(tName);\n\n        var classType = type.getClass();\n        \n        Context.onMacroContextReused(function () {\n            processed = [];\n            return true;\n        });\n        \n        if (bindingSignalProvider == null) {\n            bindingSignalProvider = new bindx.macro.BindSignalProvider();\n        }\n        \n        var fields = Context.getBuildFields();\n        \n        var meta = classType.bindableMeta();\n        if (meta != null) injectBindableMeta(fields, meta);\n        \n        if (classType.isInterface) {\n            var a = [];\n            for (f in fields) {\n                for (m in f.meta) if (m.name == MetaUtils.BINDABLE_META) {\n                    a.push(macro $v { f.name } );\n                    if (m.params.length > 0)\n                        Context.warning('Interface doesn\\'t support @:bindable meta params', m.pos);\n                }\n            }\n            var classMeta = classType.meta;\n            if (classMeta.has(BINDABLE_FIELDS))\n                classMeta.remove(BINDABLE_FIELDS);\n            classMeta.add(BINDABLE_FIELDS, a, classType.pos);\n            return fields;\n        }\n        \n        var interfaceFields = getBindableFieldsFromInterfaces(classType);\n        \n        var res = [];\n        for (f in fields)\n        \tif (f.hasBindableMeta()) {\n        \t\tif (!isFieldBindable(f, fields)) Context.error('can\\'t bind field \\'${f.name}\\'', f.pos);\n\n        \t\tbindField(f, fields, res);\n        \t} else {\n                if (interfaceFields.exists(f.name))\n                    Context.fatalError('Interface \"${typeName(interfaceFields.get(f.name))}\" expects @:bindable metadata', f.pos);\n                res.push(f);\n            }\n\n        return res;\n    }\n    \n    inline static function typeName(t: { module:String, name:String } ) {\n        return t.module + (t.module.length > 0 ? \".\" + t.name : t.name);\n    }\n    \n    static function getBindableFieldsFromInterfaces(classType:ClassType):Map<String, ClassType> {\n        var interfaceFields = new Map();\n        \n        function iter(t:ClassType) {\n            var meta = t.meta.get();\n            for (m in meta) if (m.name == BINDABLE_FIELDS) {\n                for (a in m.params) {\n                    var value = switch a.expr { case EConst(CString(s)): s; case _: null; };\n                    interfaceFields.set(value, t);\n                }\n                break;\n            }\n            for (it in t.interfaces) iter(it.t.get());\n        }\n        \n        for (i in classType.interfaces) iter(i.t.get());\n        return interfaceFields;\n    }\n\n    static function bindField(field:Field, fields:Array<Field>, res:Array<Field>):Void {\n        var meta = field.bindableMeta();\n        bindingSignalProvider.getFieldDispatcher(field, res);\n\n        var forceParam = meta.findParam(FORCE);\n        var inlineSetter = meta.findParam(INLINE_SETTER);\n        if (forceParam.isNotNullAndTrue()) {\n            if (inlineSetter != null)\n                Warn.w('\\'$INLINE_SETTER\\' ignored. \\'$FORCE\\' mode', inlineSetter.pos, WarnPriority.INFO);\n            res.push(field);\n            return;\n        }\n\n    \tswitch (field.kind) {\n    \t\tcase FVar(type, expr):\n                var fieldName = field.name;\n    \t\t\tvar setterName = 'set_$fieldName';\n    \t\t\tfield.kind = FProp(\"default\", \"set\", type, expr);\n    \t\t\tres.push(field);\n    \t\t\tvar setter = macro function foo(value:$type) {\n                    var $OLD_VALUE = this.$fieldName;\n                    if ($i{OLD_VALUE} == value) return $i{OLD_VALUE};\n                    this.$fieldName = value;\n    \t\t\t\t${bindingSignalProvider.getFieldChangedExpr(field, macro $i{OLD_VALUE}, macro $i{\"value\"})}\n    \t\t\t\treturn value;\n    \t\t\t};\n                var setterAccess = [APrivate];\n                if (inlineSetter.isNotNullAndTrue()) setterAccess.push(AInline);\n    \t\t\tres.push({\n    \t\t\t\tname: setterName,\n    \t\t\t\tkind: FFun(switch (setter.expr) { case EFunction (_, func): func; case _: throw false; }),\n    \t\t\t\tpos: field.pos,\n    \t\t\t\taccess: setterAccess\n    \t\t\t});\n\n    \t\tcase FProp(get, set, type, expr):\n                if (inlineSetter != null)\n                    Warn.w('$INLINE_SETTER ignored. Setter already exist', inlineSetter.pos, WarnPriority.INFO);\n                var fieldName = field.name;\n                var setter = fields.find(function (it) return it.name == 'set_$fieldName');\n                if (setter != null) {\n                    switch (setter.kind) {\n                        case FFun(func):\n                            patchField = field;\n                            func.expr = macro {\n                                var $OLD_VALUE = this.$fieldName;\n                                if ($i{OLD_VALUE} == $i{func.args[0].name}) return $i{OLD_VALUE};\n                                $e{patchSetter(func.expr)};\n                            };\n                            patchField = null;\n                        case _:\n                    }\n                }\n                res.push(field);\n\n            case FFun(f):\n                if (inlineSetter != null)\n                    Warn.w('methods doesn\\'t support \\'$INLINE_SETTER\\'', inlineSetter.pos, WarnPriority.INFO);\n                res.push(field);\n        }\n    }\n\n    static var patchField:Field;\n\n    static function patchSetter(expr:Expr):Expr {\n        return switch (expr.expr) {\n            case EReturn(res):\n                var fieldName = patchField.name;\n                \n                macro {\n                    var $NEW_VALUE = ${res.map(patchSetter)};\n                    ${bindingSignalProvider.getFieldChangedExpr(patchField, macro $i{OLD_VALUE}, macro $i{NEW_VALUE})};\n                    return $i{NEW_VALUE};\n                }\n                    \n            case _: expr.map(patchSetter);\n        }\n    }\n\n    static inline function injectBindableMeta(fields:Array<Field>, meta:MetadataEntry):Void {\n        for (f in fields) {\n            if (f.access.indexOf(APrivate) > -1 || f.hasBindableMeta()) continue;\n\n            var forceParam = meta.findParam(FORCE);\n            if (isFieldBindable(f, fields, forceParam.isNotNullAndTrue())) {\n                switch (f.kind) {\n                    case FFun(_):\n                    case _: f.meta.push({name:MetaUtils.BINDABLE_META, pos:f.pos, params:meta.params});\n                }\n            }\n        }\n    }\n\n    static function isFieldBindable(field:Field, fields:Array<Field>, force = false):Bool {\n        if (field.name == \"new\") return false;\n\n        for (a in field.access)\n            if (a.equals(AMacro) || a.equals(ADynamic) || a.equals(AStatic))\n                return false;\n\n        var fn = field.name;\n        if (fn.startsWith(\"set_\") || fn.startsWith(\"get_\")) {\n            var propName = fn.substr(4);\n            for (f in fields) if (f.name == propName) {\n                switch (f.kind) {\n                    case FProp(get, set, _, _) if (fn == get || fn == set):\n                        return false;\n                    case _:\n                }\n            }\n        }\n\n        if (!force) {\n            var meta = field.bindableMeta();\n            var forceParam = meta != null ? meta.findParam(FORCE) : null;\n            force = forceParam.isNotNullAndTrue();\n        }\n        \n        if (force) return switch (field.kind) {\n            case FProp(\"never\", _, _, _): false;\n            case _: true;\n        }\n\n        return switch (field.kind) {\n            case FProp(\"never\", _, _, _) | FProp(_, \"never\", _, _) | FProp(_, \"dynamic\", _, _) | FProp(_, \"null\", _, _): false;\n            case _: true;\n        }\n    }\n}","package arm.cohere.view;\n\nimport arm.cohere.core.loader.AssetLoader;\nimport pixi.core.display.Container;\n\nclass View {\n\n\t@inject public var loader:AssetLoader;\n\n\tpublic var stage(default, null):Container;\n\n\tpublic function new(stage:Container) {\n\t\tthis.stage = stage;\n\t}\n\n\tpublic function init() {}\n\n\tpublic function reset() {\n\t\tstage.removeChildren();\n\t}\n\n\tpublic function addAssetsToLoad() {\n\t\tloader.addAsset(AssetsList.COMMON_BUTTON, AssetsList.COMMON_BUTTON_PNG);\n\t}\n}","package bindx;\n\nclass MethodSignal extends Signal<Void -> Void> {\n\n    public function dispatch():Void {\n        lock ++;\n        for (l in listeners) l();\n        if (lock > 0) lock --;\n    }\n}\n\nclass FieldSignal<T> extends Signal<T -> T -> Void> {\n\n    public function dispatch(oldValue:T = null, newValue:T = null):Void {\n        lock ++;\n        var ls = listeners;\n        for (l in ls) l(oldValue, newValue);\n        if (lock > 0) lock --;\n    }\n}\n\nclass Signal<T> {\n\n    var listeners:Array<T>;\n\n    var lock:Int = 0;\n\n    public function new() {\n        removeAll();\n    }\n\n    public inline function removeAll():Void {\n        listeners = [];\n        lock = 0;\n    }\n    \n    inline function indexOf(listener:T):Int {\n        #if (neko || bindx_compareMethods)\n            var res = -1;\n            var i = 0;\n            for (l in listeners) {\n                if (Reflect.compareMethods(listener, l)) {\n                    res = i;\n                    break;\n                }\n                i++;\n            }\n            return res;\n        #else\n            return listeners.indexOf(listener);\n        #end\n    }\n\n    public function add(listener:T):Void {\n        var pos = indexOf(listener);\n        checkLock();\n        if (pos > -1) listeners.splice(pos, 1);\n        listeners.push(listener);\n    }\n\n    public function remove(listener:T):Void {\n        var pos = indexOf(listener);\n        if (pos > -1) {\n            checkLock();\n            listeners.splice(pos, 1);\n        }\n    }\n\n    inline function checkLock():Void {\n        if (lock > 0) {\n            listeners = listeners.copy();\n            lock = 0;\n        }\n    }\n}\n\nclass SignalTools {\n    static public inline var BIND_SIGNAL_META = \"BindSignal\";\n\n    static public inline var SIGNAL_POSTFIX = \"Changed\";\n    \n    static public function unbindAll(bindable:bindx.IBindable):Void {\n        var meta = haxe.rtti.Meta.getFields(std.Type.getClass(bindable));\n        if (meta != null) for (m in std.Reflect.fields(meta)) {\n            var data = std.Reflect.field(meta, m);\n            if (std.Reflect.hasField(data, BIND_SIGNAL_META)) {\n                var signal:bindx.BindSignal.Signal<Dynamic> = cast std.Reflect.field(bindable, m);\n                if (signal != null) {\n                    signal.removeAll();\n                    var args:Array<Dynamic> = std.Reflect.field(data, BIND_SIGNAL_META);\n                    var lazy:Bool = args[1];\n                    if (lazy) std.Reflect.setField(bindable, m, null);\n                }\n            }\n        }\n    }\n\n    static public function bindAll(bindable:bindx.IBindable, callback:String -> Dynamic -> Dynamic -> Void, force = true):Void -> Void {\n        var listeners = new Map<bindx.BindSignal.Signal<Dynamic>, Dynamic>();\n\n        var signals = getSignals(bindable, force);\n        for (name in signals.keys()) {\n            var signal = signals.get(name);\n            if (std.Std.is(signal, FieldSignal)) {\n                var listener = function (from:Dynamic, to:Dynamic) callback(name, from, to);\n                listeners.set(signal, listener);\n                signal.add(listener);\n            } else {\n                var listener = function () callback(name, null, null);\n                listeners.set(signal, listener);\n                signal.add(listener);\n            }\n        }\n\n        return function () {\n            for (signal in listeners.keys()) {\n                var listener = listeners.get(signal);\n                if (Std.is(signal, FieldSignal)) signal.remove(listener);\n                else signal.remove(listener);\n            }\n        }\n    }\n\n    static function getSignals(bindable:bindx.IBindable, force = true):Map<String, bindx.BindSignal.Signal<Dynamic>> {\n        var signals = new Map<String, bindx.BindSignal.Signal<Dynamic>>();\n        var meta = haxe.rtti.Meta.getFields(std.Type.getClass(bindable));\n        if (meta != null) for (m in std.Reflect.fields(meta)) {\n            var data = std.Reflect.field(meta, m);\n            if (std.Reflect.hasField(data, BIND_SIGNAL_META)) {\n                var args:Array<Dynamic> = std.Reflect.field(data, BIND_SIGNAL_META);\n                var signal:bindx.BindSignal.Signal<Dynamic> = cast std.Reflect.field(bindable, m);\n                if (signal == null && force) {\n                    var lazy:Bool = args[1];\n                    if (lazy) signal = cast std.Reflect.getProperty(bindable, m.substr(1));\n                }\n                if (signal != null) {\n                    var name = args[0];\n                    signals.set(name, signal);\n                }\n            }\n        }\n        return signals;\n    }\n}","/*\n * Copyright (C)2005-2013 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe;\n\n/**\n\tThe Timer class allows you to create asynchronous timers on platforms that\n\tsupport events.\n\n\tThe intended usage is to create an instance of the Timer class with a given\n\tinterval, set its run() method to a custom function to be invoked and\n\teventually call stop() to stop the Timer.\n\n\tNote that a running Timer may or may not prevent the program to exit\n\tautomatically when main() returns.\n\n\tIt is also possible to extend this class and override its run() method in\n\tthe child class.\n**/\nclass Timer {\n\t#if (flash || js || java || python)\n\n\t#if (flash || js)\n\t\tprivate var id : Null<Int>;\n\t#elseif java\n\t\tprivate var timer : java.util.Timer;\n\t\tprivate var task : java.util.TimerTask;\n\t#end\n\n\t/**\n\t\tCreates a new timer that will run every `time_ms` milliseconds.\n\n\t\tAfter creating the Timer instance, it calls `this].run` repeatedly,\n\t\twith delays of `time_ms` milliseconds, until `this.stop` is called.\n\n\t\tThe first invocation occurs after `time_ms` milliseconds, not\n\t\timmediately.\n\n\t\tThe accuracy of this may be platform-dependent.\n\t**/\n\tpublic function new( time_ms : Int ){\n\t\t#if flash\n\t\t\tvar me = this;\n\t\t\tid = untyped __global__[\"flash.utils.setInterval\"](function() { me.run(); },time_ms);\n\t\t#elseif js\n\t\t\tvar me = this;\n\t\t\tid = untyped setInterval(function() me.run(),time_ms);\n\t\t#elseif java\n\t\t\ttimer = new java.util.Timer();\n\t\t\ttimer.scheduleAtFixedRate(task = new TimerTask(this), haxe.Int64.ofInt(time_ms), haxe.Int64.ofInt(time_ms));\n\t\t#end\n\t}\n\n\t/**\n\t\tStops `this` Timer.\n\n\t\tAfter calling this method, no additional invocations of `this.run`\n\t\twill occur.\n\n\t\tIt is not possible to restart `this` Timer once stopped.\n\t**/\n\tpublic function stop() {\n\t\t#if (flash || js)\n\t\t\tif( id == null )\n\t\t\t\treturn;\n\t\t\t#if flash\n\t\t\t\tuntyped __global__[\"flash.utils.clearInterval\"](id);\n\t\t\t#elseif js\n\t\t\t\tuntyped clearInterval(id);\n\t\t\t#end\n\t\t\tid = null;\n\t\t#elseif java\n\t\t\ttimer.cancel();\n\t\t\ttimer = null;\n\t\t\ttask = null;\n\t\t#end\n\t}\n\n\t/**\n\t\tThis method is invoked repeatedly on `this` Timer.\n\n\t\tIt can be overridden in a subclass, or rebound directly to a custom\n\t\tfunction:\n\t\t\tvar timer = new haxe.Timer(1000); // 1000ms delay\n\t\t\ttimer.run = function() { ... }\n\n\t\tOnce bound, it can still be rebound to different functions until `this`\n\t\tTimer is stopped through a call to `this.stop`.\n\t**/\n\tpublic dynamic function run() {\n\n\t}\n\n\t/**\n\t\tInvokes `f` after `time_ms` milliseconds.\n\n\t\tThis is a convenience function for creating a new Timer instance with\n\t\t`time_ms` as argument, binding its run() method to `f` and then stopping\n\t\t`this` Timer upon the first invocation.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function delay( f : Void -> Void, time_ms : Int ) {\n\t\tvar t = new haxe.Timer(time_ms);\n\t\tt.run = function() {\n\t\t\tt.stop();\n\t\t\tf();\n\t\t};\n\t\treturn t;\n\t}\n\n\t#end\n\n\t/**\n\t\tMeasures the time it takes to execute `f`, in seconds with fractions.\n\n\t\tThis is a convenience function for calculating the difference between\n\t\tTimer.stamp() before and after the invocation of `f`.\n\n\t\tThe difference is passed as argument to Log.trace(), with \"s\" appended\n\t\tto denote the unit. The optional `pos` argument is passed through.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function measure<T>( f : Void -> T, ?pos : PosInfos ) : T {\n\t\tvar t0 = stamp();\n\t\tvar r = f();\n\t\tLog.trace((stamp() - t0) + \"s\", pos);\n\t\treturn r;\n\t}\n\n\t/**\n\t\tReturns a timestamp, in seconds with fractions.\n\n\t\tThe value itself might differ depending on platforms, only differences\n\t\tbetween two values make sense.\n\t**/\n\tpublic static function stamp() : Float {\n\t\t#if flash\n\t\t\treturn flash.Lib.getTimer() / 1000;\n\t\t#elseif (neko || php)\n\t\t\treturn Sys.time();\n\t\t#elseif js\n\t\t\treturn Date.now().getTime() / 1000;\n\t\t#elseif cpp\n\t\t\treturn untyped __global__.__time_stamp();\n\t\t#elseif sys\n\t\t\treturn Sys.time();\n\t\t#else\n\t\t\treturn 0;\n\t\t#end\n\t}\n\n}\n\n#if java\n@:nativeGen\nprivate class TimerTask extends java.util.TimerTask {\n\tvar timer:Timer;\n\tpublic function new(timer:Timer):Void {\n\t\tsuper();\n\t\tthis.timer = timer;\n\t}\n\n\t@:overload override public function run():Void {\n\t\ttimer.run();\n\t}\n}\n#end\n","/*\n * Copyright (C)2005-2013 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of h software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and h permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe.ds;\n\n@:coreApi\nclass ObjectMap<K:{ }, V> implements haxe.Constraints.IMap<K,V> {\n\n\tstatic var count = 0;\n\n\tstatic inline function assignId(obj: { } ):Int {\n\t\treturn untyped obj.__id__ = ++count;\n\t}\n\n\tstatic inline function getId(obj: { } ):Int {\n\t\treturn untyped obj.__id__;\n\t}\n\n\tvar h : { };\n\n\tpublic function new() : Void {\n\t\th = { };\n\t\tuntyped h.__keys__ = { };\n\t}\n\n\tpublic function set(key:K, value:V):Void untyped {\n\t\tvar id : Int = untyped key.__id__ || assignId(key);\n\t\th[id] = value;\n\t\th.__keys__[id] = key;\n\t}\n\n\tpublic inline function get(key:K):Null<V> {\n\t\treturn untyped h[getId(key)];\n\t}\n\n\tpublic inline function exists(key:K):Bool {\n\t\treturn untyped h.__keys__[getId(key)] != null;\n\t}\n\n\tpublic function remove( key : K ) : Bool {\n\t\tvar id = getId(key);\n\t\tif ( untyped h.__keys__[id] == null ) return false;\n\t\tuntyped  __js__(\"delete\")(h[id]);\n\t\tuntyped  __js__(\"delete\")(h.__keys__[id]);\n\t\treturn true;\n\t}\n\n\tpublic function keys() : Iterator<K> {\n\t\tvar a = [];\n\t\tuntyped {\n\t\t\t__js__(\"for( var key in this.h.__keys__ ) {\");\n\t\t\t\tif( h.hasOwnProperty(key) )\n\t\t\t\t\ta.push(h.__keys__[key]);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn a.iterator();\n\t}\n\n\tpublic function iterator() : Iterator<V> {\n\t\treturn untyped {\n\t\t\tref : h,\n\t\t\tit : keys(),\n\t\t\thasNext : function() { return __this__.it.hasNext(); },\n\t\t\tnext : function() { var i = __this__.it.next(); return __this__.ref[getId(i)]; }\n\t\t};\n\t}\n\n\tpublic function toString() : String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar it = keys();\n\t\tfor( i in it ) {\n\t\t\ts.add(Std.string(i));\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(i)));\n\t\t\tif( it.hasNext() )\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n}","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.ds;\n\nprivate class StringMapIterator<T> {\n\tvar map : StringMap<T>;\n\tvar keys : Array<String>;\n\tvar index : Int;\n\tvar count : Int;\n\tpublic inline function new(map:StringMap<T>, keys:Array<String>) {\n\t\tthis.map = map;\n\t\tthis.keys = keys;\n\t\tthis.index = 0;\n\t\tthis.count = keys.length;\n\t}\n\tpublic inline function hasNext() {\n\t\treturn index < count;\n\t}\n\tpublic inline function next() {\n\t\treturn map.get(keys[index++]);\n\t}\n}\n\n@:coreApi class StringMap<T> implements haxe.Constraints.IMap<String,T> {\n\n\tprivate var h : Dynamic;\n\tprivate var rh : Dynamic;\n\n\tpublic inline function new() : Void {\n\t\th = {};\n\t}\n\n\tinline function isReserved(key:String) : Bool {\n\t\treturn untyped __js__(\"__map_reserved\")[key] != null;\n\t}\n\n\tpublic inline function set( key : String, value : T ) : Void {\n\t\tif( isReserved(key) )\n\t\t\tsetReserved(key, value);\n\t\telse\n\t\t\th[cast key] = value;\n\t}\n\n\tpublic inline function get( key : String ) : Null<T> {\n\t\tif( isReserved(key) )\n\t\t\treturn getReserved(key);\n\t\treturn h[cast key];\n\t}\n\n\tpublic inline function exists( key : String ) : Bool {\n\t\tif( isReserved(key) )\n\t\t\treturn existsReserved(key);\n\t\treturn h.hasOwnProperty(key);\n\t}\n\n\tfunction setReserved( key : String, value : T ) : Void {\n\t\tif( rh == null ) rh = {};\n\t\trh[cast \"$\"+key] = value;\n\t}\n\n\tfunction getReserved( key : String ) : Null<T> {\n\t\treturn rh == null ? null : rh[cast \"$\"+key];\n\t}\n\n\tfunction existsReserved( key : String ) : Bool {\n\t\tif( rh == null ) return false;\n\t\treturn untyped rh.hasOwnProperty(\"$\"+key);\n\t}\n\n\tpublic function remove( key : String ) : Bool {\n\t\tif( isReserved(key) ) {\n\t\t\tkey = \"$\" + key;\n\t\t\tif( rh == null || !rh.hasOwnProperty(key) ) return false;\n\t\t\tuntyped __js__(\"delete\")(rh[key]);\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif( !h.hasOwnProperty(key) )\n\t\t\t\treturn false;\n\t\t\tuntyped __js__(\"delete\")(h[key]);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic function keys() : Iterator<String> {\n\t\treturn arrayKeys().iterator();\n\t}\n\t\n\tfunction arrayKeys() : Array<String> {\n\t\tvar out = [];\n\t\tuntyped {\n\t\t\t__js__(\"for( var key in this.h ) {\");\n\t\t\t\tif( h.hasOwnProperty(key) )\n\t\t\t\t\tout.push(key);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\tif( rh != null ) untyped {\n\t\t\t__js__(\"for( var key in this.rh ) {\");\n\t\t\t\tif( key.charCodeAt(0) == \"$\".code )\n\t\t\t\t\tout.push(key.substr(1));\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn out;\n\t}\n\n\tpublic inline function iterator() : Iterator<T> {\n\t\treturn new StringMapIterator(this, arrayKeys());\n\t}\n\n\tpublic function toString() : String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar keys = arrayKeys();\n\t\tfor( i in 0...keys.length ) {\n\t\t\tvar k = keys[i];\n\t\t\ts.add(k);\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(k)));\n\t\t\tif( i < keys.length )\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n\n\tstatic function __init__() : Void {\n\t\tuntyped __js__(\"var __map_reserved = {}\");\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.rtti;\n\n/**\n\tAn api to access classes and enums metadata at runtime.\n**/\nclass Meta {\n\n\t/**\n\t\tReturns the metadata that were declared for the given type (class or enum)\n\t**/\n\tpublic static function getType( t : Dynamic ) : Dynamic<Array<Dynamic>> {\n\t\tvar meta = getMeta(t);\n\t\treturn (meta == null || meta.obj == null) ? {} : meta.obj;\n\t}\n\n\tprivate static function getMeta(t:Dynamic):Dynamic\n\t{\n#if (java || cs)\n\t\tvar ret = Reflect.field(t, \"__meta__\");\n\t\tif (ret == null && Std.is(t,Class))\n\t\t{\n#if java\n\t\t\tvar interf = java.Lib.toNativeType(t).isInterface();\n#elseif cs\n\t\t\tvar interf = cs.Lib.toNativeType(t).IsInterface;\n#end\n\t\t\tif (interf)\n\t\t\t{\n\t\t\t\tvar name = Type.getClassName(t),\n\t\t\t\t    cls = Type.resolveClass(name + '_HxMeta');\n\t\t\t\tif (cls != null)\n\t\t\t\t\treturn Reflect.field(cls, \"__meta__\");\n\t\t\t}\n\t\t}\n\t\treturn ret;\n#else\n\t\treturn untyped t.__meta__;\n#end\n\t}\n\n\t/**\n\t\tReturns the metadata that were declared for the given class static fields\n\t**/\n\tpublic static function getStatics( t : Dynamic ) : Dynamic<Dynamic<Array<Dynamic>>> {\n\t\tvar meta = getMeta(t);\n\t\treturn (meta == null || meta.statics == null) ? {} : meta.statics;\n\t}\n\n\t/**\n\t\tReturns the metadata that were declared for the given class fields or enum constructors\n\t**/\n\tpublic static function getFields( t : Dynamic ) : Dynamic<Dynamic<Array<Dynamic>>> {\n\t\tvar meta = getMeta(t);\n\t\treturn (meta == null || meta.fields == null) ? {} : meta.fields;\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage js;\n\nprivate class HaxeError extends js.Error {\n\n\tvar val:Dynamic;\n\n\tpublic function new(val:Dynamic) untyped {\n\t\tsuper();\n\t\tthis.val = __define_feature__(\"js.Boot.HaxeError\", val);\n\t\tthis.message = String(val);\n\t\tif (js.Error.captureStackTrace) js.Error.captureStackTrace(this, HaxeError);\n\t}\n}\n\n@:dox(hide)\nclass Boot {\n\n\tprivate static function __unhtml(s : String) {\n\t\treturn s.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\n\t}\n\n\tprivate static function __trace(v,i : haxe.PosInfos) {\n\t\tuntyped {\n\t\t\tvar msg = if( i != null ) i.fileName+\":\"+i.lineNumber+\": \" else \"\";\n\t\t\t#if jsfl\n\t\t\tmsg += __string_rec(v,\"\");\n\t\t\tfl.trace(msg);\n\t\t\t#else\n\t\t\tmsg += __string_rec(v, \"\");\n\t\t\tif( i != null && i.customParams != null )\n\t\t\t\tfor( v in i.customParams )\n\t\t\t\t\tmsg += \",\" + __string_rec(v, \"\");\n\t\t\tvar d;\n\t\t\tif( __js__(\"typeof\")(document) != \"undefined\" && (d = document.getElementById(\"haxe:trace\")) != null )\n\t\t\t\td.innerHTML += __unhtml(msg)+\"<br/>\";\n\t\t\telse if( __js__(\"typeof console\") != \"undefined\" && __js__(\"console\").log != null )\n\t\t\t\t__js__(\"console\").log(msg);\n\t\t\t#end\n\t\t}\n\t}\n\n\tprivate static function __clear_trace() {\n\t\tuntyped {\n\t\t\t#if jsfl\n\t\t\tfl.outputPanel.clear();\n\t\t\t#else\n\t\t\tvar d = document.getElementById(\"haxe:trace\");\n\t\t\tif( d != null )\n\t\t\t\td.innerHTML = \"\";\n\t\t\t#end\n\t\t}\n\t}\n\n\tstatic inline function isClass(o:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isClass\", o.__name__);\n\t}\n\n\tstatic inline function isEnum(e:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isEnum\", e.__ename__);\n\t}\n\n\tstatic function getClass(o:Dynamic) : Dynamic {\n\t\tif (Std.is(o, Array))\n\t\t\treturn Array;\n\t\telse {\n\t\t\tvar cl = untyped __define_feature__(\"js.Boot.getClass\", o.__class__);\n\t\t\tif (cl != null)\n\t\t\t\treturn cl;\n\t\t\tvar name = __nativeClassName(o);\n\t\t\tif (name != null)\n\t\t\t\treturn __resolveNativeClass(name);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@:ifFeature(\"has_enum\")\n\tprivate static function __string_rec(o,s:String) {\n\t\tuntyped {\n\t\t\tif( o == null )\n\t\t\t    return \"null\";\n\t\t\tif( s.length >= 5 )\n\t\t\t\treturn \"<...>\"; // too much deep recursion\n\t\t\tvar t = __js__(\"typeof(o)\");\n\t\t\tif( t == \"function\" && (isClass(o) || isEnum(o)) )\n\t\t\t\tt = \"object\";\n\t\t\tswitch( t ) {\n\t\t\tcase \"object\":\n\t\t\t\tif( __js__(\"o instanceof Array\") ) {\n\t\t\t\t\tif( o.__enum__ ) {\n\t\t\t\t\t\tif( o.length == 2 )\n\t\t\t\t\t\t\treturn o[0];\n\t\t\t\t\t\tvar str = o[0]+\"(\";\n\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\tfor( i in 2...o.length ) {\n\t\t\t\t\t\t\tif( i != 2 )\n\t\t\t\t\t\t\t\tstr += \",\" + __string_rec(o[i],s);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstr += __string_rec(o[i],s);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tvar l = o.length;\n\t\t\t\t\tvar i;\n\t\t\t\t\tvar str = \"[\";\n\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\tfor( i in 0...l )\n\t\t\t\t\t\tstr += (if (i > 0) \",\" else \"\")+__string_rec(o[i],s);\n\t\t\t\t\tstr += \"]\";\n\t\t\t\t\treturn str;\n\t\t\t\t}\n\t\t\t\tvar tostr;\n\t\t\t\ttry {\n\t\t\t\t\ttostr = untyped o.toString;\n\t\t\t\t} catch( e : Dynamic ) {\n\t\t\t\t\t// strange error on IE\n\t\t\t\t\treturn \"???\";\n\t\t\t\t}\n\t\t\t\tif( tostr != null && tostr != __js__(\"Object.toString\") && __typeof__(tostr) == \"function\" ) {\n\t\t\t\t\tvar s2 = o.toString();\n\t\t\t\t\tif( s2 != \"[object Object]\")\n\t\t\t\t\t\treturn s2;\n\t\t\t\t}\n\t\t\t\tvar k : String = null;\n\t\t\t\tvar str = \"{\\n\";\n\t\t\t\ts += \"\\t\";\n\t\t\t\tvar hasp = (o.hasOwnProperty != null);\n\t\t\t\t__js__(\"for( var k in o ) {\");\n\t\t\t\t\tif( hasp && !o.hasOwnProperty(k) )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( k == \"prototype\" || k == \"__class__\" || k == \"__super__\" || k == \"__interfaces__\" || k == \"__properties__\" )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( str.length != 2 )\n\t\t\t\t\t\tstr += \", \\n\";\n\t\t\t\t\tstr += s + k + \" : \"+__string_rec(o[k],s);\n\t\t\t\t__js__(\"}\");\n\t\t\t\ts = s.substring(1);\n\t\t\t\tstr += \"\\n\" + s + \"}\";\n\t\t\t\treturn str;\n\t\t\tcase \"function\":\n\t\t\t\treturn \"<function>\";\n\t\t\tcase \"string\":\n\t\t\t\treturn o;\n\t\t\tdefault:\n\t\t\t\treturn String(o);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static function __interfLoop(cc : Dynamic,cl : Dynamic) {\n\t\tif( cc == null )\n\t\t\treturn false;\n\t\tif( cc == cl )\n\t\t\treturn true;\n\t\tvar intf : Dynamic = cc.__interfaces__;\n\t\tif( intf != null )\n\t\t\tfor( i in 0...intf.length ) {\n\t\t\t\tvar i : Dynamic = intf[i];\n\t\t\t\tif( i == cl || __interfLoop(i,cl) )\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\treturn __interfLoop(cc.__super__,cl);\n\t}\n\n\t@:ifFeature(\"typed_catch\") private static function __instanceof(o : Dynamic,cl : Dynamic) {\n\t\tif( cl == null )\n\t\t\treturn false;\n\t\tswitch( cl ) {\n\t\tcase Int:\n\t\t\treturn (untyped __js__(\"(o|0) === o\"));\n\t\tcase Float:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"number\";\n\t\tcase Bool:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"boolean\";\n\t\tcase String:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"string\";\n\t\tcase Array:\n\t\t\treturn (untyped __js__(\"(o instanceof Array)\")) && o.__enum__ == null;\n\t\tcase Dynamic:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tif( o != null ) {\n\t\t\t\t// Check if o is an instance of a Haxe class or a native JS object\n\t\t\t\tif( (untyped __js__(\"typeof\"))(cl) == \"function\" ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif( __interfLoop(getClass(o),cl) )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if ( (untyped __js__(\"typeof\"))(cl) == \"object\" && __isNativeObj(cl) ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// do not use isClass/isEnum here\n\t\t\tuntyped __feature__(\"Class.*\",if( cl == Class && o.__name__ != null ) return true);\n\t\t\tuntyped __feature__(\"Enum.*\",if( cl == Enum && o.__ename__ != null ) return true);\n\t\t\treturn o.__enum__ == cl;\n\t\t}\n\t}\n\n\t@:ifFeature(\"typed_cast\") private static function __cast(o : Dynamic, t : Dynamic) {\n\t\tif (__instanceof(o, t)) return o;\n\t\telse throw \"Cannot cast \" +Std.string(o) + \" to \" +Std.string(t);\n\t}\n\n\tstatic var __toStr = untyped __js__(\"{}.toString\");\n\t// get native JS [[Class]]\n\tstatic function __nativeClassName(o:Dynamic):String {\n\t\tvar name = untyped __toStr.call(o).slice(8, -1);\n\t\t// exclude general Object and Function\n\t\t// also exclude Math and JSON, because instanceof cannot be called on them\n\t\tif (name == \"Object\" || name == \"Function\" || name == \"Math\" || name == \"JSON\")\n\t\t\treturn null;\n\t\treturn name;\n\t}\n\n\t// check for usable native JS object\n\tstatic function __isNativeObj(o:Dynamic):Bool {\n\t\treturn __nativeClassName(o) != null;\n\t}\n\n\t// resolve native JS class in the global scope:\n\tstatic function __resolveNativeClass(name:String) untyped {\n\t\treturn untyped Function('return typeof $name != \"undefined\" ? $name : null')();\n\t}\n\n}\n","package minject;\n\nimport Map;\n\nclass ClassMap<V> implements IMap<Class<Dynamic>, V>\n{\n\tvar map:Map<String, V>;\n\n\tpublic function new()\n\t{\n\t\tmap = new Map();\n\t}\n\n\tpublic function get(k:Class<Dynamic>):Null<V>\n\t{\n\t\treturn map.get(getKey(k));\n\t}\n\n\tpublic function set(k:Class<Dynamic>, v:V):Void\n\t{\n\t\tmap.set(getKey(k), v);\n\t}\n\n\tpublic function exists(k:Class<Dynamic>):Bool\n\t{\n\t\treturn map.exists(getKey(k));\n\t}\n\n\tpublic function remove(k:Class<Dynamic>):Bool\n\t{\n\t\treturn map.remove(getKey(k));\n\t}\n\n\tpublic function keys():Iterator<Class<Dynamic>>\n\t{\n\t\treturn cast [for (k in map.keys()) Type.resolveClass(k)].iterator();\n\t}\n\n\tpublic function iterator():Iterator<V>\n\t{\n\t\treturn map.iterator();\n\t}\n\n\tpublic function toString()\n\t{\n\t\treturn map.toString();\n\t}\n\n\tinline function getKey(k:Class<Dynamic>)\n\t{\n\t\treturn Type.getClassName(k);\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject;\n\nimport minject.result.InjectionResult;\n\nclass InjectionConfig\n{\n\tpublic var request:Class<Dynamic>;\n\tpublic var injectionName:String;\n\n\tvar injector:Injector;\n\tvar result:InjectionResult;\n\t\n\tpublic function new(request:Class<Dynamic>, injectionName:String)\n\t{\n\t\tthis.request = request;\n\t\tthis.injectionName = injectionName;\n\t}\n\n\tpublic function getResponse(injector:Injector):Dynamic\n\t{\n\t\tif (this.injector != null) injector = this.injector;\n\n\t\tif (result != null) return result.getResponse(injector);\n\t\t\n\t\tvar parentConfig = injector.getAncestorMapping(request, injectionName);\n\t\tif (parentConfig != null) return parentConfig.getResponse(injector);\n\n\t\treturn null;\n\t}\n\n\tpublic function hasResponse(injector:Injector):Bool\n\t{\n\t\treturn (result != null);\n\t}\n\n\tpublic function hasOwnResponse():Bool\n\t{\n\t\treturn (result != null);\n\t}\n\n\tpublic function setResult(result:InjectionResult):Void\n\t{\n\t\t#if debug\n\t\tif (this.result != null && result != null)\n\t\t{\n\t\t\ttrace('Warning: Injector contains ${this.toString()}.\\nAttempting to overwrite this ' +\n\t\t\t\t'with mapping for [${result.toString()}].\\nIf you have overwritten this mapping ' +\n\t\t\t\t'intentionally you can use `injector.unmap()` prior to your replacement mapping ' +\n\t\t\t\t'in order to avoid seeing this message.');\n\t\t}\n\t\t#end\n\t\tthis.result = result;\n\t}\n\n\tpublic function setInjector(injector:Injector):Void\n\t{\n\t\tthis.injector = injector;\n\t}\n\n\tpublic function toString():String\n\t{\n\t\tvar named = injectionName != null && injectionName != \"\" ? ' named \"$injectionName\" and' : \"\";\n\t\treturn 'rule: [' + Type.getClassName(request) + ']$named mapped to [$result]';\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject;\n\nimport haxe.rtti.Meta;\nimport haxe.ds.WeakMap;\nimport haxe.ds.ObjectMap;\nimport minject.point.ConstructorInjectionPoint;\nimport minject.point.InjectionPoint;\nimport minject.point.MethodInjectionPoint;\nimport minject.point.NoParamsConstructorInjectionPoint;\nimport minject.point.PostConstructInjectionPoint;\nimport minject.point.PropertyInjectionPoint;\nimport minject.result.InjectClassResult;\nimport minject.result.InjectOtherRuleResult;\nimport minject.result.InjectSingletonResult;\nimport minject.result.InjectValueResult;\n\n/**\n\tThe dependency injector.\n**/\n#if !macro @:build(minject.Macro.addMetadata()) #end class Injector\n{\n\t/**\n\t\tA set of instances that have already had their dependencies satisfied by the injector.\n\t**/\n\tpublic var attendedToInjectees(default, null):InjecteeSet;\n\n\t/**\n\t\tThe parent of this injector.\n\t**/\n\tpublic var parentInjector(default, set):Injector;\n\n\tvar injectionConfigs:Map<String, InjectionConfig>;\n\tvar injecteeDescriptions:ClassMap<InjecteeDescription>;\n\t\n\tpublic function new()\n\t{\n\t\tinjectionConfigs = new Map();\n\t\tinjecteeDescriptions = new ClassMap();\n\t\tattendedToInjectees = new InjecteeSet();\n\t}\n\t\n\t/**\n\t\tWhen asked for an instance of the class `whenAskedFor` inject the instance `useValue`.\n\t\t\n\t\tThis is used to register an existing instance with the injector and treat it like a \n\t\tSingleton.\n\t\t\n\t\t@param whenAskedFor A class or interface\n\t\t@param useValue An instance\n\t\t@param named An optional name (id)\n\t\t\n\t\t@returns A reference to the rule for this injection. To be used with `mapRule`\n\t**/\n\tpublic function mapValue(whenAskedFor:Class<Dynamic>, useValue:Dynamic, ?named:String = \"\"):Dynamic\n\t{\n\t\tvar config = getMapping(whenAskedFor, named);\n\t\tconfig.setResult(new InjectValueResult(useValue));\n\t\treturn config;\n\t}\n\t\n\t/**\n\t\tWhen asked for an instance of the class `whenAskedFor` inject a new instance of \n\t\t`instantiateClass`.\n\t\t\n\t\tThis will create a new instance for each injection.\n\t\t\n\t\t@param whenAskedFor A class or interface\n\t\t@param instantiateClass A class to instantiate\n\t\t@param named An optional name (id)\n\n\t\t@returns A reference to the rule for this injection. To be used with `mapRule`\n\t**/\n\tpublic function mapClass(whenAskedFor:Class<Dynamic>, instantiateClass:Class<Dynamic>, ?named:String=\"\"):Dynamic\n\t{\n\t\tvar config = getMapping(whenAskedFor, named);\n\t\tconfig.setResult(new InjectClassResult(instantiateClass));\n\t\treturn config;\n\t}\n\t\n\t/**\n\t\tWhen asked for an instance of the class `whenAskedFor` inject an instance of `whenAskedFor`.\n\t\t\n\t\tThis will create an instance on the first injection, but will re-use that instance for \n\t\tsubsequent injections.\n\t\t\n\t\t@param whenAskedFor A class or interface\n\t\t@param named An optional name (id)\n\t\t\n\t\t@returns A reference to the rule for this injection. To be used with `mapRule`\n\t**/\n\tpublic function mapSingleton(whenAskedFor:Class<Dynamic>, ?named:String=\"\") :Dynamic\n\t{\n\t\treturn mapSingletonOf(whenAskedFor, whenAskedFor, named);\n\t}\n\t\n\t/**\n\t\tWhen asked for an instance of the class `whenAskedFor`\n\t\tinject an instance of `useSingletonOf`.\n\t\t\n\t\tThis will create an instance on the first injection, but will re-use that instance for \n\t\tsubsequent injections.\n\t\t\n\t\t@param whenAskedFor A class or interface\n\t\t@param useSingletonOf A class to instantiate\n\t\t@param named An optional name (id)\n\t\t\n\t\t@returns A reference to the rule for this injection. To be used with `mapRule`\n\t**/\n\tpublic function mapSingletonOf(whenAskedFor:Class<Dynamic>, useSingletonOf:Class<Dynamic>, ?named:String=\"\"):Dynamic\n\t{\n\t\tvar config = getMapping(whenAskedFor, named);\n\t\tconfig.setResult(new InjectSingletonResult(useSingletonOf));\n\t\treturn config;\n\t}\n\t\n\t/**\n\t\tWhen asked for an instance of the class `whenAskedFor`\n\t\tuse rule `useRule` to determine the correct injection.\n\t\t\n\t\tThis will use whatever injection is set by the given injection rule as created using one \n\t\tof the other mapping methods.\n\t\t\n\t\t@param whenAskedFor A class or interface\n\t\t@param useRule The rule to use for the injection\n\t\t@param named An optional name (id)\n\t\t\n\t\t@returns A reference to the rule for this injection. To be used with `mapRule`\n\t**/\n\tpublic function mapRule(whenAskedFor:Class<Dynamic>, useRule:Dynamic, ?named:String = \"\"):Dynamic\n\t{\n\t\tvar config = getMapping(whenAskedFor, named);\n\t\tconfig.setResult(new InjectOtherRuleResult(useRule));\n\t\treturn useRule;\n\t}\n\t\n\tpublic function getMapping(forClass:Class<Dynamic>, ?named:String=\"\"):InjectionConfig\n\t{\n\t\tvar requestName = getClassName(forClass) + \"#\" + named;\n\t\t\n\t\tif (injectionConfigs.exists(requestName))\n\t\t{\n\t\t\treturn injectionConfigs.get(requestName);\n\t\t}\n\t\t\n\t\tvar config = new InjectionConfig(forClass, named);\n\t\tinjectionConfigs.set(requestName, config);\n\t\treturn config;\n\t}\n\t\n\t/**\n\t\tPerform an injection into an object, satisfying all it's dependencies\n\t\t\n\t\tThe `Injector` should throw an `Error` if it can't satisfy all dependencies of the injectee.\n\t\t\n\t\t@param target The object to inject into - the Injectee\n\t**/\n\tpublic function injectInto(target:Dynamic):Void\n\t{\n\t\tif (attendedToInjectees.contains(target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tattendedToInjectees.add(target);\n\n\t\t// get injection points or cache them if this target's class wasn't encountered before\n\t\tvar targetClass = Type.getClass(target);\n\n\t\tvar injecteeDescription:InjecteeDescription = null;\n\n\t\tif (injecteeDescriptions.exists(targetClass))\n\t\t{\n\t\t\tinjecteeDescription = injecteeDescriptions.get(targetClass);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinjecteeDescription = getInjectionPoints(targetClass);\n\t\t}\n\n\t\tif (injecteeDescription == null) return;\n\n\t\tvar injectionPoints:Array<Dynamic> = injecteeDescription.injectionPoints;\n\t\tvar length:Int = injectionPoints.length;\n\n\t\tfor (i in 0...length)\n\t\t{\n\t\t\tvar injectionPoint:InjectionPoint = injectionPoints[i];\n\t\t\tinjectionPoint.applyInjection(target, this);\n\t\t}\n\t}\n\t\n\t/**\n\t\tConstructs an instance of theClass without satifying its dependencies.\n\t**/\n\tpublic function construct<T>(theClass:Class<T>):T\n\t{\n\t\tvar injecteeDescription:InjecteeDescription;\n\n\t\tif (injecteeDescriptions.exists(theClass))\n\t\t{\n\t\t\tinjecteeDescription = injecteeDescriptions.get(theClass);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinjecteeDescription = getInjectionPoints(theClass);\n\t\t}\n\n\t\tvar injectionPoint:InjectionPoint = injecteeDescription.ctor;\n\t\treturn injectionPoint.applyInjection(theClass, this);\n\t}\n\n\t/**\n\t\tCreate an object of the given class, supplying its dependencies as constructor parameters \n\t\tif the used DI solution has support for constructor injection\n\t\t\n\t\tAdapters for DI solutions that don't support constructor injection should just create a new \n\t\tinstance and perform setter and/or method injection on that.\n\t\t\n\t\tNOTE: This method will always create a new instance. If you need to retrieve an instance \n\t\tconsider using `getInstance`\n\t\t\n\t\tThe `Injector` should throw an `Error` if it can't satisfy all dependencies of the injectee.\n\t\t\n\t\t@param theClass The class to instantiate\n\t\t@returns The created instance\n\t**/\n\tpublic function instantiate<T>(theClass:Class<T>):T\n\t{\n\t\tvar instance = construct(theClass);\n\t\tinjectInto(instance);\n\t\treturn instance;\n\t}\n\t\n\t/**\n\t\tRemove a rule from the injector\n\n\t\t@param theClass A class or interface\n\t\t@param named An optional name (id)\n\t**/\n\tpublic function unmap(theClass:Class<Dynamic>, ?named:String=\"\"):Void\n\t{\n\t\tvar mapping = getConfigurationForRequest(theClass, named);\n\t\t\n\t\tif (mapping == null)\n\t\t{\n\t\t\tthrow 'Error while removing an injector mapping: No mapping defined for class ' + getClassName(theClass) + ', named \"' + named + '\"';\n\t\t}\n\n\t\tmapping.setResult(null);\n\t}\n\n\t/**\n\t\tDoes a rule exist to satsify such a request?\n\n\t\t@param forClass A class or interface\n\t\t@param named An optional name (id)\n\t\t@returns Whether such a mapping exists\n\t**/\n\tpublic function hasMapping(forClass:Class<Dynamic>, ?named:String = ''):Bool\n\t{\n\t\tvar mapping = getConfigurationForRequest(forClass, named);\n\t\t\n\t\tif (mapping == null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn mapping.hasResponse(this);\n\t}\n\n\t/**\n\t\tCreate or retrieve an instance of the given class\n\t\t\n\t\t@param ofClass The class to retrieve.\n\t\t@param named An optional name (id)\n\t\t@return An instance\n\t**/\n\tpublic function getInstance<T>(ofClass:Class<T>, ?named:String=\"\"):T\n\t{\n\t\tvar mapping = getConfigurationForRequest(ofClass, named);\n\t\t\n\t\tif (mapping == null || !mapping.hasResponse(this))\n\t\t{\n\t\t\tthrow 'Error while getting mapping response: No mapping defined for class ' + getClassName(ofClass) + ', named \"' + named + '\"';\n\t\t}\n\n\t\treturn mapping.getResponse(this);\n\t}\n\t\n\t/**\n\t\tCreate an injector that inherits rules from its parent\n\t\t\n\t\t@returns The injector \n\t**/\n\tpublic function createChildInjector():Injector\n\t{\n\t\tvar injector = new Injector();\n\t\tinjector.parentInjector = this;\n\t\treturn injector;\n\t}\n\n\t/**\n\t\tSearches for an injection mapping in the ancestry of the injector. This method is called \n\t\twhen a dependency cannot be satisfied by this injector.\n\t**/\n\tpublic function getAncestorMapping(forClass:Class<Dynamic>, named:String=null):InjectionConfig\n\t{\n\t\tvar parent = parentInjector;\n\n\t\twhile (parent != null)\n\t\t{\n\t\t\tvar parentConfig = parent.getConfigurationForRequest(forClass, named, false);\n\n\t\t\tif (parentConfig != null && parentConfig.hasOwnResponse())\n\t\t\t{\n\t\t\t\treturn parentConfig;\n\t\t\t}\n\n\t\t\tparent = parent.parentInjector;\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\n\tfunction getInjectionPoints(forClass:Class<Dynamic>):InjecteeDescription\n\t{\n\t\tvar typeMeta = Meta.getType(forClass);\n\n\t\t#if debug\n\t\tif (typeMeta != null && Reflect.hasField(typeMeta, \"interface\"))\n\t\t\tthrow \"Interfaces can't be used as instantiatable classes.\";\n\t\t#end\n\n\t\tvar fieldsMeta = getFields(forClass);\n\n\t\tvar ctorInjectionPoint:InjectionPoint = null;\n\t\tvar injectionPoints:Array<InjectionPoint> = [];\n\t\tvar postConstructMethodPoints:Array<Dynamic> = [];\n\t\t\n\t\tfor (field in Reflect.fields(fieldsMeta))\n\t\t{\n\t\t\tvar fieldMeta:Dynamic = Reflect.field(fieldsMeta, field);\n\t\t\t// fieldMeta.name = field;\n\n\t\t\tvar inject = Reflect.hasField(fieldMeta, \"inject\");\n\t\t\tvar post = Reflect.hasField(fieldMeta, \"post\");\n\t\t\tvar type = Reflect.field(fieldMeta, \"type\");\n\t\t\tvar args = Reflect.field(fieldMeta, \"args\");\n\t\t\t\n\t\t\tif (field == \"_\") // constructor\n\t\t\t{\n\t\t\t\tif (args.length > 0)\n\t\t\t\t{\n\t\t\t\t\tctorInjectionPoint = new ConstructorInjectionPoint(fieldMeta.args);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Reflect.hasField(fieldMeta, \"args\")) // method\n\t\t\t{\n\t\t\t\tif (inject) // injection\n\t\t\t\t{\n\t\t\t\t\tvar point = new MethodInjectionPoint(field, fieldMeta.args);\n\t\t\t\t\tinjectionPoints.push(point);\n\t\t\t\t}\n\t\t\t\telse if (post) // post construction\n\t\t\t\t{\n\t\t\t\t\tvar order = fieldMeta.post == null ? 0 : fieldMeta.post[0];\n\t\t\t\t\tvar point = new PostConstructInjectionPoint(field, order);\n\t\t\t\t\tpostConstructMethodPoints.push(point);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type != null) // property\n\t\t\t{\n\t\t\t\tvar name = fieldMeta.inject == null ? null : fieldMeta.inject[0];\n\t\t\t\tvar point = new PropertyInjectionPoint(field, fieldMeta.type[0], name);\n\t\t\t\tinjectionPoints.push(point);\n\t\t\t}\n\t\t}\n\n\t\tif (postConstructMethodPoints.length > 0)\n\t\t{\n\t\t\tpostConstructMethodPoints.sort(function(a, b) { return a.order - b.order; });\n\t\t\tfor (point in postConstructMethodPoints) injectionPoints.push(point);\n\t\t}\n\n\t\tif (ctorInjectionPoint == null)\n\t\t\tctorInjectionPoint = new NoParamsConstructorInjectionPoint();\n\n\t\tvar injecteeDescription = new InjecteeDescription(ctorInjectionPoint, injectionPoints);\n\t\tinjecteeDescriptions.set(forClass, injecteeDescription);\n\t\treturn injecteeDescription;\n\t}\n\n\tfunction getConfigurationForRequest(forClass:Class<Dynamic>, named:String, ?traverseAncestors:Bool=true):InjectionConfig\n\t{\n\t\tvar requestName = getClassName(forClass) + '#' + named;\n\t\t\n\t\tif (!injectionConfigs.exists(requestName))\n\t\t{\n\t\t\tif (traverseAncestors && parentInjector != null \n\t\t\t\t&& parentInjector.hasMapping(forClass, named))\n\t\t\t\t\treturn getAncestorMapping(forClass, named);\n\t\t\treturn null;\n\t\t}\n\n\t\treturn injectionConfigs.get(requestName);\n\t}\n\n\tfunction set_parentInjector(value:Injector):Injector\n\t{\n\t\t// restore own map of worked injectees if parent injector is removed\n\t\tif (parentInjector != null && value == null) attendedToInjectees = new InjecteeSet();\n\n\t\tparentInjector = value;\n\n\t\t// use parent's map of worked injectees\n\t\tif (parentInjector != null) attendedToInjectees = parentInjector.attendedToInjectees;\n\n\t\treturn parentInjector;\n\t}\n\n\tfunction getClassName(forClass:Class<Dynamic>):String\n\t{\n\t\tif (forClass == null) return \"Dynamic\";\n\t\telse return Type.getClassName(forClass);\n\t}\n\n\tfunction getFields(type:Class<Dynamic>)\n\t{\n\t\tvar meta = {};\n\t\twhile (type != null)\n\t\t{\n\t\t\tvar typeMeta = haxe.rtti.Meta.getFields(type);\n\t\t\tfor (field in Reflect.fields(typeMeta))\n\t\t\t\tReflect.setField(meta, field, Reflect.field(typeMeta, field));\n\t\t\ttype = Type.getSuperClass(type);\n\t\t}\n\t\treturn meta;\n\t}\n}\n\n/**\n\tContains the set of objects which have been injected into.\n\t \n\tUnder dynamic languages that don't support weak references this set a \n\thidden property on an injectee when added, to mark it as injected. This is \n\tto avoid storing a direct reference of it here, causing it never to be \n\tavailable for GC.\n**/\nclass InjecteeSet\n{\n\t#if (flash9 || java || php)\n\tvar map:WeakMap<{}, Bool>;\n\t#elseif cpp\n\tvar map:ObjectMap<{}, Bool>;\n\t#end\n\n\tpublic function new()\n\t{\n\t\t#if (flash9 || java || php)\n\t\tmap = new WeakMap<{}, Bool>();\n\t\t#elseif cpp\n\t\tmap = new ObjectMap<{}, Bool>();\n\t\t#end\n\t}\n\n\tpublic function add(value:Dynamic)\n\t{\n\t\t#if (flash9 || cpp || java || php)\n\t\tmap.set(value, true);\n\t\t#else\n\t\tvalue.__injected__ = true;\n\t\t#end\n\t}\n\n\tpublic function contains(value:Dynamic)\n\t{\n\t\t#if (flash9 || cpp || java || php)\n\t\treturn map.exists(value);\n\t\t#else\n\t\treturn value.__injected__ == true;\n\t\t#end\n\t}\n\n\tpublic function remove(value:Dynamic)\n\t{\n\t\t#if (flash9 || cpp || java || php)\n\t\tmap.remove(value);\n\t\t#else\n\t\tReflect.deleteField(value, \"__injected__\");\n\t\t#end\n\t}\n\n\t// deprecated\n\tinline public function delete(value:Dynamic) remove(value);\n\n\t/**\n\t\tUnder dynamic targets that don't support weak refs (js, avm1, neko) this will always \n\t\treturn an empty iterator due to values not being stored in this set. This is to avoid \n\t\tmemory leaks.\n\t**/\n\tpublic function iterator()\n\t{\n\t\t#if (flash9 || cpp || java || php)\n\t\treturn map.iterator();\n\t\t#else\n\t\treturn [].iterator();\n\t\t#end\n\t}\n}\n\nclass InjecteeDescription\n{\n\tpublic var ctor:InjectionPoint;\n\tpublic var injectionPoints:Array<InjectionPoint>;\n \n\tpublic function new(ctor:InjectionPoint, injectionPoints:Array<InjectionPoint>)\n\t{\n\t\tthis.ctor = ctor;\n\t\tthis.injectionPoints = injectionPoints;\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.point;\n\nimport minject.Injector;\n\nclass MethodInjectionPoint implements InjectionPoint\n{\n\tpublic var name(default, null):String;\n\tpublic var args(default, null):Array<ArgInjectionInfo>;\n\t\n\tpublic function new(name:String, args:Array<ArgInjectionInfo>)\n\t{\n\t\tthis.name = name;\n\t\tthis.args = args;\n\n\t\t#if debug\n\t\tfor (arg in args)\n\t\t\tif (arg.type == \"Dynamic\")\n\t\t\t\tthrow 'Error in method definition of injectee. Required parameters can\\'t have non class type.';\n\t\t#end\n\t}\n\t\n\tpublic function applyInjection(target:Dynamic, injector:Injector):Dynamic\n\t{\n\t\tReflect.callMethod(target, Reflect.field(target, name), gatherArgs(target, injector));\n\t\treturn target;\n\t}\n\t\n\tfunction gatherArgs(target:Dynamic, injector:Injector):Array<Dynamic>\n\t{\n\t\tvar values = [];\n\n\t\tfor (arg in args)\n\t\t{\n\t\t\tvar name = arg.name == null ? \"\" : arg.name;\n\t\t\tvar config = injector.getMapping(Type.resolveClass(arg.type), arg.name);\n\t\t\tvar injection = config.getResponse(injector);\n\n\t\t\t#if debug\n\t\t\tif (injection == null && !arg.opt)\n\t\t\t{\n\t\t\t\tvar targetName = Type.getClassName(Type.getClass(target));\n\t\t\t\tvar requestName = Type.getClassName(config.request);\n\t\t\t\tthrow 'Injector is missing a rule to handle injection into target $targetName. ' +\n\t\t\t\t\t'Target dependency: $requestName, method: $name, named: ' + arg.name;\n\t\t\t}\n\t\t\t#end\n\t\t\tvalues.push(injection);\n\t\t}\n\n\t\treturn values;\n\t}\n}\n\ntypedef ArgInjectionInfo = {\n\tvar opt:Bool;\n\tvar type:String;\n\t@:optional var name:String;\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.point;\n\nimport minject.Injector;\nimport minject.point.MethodInjectionPoint;\n\nclass ConstructorInjectionPoint extends MethodInjectionPoint\n{\n\tpublic function new(args:Array<ArgInjectionInfo>)\n\t{\n\t\tsuper('new', args);\n\t}\n\t\n\toverride public function applyInjection(target:Dynamic, injector:Injector):Dynamic\n\t{\n\t\treturn Type.createInstance(target, gatherArgs(target, injector));\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.point;\n\nimport minject.Injector;\n\nclass NoParamsConstructorInjectionPoint implements InjectionPoint\n{\n\tpublic function new() {}\n\t\n\tpublic function applyInjection(target:Dynamic, injector:Injector):Dynamic\n\t{\n\t\treturn Type.createInstance(target, []);\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.point;\n\nimport minject.Injector;\n\nclass PostConstructInjectionPoint implements InjectionPoint\n{\n\tpublic var name(default, null):String;\n\tpublic var order(default, null):Int;\n\t\n\tpublic function new(name:String, ?order:Int=0)\n\t{\n\t\tthis.name = name;\n\t\tthis.order = order;\n\t}\n\t\n\tpublic function applyInjection(target:Dynamic, injector:Injector):Dynamic\n\t{\n\t\tReflect.callMethod(target, Reflect.field(target, name), []);\n\t\treturn target;\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.point;\n\nimport minject.Injector;\n\nclass PropertyInjectionPoint implements InjectionPoint\n{\n\tvar name:String;\n\tvar type:String;\n\tvar injectionName:String;\n\n\tpublic function new(name:String, type:String, ?injectionName:String=null)\n\t{\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.injectionName = injectionName;\n\t}\n\n\tpublic function applyInjection(target:Dynamic, injector:Injector):Dynamic\n\t{\n\t\tvar injectionConfig = injector.getMapping(Type.resolveClass(type), injectionName);\n\t\tvar injection = injectionConfig.getResponse(injector);\n\t\t#if debug\n\t\tif (injection == null)\n\t\t\tthrow 'Injector is missing a rule to handle injection into property \"$name\" ' +\n\t\t\t\t'of object \"$target\". Target dependency: \"$type\", named \"$injectionName\"';\n\t\t#end\n\t\tReflect.setProperty(target, name, injection);\n\t\treturn target;\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.result;\n\nimport minject.Injector;\n\nclass InjectionResult\n {\n\tpublic function new() {}\n\n\tpublic function getResponse(injector:Injector):Dynamic\n\t{\n\t\treturn null;\n\t}\n\n\tpublic function toString():String\n\t{\n\t\treturn \"\";\n\t}\n}\n","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.result;\n\nimport minject.Injector;\n\nclass InjectValueResult extends InjectionResult\n{\n\tvar value:Dynamic;\n\t\n\tpublic function new(value:Dynamic)\n\t{\n\t\tsuper();\n\t\tthis.value = value;\n\t}\n\t\n\toverride public function getResponse(injector:Injector):Dynamic\n\t{\n\t\treturn value;\n\t}\n\n\toverride public function toString():String\n\t{\n\t\treturn \"instance of \" + Type.getClassName(Type.getClass(value));\n\t}\n}\n","﻿package motion.actuators;\r\n\r\n\r\nimport motion.easing.IEasing;\r\nimport motion.Actuate;\r\n\r\n@:keepSub\r\n\r\n\r\nclass GenericActuator<T> implements IGenericActuator {\r\n\t\r\n\t\r\n\tprivate var duration:Float;\r\n\tprivate var id:String;\r\n\tprivate var properties:Dynamic;\r\n\tprivate var target:T;\r\n\tprivate var _autoVisible:Bool;\r\n\tprivate var _delay:Float;\r\n\tprivate var _ease:IEasing;\r\n\tprivate var _onComplete:Dynamic;\r\n\tprivate var _onCompleteParams:Array <Dynamic>;\r\n\tprivate var _onRepeat:Dynamic;\r\n\tprivate var _onRepeatParams:Array <Dynamic>;\r\n\tprivate var _onUpdate:Dynamic;\r\n\tprivate var _onUpdateParams:Array <Dynamic>;\r\n\tprivate var _onResume:Dynamic;\r\n\tprivate var _onResumeParams:Array <Dynamic>;\r\n\tprivate var _onPause:Dynamic;\r\n\tprivate var _onPauseParams:Array <Dynamic>;\r\n\tprivate var _reflect:Bool;\r\n\tprivate var _repeat:Int;\r\n\tprivate var _reverse:Bool;\r\n\tprivate var _smartRotation:Bool;\r\n\tprivate var _snapping:Bool;\r\n\tprivate var special:Bool;\r\n\t\r\n\t\r\n\tpublic function new (target:T, duration:Float, properties:Dynamic) {\r\n\t\t\r\n\t\t_autoVisible = true;\r\n\t\t_delay = 0;\r\n\t\t_reflect = false;\r\n\t\t_repeat = 0;\r\n\t\t_reverse = false;\r\n\t\t_smartRotation = false;\r\n\t\t_snapping = false;\r\n\t\tspecial = false;\r\n\t\t\r\n\t\tthis.target = target;\r\n\t\tthis.properties = properties;\r\n\t\tthis.duration = duration;\r\n\t\t\r\n\t\t_ease = Actuate.defaultEase;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function apply ():Void {\r\n\t\t\r\n\t\tfor (i in Reflect.fields (properties)) {\r\n\t\t\t\r\n\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\t\r\n\t\t\tif (#if flash false && #end Reflect.hasField (target, i)) {\r\n\t\t\t\t\r\n\t\t\t\tReflect.setField (target, i, Reflect.field (properties, i));\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tReflect.setProperty (target, i, Reflect.field (properties, i));\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t#else\r\n\t\t\t\r\n\t\t\tReflect.setField (target, i, Reflect.field (properties, i));\r\n\t\t\t\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Flash performs faster when objects are set to visible = false rather than only alpha = 0. autoVisible toggles automatically based on alpha values\r\n\t * @param\tvalue\t\tWhether autoVisible should be enabled (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function autoVisible (?value:Null<Bool>):GenericActuator<T> {\r\n\t\t\r\n\t\tif (value == null) {\r\n\t\t\t\r\n\t\t\tvalue = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t_autoVisible = value;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate inline function callMethod (method:Dynamic, params:Array<Dynamic> = null):Dynamic {\r\n\t\t\r\n\t\tif (params == null) {\r\n\t\t\t\r\n\t\t\tparams = [];\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t#if neko\r\n\t\t\r\n\t\tvar diff = untyped ($nargs)(method) - params.length;\r\n\t\t\r\n\t\tif (diff > 0) {\r\n\t\t\t\r\n\t\t\tparams = params.copy ();\r\n\t\t\t\r\n\t\t\tfor (i in 0...diff) {\r\n\t\t\t\t\r\n\t\t\t\tparams.push (null);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t#end\r\n\t\t\r\n\t\treturn Reflect.callMethod (method, method, params);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function change ():Void {\r\n\t\t\r\n\t\tif (_onUpdate != null) {\r\n\t\t\t\r\n\t\t\tcallMethod (_onUpdate, _onUpdateParams);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function complete (sendEvent:Bool = true):Void {\r\n\t\t\r\n\t\tif (sendEvent) {\r\n\t\t\t\r\n\t\t\tchange ();\r\n\t\t\t\r\n\t\t\tif (_onComplete != null) {\r\n\t\t\t\t\r\n\t\t\t\tcallMethod (_onComplete, _onCompleteParams);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tActuate.unload (this);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Increases the delay before a tween is executed\r\n\t * @param\tduration\t\tThe amount of seconds to delay\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function delay (duration:Float):GenericActuator<T> {\r\n\t\t\r\n\t\t_delay = duration;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Sets the easing which is used when running the tween\r\n\t * @param\teasing\t\tAn easing equation, like Elastic.easeIn or Quad.easeOut\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function ease (easing:IEasing):GenericActuator<T> {\r\n\t\t\r\n\t\t_ease = easing;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function move ():Void {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween finishes\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onComplete (handler:Dynamic, parameters:Array <Dynamic> = null):GenericActuator<T> {\r\n\t\t\r\n\t\t_onComplete = handler;\r\n\t\t\r\n\t\tif (parameters == null) {\r\n\t\t\t\r\n\t\t\t_onCompleteParams = [];\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_onCompleteParams = parameters;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (duration == 0) {\r\n\t\t\t\r\n\t\t\tcomplete ();\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween repeats\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onRepeat (handler:Dynamic, parameters:Array <Dynamic> = null):GenericActuator<T> {\r\n\t\t\r\n\t\t_onRepeat = handler;\r\n\t\t\r\n\t\tif (parameters == null) {\r\n\t\t\t\r\n\t\t\t_onRepeatParams = [];\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_onRepeatParams = parameters;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween updates\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onUpdate (handler:Dynamic, parameters:Array <Dynamic> = null):GenericActuator<T> {\r\n\t\t\r\n\t\t_onUpdate = handler;\r\n\t\t\r\n\t\tif (parameters == null) {\r\n\t\t\t\r\n\t\t\t_onUpdateParams = [];\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_onUpdateParams = parameters;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween is paused\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onPause (handler:Dynamic, parameters:Array <Dynamic> = null):GenericActuator<T> {\r\n\t\t\r\n\t\t_onPause = handler;\r\n\t\t\r\n\t\tif (parameters == null) {\r\n\t\t\t\r\n\t\t\t_onPauseParams = [];\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_onPauseParams = parameters;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween resumed after pause\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onResume (handler:Dynamic, parameters:Array <Dynamic> = null):GenericActuator<T> {\r\n\t\t\r\n\t\t_onResume = handler;\r\n\t\t\r\n\t\tif (parameters == null) {\r\n\t\t\t\r\n\t\t\t_onResumeParams = [];\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_onResumeParams = parameters;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function pause ():Void {\r\n\t\t\r\n\t\tif (_onPause != null)\r\n\t\t\tcallMethod(_onPause, _onPauseParams);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Automatically changes the reverse value when the tween repeats. Repeat must be enabled for this to have any effect\r\n\t * @param\tvalue\t\tWhether reflect should be enabled (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function reflect (?value:Null<Bool>):GenericActuator<T> {\r\n\t\t\r\n\t\tif (value == null) {\r\n\t\t\t\r\n\t\t\tvalue = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t_reflect = value;\r\n\t\tspecial = true;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Repeats the tween after it finishes\r\n\t * @param\ttimes\t\tThe number of times you would like the tween to repeat, or -1 if you would like to repeat the tween indefinitely (Default is -1)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function repeat (?times:Null<Int>):GenericActuator<T> {\r\n\t\t\r\n\t\tif (times == null) {\r\n\t\t\t\r\n\t\t\ttimes = -1;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t_repeat = times;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function resume ():Void {\r\n\t\t\r\n\t\tif (_onResume != null)\r\n\t\t\tcallMethod(_onResume, _onResumeParams);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Sets if the tween should be handled in reverse\r\n\t * @param\tvalue\t\tWhether the tween should be reversed (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function reverse (?value:Null<Bool>):GenericActuator<T> {\r\n\t\t\r\n\t\tif (value == null) {\r\n\t\t\t\r\n\t\t\tvalue = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t_reverse = value;\r\n\t\tspecial = true;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Enabling smartRotation can prevent undesired results when tweening rotation values\r\n\t * @param\tvalue\t\tWhether smart rotation should be enabled (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function smartRotation (?value:Null<Bool>):GenericActuator<T> {\r\n\t\t\r\n\t\tif (value == null) {\r\n\t\t\t\r\n\t\t\tvalue = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t_smartRotation = value;\r\n\t\tspecial = true;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Snapping causes tween values to be rounded automatically\r\n\t * @param\tvalue\t\tWhether tween values should be rounded (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function snapping (?value:Null<Bool>):GenericActuator<T> {\r\n\t\t\r\n\t\tif (value == null) {\r\n\t\t\t\r\n\t\t\tvalue = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t_snapping = value;\r\n\t\tspecial = true;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function stop (properties:Dynamic, complete:Bool, sendEvent:Bool):Void {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}","﻿package motion.actuators;\r\n\r\n\r\nimport motion.actuators.GenericActuator;\r\n#if (flash || nme || openfl)\r\nimport flash.display.DisplayObject;\r\nimport flash.events.Event;\r\nimport flash.Lib;\r\n#elseif lime\r\nimport lime.app.Application;\r\nimport lime.system.System;\r\n#else\r\n#if neko\r\nimport haxe.Log;\r\nimport haxe.PosInfos;\r\n#end\r\nimport haxe.Timer;\r\n#end\r\n\r\n\r\nclass SimpleActuator<T, U> extends GenericActuator<T> {\r\n\t\r\n\t\r\n\t#if actuate_manual_time\r\n\tpublic static var getTime:Void->Float;\r\n\t#end\r\n\t\r\n\tprivate var timeOffset:Float;\r\n\t\r\n\tprivate static var actuators = new Array<SimpleActuator<Dynamic, Dynamic>> ();\r\n\tprivate static var actuatorsLength = 0;\r\n\tprivate static var addedEvent = false;\r\n\t\r\n\t#if (!flash && !nme && !openfl && !lime)\r\n\tprivate static var timer:Timer;\r\n\t#end\r\n\t\r\n\tprivate var active:Bool;\r\n\tprivate var cacheVisible:Bool;\r\n\tprivate var detailsLength:Int;\r\n\tprivate var initialized:Bool;\r\n\tprivate var paused:Bool;\r\n\tprivate var pauseTime:Float;\r\n\tprivate var propertyDetails:Array <PropertyDetails<U>>;\r\n\tprivate var sendChange:Bool;\r\n\tprivate var setVisible:Bool;\r\n\tprivate var startTime:Float;\r\n\tprivate var toggleVisible:Bool;\r\n\t\r\n\t\r\n\tpublic function new (target:T, duration:Float, properties:Dynamic) {\r\n\t\t\r\n\t\tactive = true;\r\n\t\tpropertyDetails = new Array ();\r\n\t\tsendChange = false;\r\n\t\tpaused = false;\r\n\t\tcacheVisible = false;\r\n\t\tinitialized = false;\r\n\t\tsetVisible = false;\r\n\t\ttoggleVisible = false;\r\n\t\t\r\n\t\t#if !actuate_manual_time\r\n\t\t\t#if (flash || nme || openfl)\r\n\t\t\tstartTime = Lib.getTimer () / 1000;\r\n\t\t\t#elseif lime\r\n\t\t\tstartTime = System.getTimer () / 1000;\r\n\t\t\t#else\r\n\t\t\tstartTime = Timer.stamp ();\r\n\t\t\t#end\r\n\t\t#else\r\n\t\tstartTime = getTime();\r\n\t\t#end\r\n\t\t\r\n\t\tsuper (target, duration, properties);\r\n\t\t\r\n\t\tif (!addedEvent) {\r\n\t\t\t\r\n\t\t\taddedEvent = true;\r\n\t\t\t#if !actuate_manual_update\r\n\t\t\t\t#if (flash || nme || openfl)\r\n\t\t\t\tLib.current.stage.addEventListener (Event.ENTER_FRAME, stage_onEnterFrame);\r\n\t\t\t\t#elseif lime\r\n\t\t\t\tApplication.current.onUpdate.add (stage_onEnterFrame);\r\n\t\t\t\t#else\r\n\t\t\t\ttimer = new Timer (Std.int(1000 / 30));\r\n\t\t\t\ttimer.run = stage_onEnterFrame;\r\n\t\t\t\t#end\r\n\t\t\t#end\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic override function autoVisible (?value:Null<Bool>):GenericActuator<T> {\r\n\t\t\r\n\t\tif (value == null) {\r\n\t\t\t\r\n\t\t\tvalue = true;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t_autoVisible = value;\r\n\t\t\r\n\t\tif (!value) {\r\n\t\t\t\r\n\t\t\ttoggleVisible = false;\r\n\t\t\t\r\n\t\t\tif (setVisible) {\r\n\t\t\t\t\r\n\t\t\t\tsetField (target, \"visible\", cacheVisible);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic override function delay (duration:Float):GenericActuator<T> {\r\n\t\t\r\n\t\t_delay = duration;\r\n\t\ttimeOffset = startTime + duration;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate inline function getField<V> (target:V, propertyName:String):Dynamic {\r\n\t\t\r\n\t\t#if (haxe_209 || haxe3)\r\n\t\t\r\n\t\tvar value = null;\r\n\t\t\r\n\t\tif (Reflect.hasField (target, propertyName)) {\r\n\t\t\t\r\n\t\t\t#if flash\r\n\t\t\tvalue = untyped target[propertyName];\r\n\t\t\t#else\r\n\t\t\tvalue = Reflect.field (target, propertyName);\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tvalue = Reflect.getProperty (target, propertyName);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn value;\r\n\t\t\r\n\t\t#else\r\n\t\t\r\n\t\treturn Reflect.field (target, propertyName);\r\n\t\t\r\n\t\t#end\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function initialize ():Void {\r\n\t\t\r\n\t\tvar details:PropertyDetails<U>;\r\n\t\tvar start:Dynamic;\r\n\t\t\r\n\t\tfor (i in Reflect.fields (properties)) {\r\n\t\t\t\r\n\t\t\tvar isField = true;\r\n\t\t\t\r\n\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\t\r\n\t\t\tif (Reflect.hasField (target, i) #if flash && !untyped (target).hasOwnProperty (\"set_\" + i) #elseif html5 && !(untyped (target).__properties__ && untyped (target).__properties__[\"set_\" + i]) #end) {\r\n\t\t\t\t\r\n\t\t\t\tstart = Reflect.field (target, i);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tisField = false;\r\n\t\t\t\tstart = Reflect.getProperty (target, i);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t#else\r\n\t\t\t\r\n\t\t\tstart = Reflect.field (target, i);\r\n\t\t\t\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t\tif (Std.is (start, Float)) {\r\n\t\t\t\t\r\n\t\t\t\tvar value:Dynamic = getField (properties, i);\r\n\t\t\t\t\r\n\t\t\t\t#if (neko || js)\r\n\t\t\t\tif (start == null) start = 0;\r\n\t\t\t\tif (value == null) value = 0;\r\n\t\t\t\t#end\r\n\t\t\t\t\r\n\t\t\t\tdetails = new PropertyDetails (cast target, i, start, value - start, isField);\r\n\t\t\t\tpropertyDetails.push (details);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tdetailsLength = propertyDetails.length;\r\n\t\tinitialized = true;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function move ():Void {\r\n\t\t\r\n\t\t#if (flash || nme || openfl)\r\n\t\ttoggleVisible = (Reflect.hasField (properties, \"alpha\") && Std.is (target, DisplayObject));\r\n\t\t#else\r\n\t\ttoggleVisible = (Reflect.hasField (properties, \"alpha\") && Reflect.hasField (properties, \"visible\"));\r\n\t\t#end\r\n\t\t\r\n\t\tif (toggleVisible && properties.alpha != 0 && !getField (target, \"visible\")) {\r\n\t\t\t\r\n\t\t\tsetVisible = true;\r\n\t\t\tcacheVisible = getField (target, \"visible\");\r\n\t\t\tsetField (target, \"visible\", true);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\ttimeOffset = startTime;\r\n\t\tactuators.push (this);\r\n\t\t++actuatorsLength;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * @inheritDoc\r\n\t */\r\n\tpublic override function onUpdate (handler:Dynamic, parameters:Array <Dynamic> = null):GenericActuator<T> {\r\n\t\t\r\n\t\t_onUpdate = handler;\r\n\t\t\r\n\t\tif (parameters == null) {\r\n\t\t\t\r\n\t\t\t_onUpdateParams = [];\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t_onUpdateParams = parameters;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tsendChange = true;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function pause ():Void {\r\n\t\t\r\n\t\tif (!paused)\r\n\t\t{\r\n\t\t\tpaused = true;\r\n\t\t\r\n\t\t\tsuper.pause();\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t#if !actuate_manual_time\r\n\t\t\t\t#if (flash || nme || openfl)\r\n\t\t\t\tpauseTime = Lib.getTimer ();\r\n\t\t\t\t#elseif lime\r\n\t\t\t\tpauseTime = System.getTimer ();\r\n\t\t\t\t#else\r\n\t\t\t\tpauseTime = Timer.stamp ();\r\n\t\t\t\t#end\r\n\t\t\t#else\r\n\t\t\tpauseTime = getTime();\r\n\t\t\t#end\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function resume ():Void {\r\n\t\t\r\n\t\tif (paused) {\r\n\t\t\t\r\n\t\t\tpaused = false;\r\n\t\t\t\r\n\t\t\t#if !actuate_manual_time\r\n\t\t\t\t#if (flash || nme || openfl)\r\n\t\t\t\ttimeOffset += (Lib.getTimer () - pauseTime) / 1000;\r\n\t\t\t\t#elseif lime\r\n\t\t\t\ttimeOffset += (System.getTimer () - pauseTime) / 1000;\r\n\t\t\t\t#else\r\n\t\t\t\ttimeOffset += (Timer.stamp () - pauseTime);\r\n\t\t\t\t#end\r\n\t\t\t#else\r\n\t\t\ttimeOffset += (getTime() - pauseTime) / 1000;\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t\tsuper.resume();\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t@:generic private inline function setField<V> (target:V, propertyName:String, value:Dynamic):Void {\r\n\t\t\r\n\t\tif (Reflect.hasField (target, propertyName)) {\r\n\t\t\t\r\n\t\t\t#if flash\r\n\t\t\tuntyped target[propertyName] = value;\r\n\t\t\t#else\r\n\t\t\tReflect.setField (target, propertyName, value);\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\tReflect.setProperty (target, propertyName, value);\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate inline function setProperty (details:PropertyDetails<U>, value:Dynamic):Void {\r\n\t\t\r\n\t\tif (details.isField) {\r\n\t\t\t\r\n\t\t\t#if flash\r\n\t\t\tuntyped details.target[details.propertyName] = value;\r\n\t\t\t#else\r\n\t\t\tReflect.setField (details.target, details.propertyName, value);\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\tReflect.setProperty (details.target, details.propertyName, value);\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function stop (properties:Dynamic, complete:Bool, sendEvent:Bool):Void {\r\n\t\t\r\n\t\tif (active) {\r\n\t\t\t\r\n\t\t\tif (properties == null) {\r\n\t\t\t\t\r\n\t\t\t\tactive = false;\r\n\t\t\t\t\r\n\t\t\t\tif (complete) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tapply ();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.complete (sendEvent);\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (i in Reflect.fields (properties)) {\r\n\t\t\t\t\r\n\t\t\t\tif (Reflect.hasField (this.properties, i)) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tactive = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (complete) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tapply ();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.complete (sendEvent);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function update (currentTime:Float):Void {\r\n\t\t\r\n\t\tif (!paused) {\r\n\t\t\t\r\n\t\t\tvar details:PropertyDetails<U>;\r\n\t\t\tvar easing:Float;\r\n\t\t\tvar i:Int;\r\n\t\t\t\r\n\t\t\tvar tweenPosition:Float = (currentTime - timeOffset) / duration;\r\n\t\t\t\r\n\t\t\tif (tweenPosition > 1) {\r\n\t\t\t\t\r\n\t\t\t\ttweenPosition = 1;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!initialized) {\r\n\t\t\t\t\r\n\t\t\t\tinitialize ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!special) {\r\n\t\t\t\t\r\n\t\t\t\teasing = _ease.calculate (tweenPosition);\r\n\t\t\t\t\r\n\t\t\t\tfor (i in 0...detailsLength) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tdetails = propertyDetails[i];\r\n\t\t\t\t\tsetProperty (details, details.start + (details.change * easing));\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tif (!_reverse) {\r\n\t\t\t\t\t\r\n\t\t\t\t\teasing = _ease.calculate (tweenPosition);\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\teasing = _ease.calculate (1 - tweenPosition);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar endValue:Float;\r\n\t\t\t\t\r\n\t\t\t\tfor (i in 0...detailsLength) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tdetails = propertyDetails[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (_smartRotation && (details.propertyName == \"rotation\" || details.propertyName == \"rotationX\" || details.propertyName == \"rotationY\" || details.propertyName == \"rotationZ\")) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar rotation:Float = details.change % 360;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (rotation > 180) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trotation -= 360;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else if (rotation < -180) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\trotation += 360;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tendValue = details.start + rotation * easing;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tendValue = details.start + (details.change * easing);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!_snapping) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetProperty (details, endValue);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetProperty (details, Math.round (endValue));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (tweenPosition == 1) {\r\n\t\t\t\t\r\n\t\t\t\tif (_repeat == 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tactive = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (toggleVisible && getField (target, \"alpha\") == 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetField (target, \"visible\", false);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcomplete (true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (_onRepeat != null) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcallMethod (_onRepeat, _onRepeatParams);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (_reflect) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t_reverse = !_reverse;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tstartTime = currentTime;\r\n\t\t\t\t\ttimeOffset = startTime + _delay;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (_repeat > 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t_repeat --;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (sendChange) {\r\n\t\t\t\t\r\n\t\t\t\tchange ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t// Event Handlers\r\n\t\r\n\t\r\n\t#if actuate_manual_update \r\n\tpublic \r\n\t#else \r\n\tprivate \r\n\t#end\r\n\tstatic function stage_onEnterFrame (#if (flash || nme || openfl) event:Event #elseif lime deltaTime:Int #end):Void {\r\n\t\t\r\n\t\t#if !actuate_manual_time\r\n\t\t\t#if (flash || nme || openfl)\r\n\t\t\tvar currentTime:Float = Lib.getTimer () / 1000;\r\n\t\t\t#elseif lime\r\n\t\t\tvar currentTime = System.getTimer () / 1000;\r\n\t\t\t#else\r\n\t\t\tvar currentTime = Timer.stamp ();\r\n\t\t\t#end\r\n\t\t#else\r\n\t\t\tvar currentTime = getTime();\r\n\t\t#end\r\n\t\t\r\n\t\tvar actuator:SimpleActuator<Dynamic, Dynamic>;\r\n\t\t\r\n\t\tvar j:Int = 0;\r\n\t\tvar cleanup = false;\r\n\t\t\r\n\t\tfor (i in 0...actuatorsLength) {\r\n\t\t\t\r\n\t\t\tactuator = actuators[j];\r\n\t\t\t\r\n\t\t\tif (actuator != null && actuator.active) {\r\n\t\t\t\t\r\n\t\t\t\tif (currentTime >= actuator.timeOffset) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tactuator.update (currentTime);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tj++;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tactuators.splice (j, 1);\r\n\t\t\t\t--actuatorsLength;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\n#if (!nme && neko || !nme && cpp)\r\n\r\n// Custom haxe.Timer implementation for C++ and Neko\r\n\r\ntypedef TimerList = Array <Timer>;\r\n\r\n\r\nclass Timer {\r\n\t\r\n\t\r\n\tstatic var sRunningTimers:TimerList = [];\r\n\t\r\n\tvar mTime:Float;\r\n\tvar mFireAt:Float;\r\n\tvar mRunning:Bool;\r\n\t\r\n\t\r\n\tpublic function new (time:Float) {\r\n\t\t\r\n\t\tmTime = time;\r\n\t\tsRunningTimers.push (this);\r\n\t\tmFireAt = GetMS () + mTime;\r\n\t\tmRunning = true;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic static function measure<T>( f : Void -> T, ?pos : haxe.PosInfos ) : T {\r\n\t\tvar t0 = stamp();\r\n\t\tvar r = f();\r\n\t\thaxe.Log.trace((stamp() - t0) + \"s\", pos);\r\n\t\treturn r;\r\n\t}\r\n\t\r\n\t\r\n\t// Set this with \"run=...\"\r\n\tdynamic public function run () {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n   \r\n\t\r\n\tpublic function stop ():Void {\r\n\t\t\r\n\t\tif (mRunning) {\r\n\t\t\t\r\n\t\t\tmRunning = false;\r\n\t\t\tsRunningTimers.remove (this);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tstatic function GetMS ():Float {\r\n\t\t\r\n\t\treturn stamp () * 1000.0;\r\n\t\t\r\n\t}\r\n\t\r\n\r\n   // From std/haxe/Timer.hx\r\n\tpublic static function delay (f:Void -> Void, time:Int) {\r\n\t\t\r\n\t\tvar t = new Timer (time);\r\n\t\t\r\n\t\tt.run = function () {\r\n\t\t\tt.stop ();\r\n\t\t\tf ();\r\n\t\t};\r\n\t\t\r\n\t\treturn t;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tstatic public function stamp ():Float {\r\n\t\t\r\n\t\treturn Date.now().getTime ();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\n#end\r\n","﻿/**\r\n * @author Joshua Granick\r\n * @author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html\r\n */\r\n\r\n\r\npackage motion.easing;\r\n\r\n\r\n\r\nclass Expo {\r\n\t\r\n\t\r\n\tstatic public var easeIn (get_easeIn, never):IEasing;\r\n\tstatic public var easeInOut (get_easeInOut, never):IEasing;\r\n\tstatic public var easeOut (get_easeOut, never):IEasing;\r\n\t\r\n\t\r\n\tprivate static function get_easeIn ():IEasing {\r\n\t\t\r\n\t\treturn new ExpoEaseIn ();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate static function get_easeInOut ():IEasing {\r\n\t\t\r\n\t\treturn new ExpoEaseInOut ();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate static function get_easeOut ():IEasing {\r\n\t\t\r\n\t\treturn new ExpoEaseOut ();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\nclass ExpoEaseIn implements IEasing {\r\n\t\r\n\t\r\n\tpublic function new () {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function calculate (k:Float):Float {\r\n\t\t\r\n\t\treturn k == 0 ? 0 : Math.pow(2, 10 * (k - 1));\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function ease (t:Float, b:Float, c:Float, d:Float):Float {\r\n\t\t\r\n\t\treturn t == 0 ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\nclass ExpoEaseInOut implements IEasing {\r\n\t\r\n\t\r\n\tpublic function new () {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function calculate (k:Float):Float {\r\n\t\t\r\n\t\tif (k == 0) { return 0; }\r\n\t\tif (k == 1) { return 1; }\r\n\t\tif ((k /= 1 / 2.0) < 1.0) {\r\n\t\t\treturn 0.5 * Math.pow(2, 10 * (k - 1));\r\n\t\t}\r\n\t\treturn 0.5 * (2 - Math.pow(2, -10 * --k));\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function ease (t:Float, b:Float, c:Float, d:Float):Float {\r\n\t\t\r\n\t\tif (t == 0) {\r\n\t\t\treturn b;\r\n\t\t}\r\n\t\tif (t == d) {\r\n\t\t\treturn b + c;\r\n\t\t}\r\n\t\tif ((t /= d / 2.0) < 1.0) {\r\n\t\t\treturn c / 2 * Math.pow(2, 10 * (t - 1)) + b;\r\n\t\t}\r\n\t\treturn c / 2 * (2 - Math.pow(2, -10 * --t)) + b;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\nclass ExpoEaseOut implements IEasing {\r\n\t\r\n\t\r\n\tpublic function new () {\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function calculate (k:Float):Float {\r\n\t\t\r\n\t\treturn k == 1 ? 1 : (1 - Math.pow(2, -10 * k));\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function ease (t:Float, b:Float, c:Float, d:Float):Float {\r\n\t\t\r\n\t\treturn t == d ? b + c : c * (1 - Math.pow(2, -10 * t / d)) + b;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}","﻿package motion;\r\n\r\n\r\nimport haxe.ds.ObjectMap;\r\nimport motion.actuators.FilterActuator;\r\nimport motion.actuators.GenericActuator;\r\nimport motion.actuators.IGenericActuator;\r\nimport motion.actuators.MethodActuator;\r\nimport motion.actuators.MotionPathActuator;\r\nimport motion.actuators.SimpleActuator;\r\nimport motion.actuators.TransformActuator;\r\nimport motion.easing.Expo;\r\nimport motion.easing.IEasing;\r\n#if (flash || nme || openfl)\r\nimport flash.display.DisplayObject;\r\n#end\r\n\r\n@:access(motion.actuators)\r\n\r\n\r\nclass Actuate {\r\n\t\r\n\t\r\n\tpublic static var defaultActuator:Class<IGenericActuator> = SimpleActuator;\r\n\tpublic static var defaultEase:IEasing = Expo.easeOut;\r\n\tprivate static var targetLibraries = new ObjectMap<Dynamic, Array<IGenericActuator>> ();\r\n\t#if neko\r\n\tprivate static var methodLibraries = new FunctionMap<Dynamic, Array<IGenericActuator>> ();\r\n\t#end\r\n\t\r\n\t\r\n\t/**\r\n\t * Copies properties from one object to another. Conflicting tweens are stopped automatically\r\n\t * @example\t\t<code>Actuate.apply (MyClip, { alpha: 1 } );</code>\r\n\t * @param\ttarget\t\tThe object to copy to\r\n\t * @param\tproperties\t\tThe object to copy from\r\n\t * @param\tcustomActuator\t\tA custom actuator to use instead of the default (Optional)\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like onComplete or onUpdate handlers\r\n\t */\r\n\t/*@:generic*/ public static function apply<T> (target:T, properties:Dynamic, customActuator:Class<GenericActuator<T>> = null):GenericActuator<T> {\r\n\t\t\r\n\t\tstop (target, properties);\r\n\t\t\r\n\t\tif (customActuator == null) {\r\n\t\t\t\r\n\t\t\tcustomActuator = cast defaultActuator;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tvar actuator:GenericActuator<T> = Type.createInstance (customActuator, [ target, 0, properties ]);\r\n\t\tactuator.apply ();\r\n\t\t\r\n\t\treturn actuator;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t#if (flash || nme || openfl)\r\n\t\r\n\t/**\r\n\t * Creates a new effects tween \r\n\t * @param\ttarget\t\tThe object to tween\r\n\t * @param\tduration\t\tThe length of the tween in seconds\r\n\t * @param\toverwrite\t\tSets whether previous tweens for the same target and properties will be overwritten (Default is true)\r\n\t * @return\t\tAn EffectsOptions instance, which is used to select the kind of effect you would like to apply to the target\r\n\t */\r\n\tpublic static function effects (target:DisplayObject, duration:Float, overwrite:Bool = true):EffectsOptions {\r\n\t\t\r\n\t\treturn new EffectsOptions (target, duration, overwrite);\r\n\t\t\r\n\t}\r\n\t\r\n\t#end\r\n\t\r\n\t\r\n\tprivate static function getLibrary<T> (target:T, allowCreation:Bool = true):Array<IGenericActuator> {\r\n\t\t\r\n\t\t#if neko\r\n\t\t\r\n\t\tif (Reflect.isFunction (target)) {\r\n\t\t\t\r\n\t\t\tif (!methodLibraries.exists (target) && allowCreation) {\r\n\t\t\t\t\r\n\t\t\t\tmethodLibraries.set (target, new Array<IGenericActuator> ());\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn methodLibraries.get (target);\r\n\t\t\t\r\n\t\t}\r\n\t\t\t\r\n\t\t#end\r\n\t\t\r\n\t\tif (!targetLibraries.exists (target) && allowCreation) {\r\n\t\t\t\r\n\t\t\ttargetLibraries.set (target, new Array<IGenericActuator> ());\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn targetLibraries.get (target);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Checks if Actuate has any active tweens \r\n\t * @return\t\tWhether Actuate is active\r\n\t */\r\n\tpublic static function isActive ():Bool {\r\n\t\t\r\n\t\tvar result = false;\r\n\t\t\r\n\t\tfor (library in targetLibraries) {\r\n\t\t\t\r\n\t\t\tresult = true;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn result;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Creates a new MotionPath tween\r\n\t * @param\ttarget\t\tThe object to tween\r\n\t * @param\tduration\t\tThe length of the tween in seconds\r\n\t * @param\tproperties\t\tAn object containing a motion path for each property you wish to tween\r\n\t * @param\toverwrite\t\tSets whether previous tweens for the same target and properties will be overwritten (Default is true)\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like ease, delay, onComplete or onUpdate\r\n\t */\r\n\t/*@:generic*/ public static function motionPath<T> (target:T, duration:Float, properties:Dynamic, overwrite:Bool = true):GenericActuator<T> {\r\n\t\t\r\n\t\treturn tween (target, duration, properties, overwrite, MotionPathActuator);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Pauses tweens for the specified target objects\r\n\t * @param\t... targets\t\tThe target objects which will have their tweens paused. Passing no value pauses tweens for all objects\r\n\t */\r\n\t///*@:generic*/ public static function pause (... targets:Array):void {\r\n\t/*@:generic*/ public static function pause<T> (target:T):Void {\r\n\t\t\r\n\t\tif (Std.is (target, IGenericActuator)) {\r\n\t\t\t\r\n\t\t\tvar actuator:IGenericActuator = cast target;\r\n\t\t\tactuator.pause ();\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tvar library = getLibrary (target, false);\r\n\t\t\t\r\n\t\t\tif (library != null) {\r\n\t\t\t\t\r\n\t\t\t\tfor (actuator in library) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tactuator.pause ();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic static function pauseAll ():Void {\r\n\t\t\r\n\t\t#if neko\r\n\t\t\r\n\t\tfor (library in methodLibraries) {\r\n\t\t\t\r\n\t\t\tfor (actuator in library) {\r\n\t\t\t\t\r\n\t\t\t\tactuator.pause ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t#end\r\n\t\t\r\n\t\tfor (library in targetLibraries) {\r\n\t\t\t\r\n\t\t\tfor (actuator in library) {\r\n\t\t\t\t\r\n\t\t\t\tactuator.pause ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Resets Actuate by stopping and removing tweens for all objects\r\n\t */\r\n\tpublic static function reset ():Void {\r\n\t\t\r\n\t\t#if neko\r\n\t\t\r\n\t\tfor (library in methodLibraries) {\r\n\t\t\t\r\n\t\t\tvar i = library.length - 1;\r\n\t\t\t\r\n\t\t\twhile (i >= 0) {\r\n\t\t\t\t\r\n\t\t\t\tlibrary[i].stop (null, false, false);\r\n\t\t\t\ti--;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tmethodLibraries = new FunctionMap<Dynamic, Array<IGenericActuator>> ();\r\n\t\t\r\n\t\t#end\r\n\t\t\r\n\t\tfor (library in targetLibraries) {\r\n\t\t\t\r\n\t\t\tvar i = library.length - 1;\r\n\t\t\t\r\n\t\t\twhile (i >= 0) {\r\n\t\t\t\t\r\n\t\t\t\tlibrary[i].stop (null, false, false);\r\n\t\t\t\ti--;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\ttargetLibraries = new ObjectMap<Dynamic, Array<IGenericActuator>> ();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Resumes paused tweens for the specified target objects\r\n\t * @param\t... targets\t\tThe target objects which will have their tweens resumed. Passing no value resumes tweens for all objects\r\n\t */\r\n\t/*@:generic*/ public static function resume<T> (target:T):Void {\r\n\t\t\r\n\t\tif (Std.is (target, IGenericActuator)) {\r\n\t\t\t\r\n\t\t\tvar actuator:IGenericActuator = cast target;\r\n\t\t\tactuator.resume ();\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tvar library = getLibrary (target, false);\r\n\t\t\t\r\n\t\t\tif (library != null) {\r\n\t\t\t\t\r\n\t\t\t\tfor (actuator in library) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tactuator.resume ();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic static function resumeAll ():Void {\r\n\t\t\r\n\t\t#if neko\r\n\t\t\r\n\t\tfor (library in methodLibraries) {\r\n\t\t\t\r\n\t\t\tfor (actuator in library) {\r\n\t\t\t\t\r\n\t\t\t\tactuator.resume ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t#end\r\n\t\t\r\n\t\tfor (library in targetLibraries) {\r\n\t\t\t\r\n\t\t\tfor (actuator in library) {\r\n\t\t\t\t\r\n\t\t\t\tactuator.resume ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Stops all tweens for an individual object\r\n\t * @param\ttarget\t\tThe target object which will have its tweens stopped, or a generic actuator instance\r\n\t * @param\tproperties\t\tA string, array or object which contains the properties you wish to stop, like \"alpha\", [ \"x\", \"y\" ] or { alpha: null }. Passing no value removes all tweens for the object (Optional)\r\n\t * @param\tcomplete\t\tIf tweens should apply their final target values before stopping. Default is false (Optional) \r\n\t * @param\tsendEvent\tIf a complete() event should be dispatched for the specified target. Default is true (Optional)\r\n\t */\r\n\t/*@:generic*/ public static function stop<T> (target:T, properties:Dynamic = null, complete:Bool = false, sendEvent:Bool = true):Void {\r\n\t\t\r\n\t\tif (target != null) {\r\n\t\t\t\r\n\t\t\tif (Std.is (target, IGenericActuator)) {\r\n\t\t\t\t\r\n\t\t\t\tvar actuator:IGenericActuator = cast target;\r\n\t\t\t\tactuator.stop (null, complete, sendEvent);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tvar library = getLibrary (target, false);\r\n\t\t\t\t\r\n\t\t\t\tif (library != null) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (Std.is (properties, String)) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar temp = { };\r\n\t\t\t\t\t\tReflect.setField (temp, properties, null);\r\n\t\t\t\t\t\tproperties = temp;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if (Std.is (properties, Array)) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar temp = {};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (property in cast (properties, Array <Dynamic>)) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tReflect.setField (temp, property, null);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tproperties = temp;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar i = library.length - 1;\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (i >= 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlibrary[i].stop (properties, complete, sendEvent);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Creates a tween-based timer, which is useful for synchronizing function calls with other animations\r\n\t * @example\t\t<code>Actuate.timer (1).onComplete (trace, [ \"Timer is now complete\" ]);</code>\r\n\t * @param\tduration\t\tThe length of the timer in seconds\r\n\t * @param\tcustomActuator\t\tA custom actuator to use instead of the default (Optional)\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like onComplete or to gain a reference to the target timer object\r\n\t */\r\n\tpublic static function timer (duration:Float, customActuator:Class<GenericActuator<TweenTimer>> = null):GenericActuator<TweenTimer> {\r\n\t\t\r\n\t\treturn cast tween (new TweenTimer (0), duration, new TweenTimer (1), false, cast customActuator);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t#if (flash || nme || openfl)\r\n\t\r\n\t/**\r\n\t * Creates a new transform tween\r\n\t * @example\t\t<code>Actuate.transform (MyClip, 1).color (0xFF0000);</code>\r\n\t * @param\ttarget\t\tThe object to tween\r\n\t * @param\tduration\t\tThe length of the tween in seconds\r\n\t * @param\toverwrite\t\tSets whether previous tweens for the same target and properties will be overwritten (Default is true)\r\n\t * @return\t\tA TransformOptions instance, which is used to select the kind of transform you would like to apply to the target\r\n\t */\r\n\t/*@:generic*/ public static function transform<T> (target:T, duration:Float = 0, overwrite:Bool = true):TransformOptions<T> {\r\n\t\t\r\n\t\treturn new TransformOptions (target, duration, overwrite);\r\n\t\t\r\n\t}\r\n\t\r\n\t#end\r\n\t\r\n\t\r\n\t/**\r\n\t * Creates a new tween\r\n\t * @example\t\t<code>Actuate.tween (MyClip, 1, { alpha: 1 } ).onComplete (trace, [ \"MyClip is now visible\" ]);</code>\r\n\t * @param\ttarget\t\tThe object to tween\r\n\t * @param\tduration\t\tThe length of the tween in seconds\r\n\t * @param\tproperties\t\tThe end values to tween the target to\r\n\t * @param\toverwrite\t\t\tSets whether previous tweens for the same target and properties will be overwritten (Default is true)\r\n\t * @param\tcustomActuator\t\tA custom actuator to use instead of the default (Optional)\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like ease, delay, onComplete or onUpdate\r\n\t */ \r\n\t/*@:generic*/ public static function tween<T> (target:T, duration:Float, properties:Dynamic, overwrite:Bool = true, customActuator:Class<GenericActuator<T>> = null):GenericActuator<T> {\r\n\t\t\r\n\t\tif (target != null) {\r\n\t\t\t\r\n\t\t\tif (duration > 0) {\r\n\t\t\t\t\r\n\t\t\t\tif (customActuator == null) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tcustomActuator = cast defaultActuator;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar actuator:GenericActuator<T> = Type.createInstance (customActuator, [ target, duration, properties ]);\r\n\t\t\t\tvar library = getLibrary (actuator.target);\r\n\t\t\t\t\r\n\t\t\t\tif (overwrite) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar i = library.length - 1;\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (i >= 0) {\r\n\t\t\t\t\t\tlibrary[i].stop (actuator.properties, false, false);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlibrary = getLibrary (actuator.target);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlibrary.push (actuator);\r\n\t\t\t\tactuator.move ();\r\n\t\t\t\t\r\n\t\t\t\treturn actuator;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\treturn apply (target, properties, customActuator);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/*@:generic*/ public static function unload<T> (actuator:GenericActuator<T>):Void {\r\n\t\t\r\n\t\tvar target = actuator.target;\r\n\t\t\r\n\t\t#if neko\r\n\t\t\r\n\t\tif (Reflect.isFunction (target)) {\r\n\t\t\t\r\n\t\t\tif (methodLibraries.exists (target)) {\r\n\t\t\t\t\r\n\t\t\t\tmethodLibraries.get (target).remove (actuator);\r\n\t\t\t\t\r\n\t\t\t\tif (methodLibraries.get (target).length == 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tmethodLibraries.remove (target);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t#end\r\n\t\t\r\n\t\tif (targetLibraries.exists (target)) {\r\n\t\t\t\r\n\t\t\ttargetLibraries.get (target).remove (actuator);\r\n\t\t\t\r\n\t\t\tif (targetLibraries.get (target).length == 0) {\r\n\t\t\t\t\r\n\t\t\t\ttargetLibraries.remove (target);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Creates a new tween that updates a method rather than setting the properties of an object\r\n\t * @example\t\t<code>Actuate.update (trace, 1, [\"Value: \", 0], [\"\", 1]).onComplete (trace, [ \"Finished tracing values between 0 and 1\" ]);</code>\r\n\t * @param\ttarget\t\tThe method to update\t\t\r\n\t * @param\tduration\t\tThe length of the tween in seconds\r\n\t * @param\tstart\t\tThe starting parameters of the method call. You may use both numeric and non-numeric values\r\n\t * @param\tend\t\tThe ending parameters of the method call. You may use both numeric and non-numeric values, but the signature should match the start parameters\r\n\t * @param\toverwrite\t\tSets whether previous tweens for the same target and properties will be overwritten (Default is true)\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like ease, delay, onComplete or onUpdate\r\n\t */\r\n\t/*@:generic*/ public static function update<T> (target:T, duration:Float, start:Array <Dynamic> = null, end:Array <Dynamic> = null, overwrite:Bool = true):GenericActuator<T> {\r\n\t\t\t\t\r\n\t\tvar properties:Dynamic = { start: start, end: end };\r\n\t\t\r\n\t\treturn tween (target, duration, properties, overwrite, MethodActuator);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\n#if !haxe3\r\nimport com.eclecticdesignstudio.motion.actuators.FilterActuator;\r\nimport com.eclecticdesignstudio.motion.actuators.GenericActuator;\r\nimport com.eclecticdesignstudio.motion.actuators.TransformActuator;\r\nimport com.eclecticdesignstudio.motion.Actuate;\r\nimport flash.display.DisplayObject;\r\nimport flash.filters.BitmapFilter;\r\n//import flash.filters.ColorMatrixFilter;\r\nimport flash.geom.Matrix;\r\n#end\r\n\r\n\r\n#if (flash || nme || openfl)\r\n\r\nprivate class EffectsOptions {\r\n\r\n\r\n\tprivate var duration:Float;\r\n\tprivate var overwrite:Bool;\r\n\tprivate var target:DisplayObject;\r\n\r\n\r\n\tpublic function new (target:DisplayObject, duration:Float, overwrite:Bool) {\r\n\t\t\r\n\t\tthis.target = target;\r\n\t\tthis.duration = duration;\r\n\t\tthis.overwrite = overwrite;\r\n\t\t\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Creates a new BitmapFilter tween\r\n\t * @param\treference\t\tA reference to the target's filter, which can be an array index or the class of the filter\r\n\t * @param\tproperties\t\tThe end properties to use for the tween\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like ease, delay, onComplete or onUpdate\r\n\t */\r\n\tpublic function filter (reference:Dynamic, properties:Dynamic):IGenericActuator {\r\n\t\t\r\n\t\tproperties.filter = reference;\r\n\t\t\r\n\t\treturn Actuate.tween (target, duration, properties, overwrite, FilterActuator);\r\n\t\t\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\nprivate class TransformOptions<T> {\r\n\r\n\r\n\tprivate var duration:Float;\r\n\tprivate var overwrite:Bool;\r\n\tprivate var target:T;\r\n\r\n\r\n\tpublic function new (target:T, duration:Float, overwrite:Bool) {\r\n\t\t\r\n\t\tthis.target = target;\r\n\t\tthis.duration = duration;\r\n\t\tthis.overwrite = overwrite;\r\n\t\t\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Creates a new ColorTransform tween\r\n\t * @param\tcolor\t\tThe color value\r\n\t * @param\tstrength\t\tThe percentage amount of tint to apply (Default is 1)\r\n\t * @param\talpha\t\tThe end alpha of the target. If you wish to tween alpha and tint simultaneously, you must do them both as part of the ColorTransform. A value of null will make no change to the alpha of the object (Default is null)\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like ease, delay, onComplete or onUpdate\r\n\t */\r\n\tpublic function color (value:Int = 0x000000, strength:Float = 1, alpha:Null <Float> = null):IGenericActuator {\r\n\t\t\r\n\t\tvar properties:Dynamic = { colorValue: value, colorStrength: strength };\r\n\t\t\r\n\t\tif (alpha != null) {\r\n\t\t\t\r\n\t\t\tproperties.colorAlpha = alpha;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn Actuate.tween (target, duration, properties, overwrite, TransformActuator);\r\n\t\t\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Creates a new SoundTransform tween\r\n\t * @param\tvolume\t\tThe end volume for the target, or null if you would like to ignore this property (Default is null)\r\n\t * @param\tpan\t\tThe end pan for the target, or null if you would like to ignore this property (Default is null)\r\n\t * @return\t\tThe current actuator instance, which can be used to apply properties like ease, delay, onComplete or onUpdate\r\n\t */\r\n\tpublic function sound (volume:Null <Float> = null, pan:Null <Float> = null):IGenericActuator {\r\n\t\t\r\n\t\tvar properties:Dynamic = {};\r\n\t\t\r\n\t\tif (volume != null) {\r\n\t\t\t\r\n\t\t\tproperties.soundVolume = volume;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (pan != null) {\r\n\t\t\t\r\n\t\t\tproperties.soundPan = pan;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn Actuate.tween (target, duration, properties, overwrite, TransformActuator);\r\n\t\t\r\n\t}\r\n\r\n\r\n}\r\n\r\n#end\r\n\r\n\r\nprivate class TweenTimer {\r\n\r\n\r\n\tpublic var progress:Float;\r\n\r\n\r\n\tpublic function new (progress:Float):Void {\r\n\t\t\r\n\t\tthis.progress = progress;\r\n\t\t\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\n#if neko\r\nprivate class KVPairMap<K, V>  {\r\n\tvar keyList:Array<K>;\r\n\tvar valList:Array<V>;\r\n\tpublic function new() {\r\n\t\tthis.keyList = [];\r\n\t\tthis.valList = [];\r\n\t}\r\n\tfunction equals(k1:K, k2:K):Bool \r\n\t\treturn throw 'base';\r\n\t\r\n\tfunction indexOf(k:K):Int {\r\n\t\tfor (i in 0...keyList.length)\r\n\t\t\tif (equals(k, keyList[i])) return i;\r\n\t\treturn -1;\r\n\t}\r\n\tpublic function get(k:K):Null<V> \r\n\t\treturn valList[indexOf(k)];\r\n\t\r\n\tpublic function set(k:K, v:V):V {\r\n\t\tvar i = indexOf(k);\r\n\t\tif (i == -1) {\r\n\t\t\tkeyList.push(k);\r\n\t\t\tvalList.push(v);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tkeyList[i] = k;\r\n\t\t\tvalList[i] = v;\r\n\t\t}\r\n\t\treturn v;\r\n\t}\r\n\tpublic function exists(k:K):Bool \r\n\t\treturn indexOf(k) != -1;\r\n\t\r\n\tpublic function remove(k:K):Bool {\r\n\t\tvar i = indexOf(k);\r\n\t\treturn\r\n\t\t\tif (i == -1) false;\r\n\t\t\telse {\r\n\t\t\t\tkeyList.splice(i, 1);\r\n\t\t\t\tvalList.splice(i, 1);\r\n\t\t\t\ttrue;\r\n\t\t\t}\r\n\t}\r\n\tpublic inline function keys():Iterator<K> \r\n\t\treturn keyList.iterator();\r\n\t\r\n\tpublic inline function iterator():Iterator<V> \r\n\t\treturn valList.iterator();\r\n\t\r\n\tpublic function toString() {\r\n\t\treturn [for (i in 0...keyList.length) Std.string(keyList[i]) => valList[i]].toString();\r\n\t}\r\n\t\r\n}\r\n\r\n       private class FunctionMap < K, V > extends KVPairMap < K, V > {\r\n                override function equals(k1:K, k2:K):Bool {\r\n                        return Reflect.compareMethods(k1, k2);\r\n                }\r\n        }\r\n\r\n#end","﻿package motion.actuators;\r\n\r\n\r\nclass MethodActuator<T> extends SimpleActuator<T, T> {\r\n\t\r\n\t\r\n\tprivate var currentParameters:Array <Dynamic>;\r\n\tprivate var tweenProperties:Dynamic;\r\n\t\r\n\t\r\n\tpublic function new (target:T, duration:Float, properties:Dynamic) {\r\n\t\t\r\n\t\tcurrentParameters = new Array <Dynamic> ();\r\n\t\ttweenProperties = { };\r\n\t\t\r\n\t\tsuper (target, duration, properties);\r\n\t\t\r\n\t\tif (!Reflect.hasField (properties, \"start\")) {\r\n\t\t\t\r\n\t\t\tthis.properties.start = new Array <Dynamic> ();\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (!Reflect.hasField (properties, \"end\")) {\r\n\t\t\t\r\n\t\t\tthis.properties.end = this.properties.start;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfor (i in 0...this.properties.start.length) {\r\n\t\t\t\r\n\t\t\tcurrentParameters.push (this.properties.start[i]);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function apply ():Void {\r\n\t\t\r\n\t\tcallMethod (target, properties.end);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function complete (sendEvent:Bool = true):Void {\r\n\t\t\r\n\t\tfor (i in 0...properties.start.length) {\r\n\t\t\t\r\n\t\t\tcurrentParameters[i] = Reflect.field (tweenProperties, \"param\" + i);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tcallMethod (target, currentParameters);\r\n\t\t\r\n\t\tsuper.complete (sendEvent);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function initialize ():Void {\r\n\t\t\r\n\t\tvar details:PropertyDetails<T>;\r\n\t\tvar propertyName:String;\r\n\t\tvar start:Dynamic;\r\n\t\t\r\n\t\tfor (i in 0...properties.start.length) {\r\n\t\t\t\r\n\t\t\tpropertyName = \"param\" + i;\r\n\t\t\tstart = properties.start[i];\r\n\t\t\t\r\n\t\t\tReflect.setField (tweenProperties, propertyName, start);\r\n\t\t\t\r\n\t\t\tif (Std.is (start, Float) || Std.is (start, Int)) {\r\n\t\t\t\t\r\n\t\t\t\tdetails = new PropertyDetails (tweenProperties, propertyName, start, properties.end[i] - start);\r\n\t\t\t\tpropertyDetails.push (details);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tdetailsLength = propertyDetails.length;\r\n\t\tinitialized = true;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function update (currentTime:Float):Void {\r\n\t\t\r\n\t\tsuper.update (currentTime);\r\n\t\t\r\n\t\tif (active && !paused) {\r\n\t\t\t\r\n\t\t\tfor (i in 0...properties.start.length) {\r\n\t\t\t\t\r\n\t\t\t\tcurrentParameters[i] = Reflect.field (tweenProperties, \"param\" + i);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcallMethod (target, currentParameters);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}","﻿package motion.actuators;\r\n\r\n\r\nimport motion.MotionPath;\r\n\r\n\r\nclass MotionPathActuator<T> extends SimpleActuator<T, T> {\r\n\t\r\n\t\r\n\tpublic function new (target:T, duration:Float, properties:Dynamic) {\r\n\t\t\r\n\t\tsuper (target, duration, properties);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function apply ():Void {\r\n\t\t\r\n\t\tfor (propertyName in Reflect.fields (properties)) {\r\n\t\t\t\r\n\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\t\r\n\t\t\tif (#if flash false && #end Reflect.hasField (target, propertyName)) {\r\n\t\t\t\t\r\n\t\t\t\tReflect.setField (target, propertyName, cast (Reflect.field (properties, propertyName), IComponentPath).end);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tReflect.setProperty (target, propertyName, cast (Reflect.field (properties, propertyName), IComponentPath).end);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t#else\r\n\t\t\t\r\n\t\t\tReflect.setField (target, propertyName, cast (Reflect.field (properties, propertyName), IComponentPath).end);\r\n\t\t\t\r\n\t\t\t#end\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function initialize ():Void {\r\n\t\t\r\n\t\tvar details:PropertyPathDetails<T>;\r\n\t\tvar path:IComponentPath;\r\n\t\t\r\n\t\tfor (propertyName in Reflect.fields (properties)) {\r\n\t\t\t\r\n\t\t\tpath = cast (Reflect.field (properties, propertyName), IComponentPath);\r\n\t\t\t\r\n\t\t\tif (path != null) {\r\n\t\t\t\t\r\n\t\t\t\tvar isField = true;\r\n\t\t\t\t\r\n\t\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\t\t\r\n\t\t\t\tif (#if flash false && #end Reflect.hasField (target, propertyName)) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tpath.start = Reflect.field (target, propertyName);\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tisField = false;\r\n\t\t\t\t\tpath.start = Reflect.getProperty (target, propertyName);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t#else\r\n\t\t\t\t\r\n\t\t\t\tpath.start = Reflect.field (target, propertyName);\r\n\t\t\t\t\r\n\t\t\t\t#end\r\n\t\t\t\t\r\n\t\t\t\tdetails = new PropertyPathDetails (target, propertyName, path, isField);\r\n\t\t\t\tpropertyDetails.push (details);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tdetailsLength = propertyDetails.length;\r\n\t\tinitialized = true;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate override function update (currentTime:Float):Void {\r\n\t\t\r\n\t\tif (!paused) {\r\n\t\t\t\r\n\t\t\tvar details:PropertyPathDetails<T>;\r\n\t\t\tvar easing:Float;\r\n\t\t\t\r\n\t\t\tvar tweenPosition = (currentTime - timeOffset) / duration;\r\n\t\t\t\r\n\t\t\tif (tweenPosition > 1) {\r\n\t\t\t\t\r\n\t\t\t\ttweenPosition = 1;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!initialized) {\r\n\t\t\t\t\r\n\t\t\t\tinitialize ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!special) {\r\n\t\t\t\t\r\n\t\t\t\teasing = _ease.calculate (tweenPosition);\r\n\t\t\t\t\r\n\t\t\t\tfor (details in propertyDetails) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (details.isField) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tReflect.setField (details.target, details.propertyName, cast (details, PropertyPathDetails<Dynamic>).path.calculate (easing));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\t\t\t\tReflect.setProperty (details.target, details.propertyName, cast (details, PropertyPathDetails<Dynamic>).path.calculate (easing));\r\n\t\t\t\t\t\t#end\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tif (!_reverse) {\r\n\t\t\t\t\t\r\n\t\t\t\t\teasing = _ease.calculate (tweenPosition);\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\teasing = _ease.calculate (1 - tweenPosition);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar endValue:Float;\r\n\t\t\t\t\r\n\t\t\t\tfor (details in propertyDetails) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!_snapping) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (details.isField) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tReflect.setField (details.target, details.propertyName, cast (details, PropertyPathDetails<Dynamic>).path.calculate (easing));\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\t\t\t\t\tReflect.setProperty (details.target, details.propertyName, cast (details, PropertyPathDetails<Dynamic>).path.calculate (easing));\r\n\t\t\t\t\t\t\t#end\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (details.isField) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tReflect.setField (details.target, details.propertyName, Math.round (cast (details, PropertyPathDetails<Dynamic>).path.calculate (easing)));\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t#if (haxe_209 || haxe3)\r\n\t\t\t\t\t\t\tReflect.setProperty (details.target, details.propertyName, Math.round (cast (details, PropertyPathDetails<Dynamic>).path.calculate (easing)));\r\n\t\t\t\t\t\t\t#end\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (tweenPosition == 1) {\r\n\t\t\t\t\r\n\t\t\t\tif (_repeat == 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tactive = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (toggleVisible && getField (target, \"alpha\") == 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetField (target, \"visible\", false);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcomplete (true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (_onRepeat != null) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcallMethod (_onRepeat, _onRepeatParams);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (_reflect) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t_reverse = !_reverse;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tstartTime = currentTime;\r\n\t\t\t\t\ttimeOffset = startTime + _delay;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (_repeat > 0) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t_repeat --;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (sendChange) {\r\n\t\t\t\t\r\n\t\t\t\tchange ();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\n#if !haxe3\r\nimport com.eclecticdesignstudio.motion.MotionPath;\r\n#end\r\n\r\n\r\nclass PropertyPathDetails<T> extends PropertyDetails<T> {\r\n\t\r\n\t\r\n\tpublic var path:IComponentPath;\r\n\t\r\n\t\r\n\tpublic function new (target:T, propertyName:String, path:IComponentPath, isField:Bool = true) {\r\n\t\t\r\n\t\tsuper (target, propertyName, 0, 0, isField);\r\n\t\t\r\n\t\tthis.path = path;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}","﻿package motion.actuators;\r\n\r\n\r\nclass PropertyDetails<T> {\r\n\t\r\n\t\r\n\tpublic var change:Float;\r\n\tpublic var isField:Bool;\r\n\tpublic var propertyName:String;\r\n\tpublic var start:Float;\r\n\tpublic var target:T;\r\n\t\r\n\t\r\n\tpublic function new (target:T, propertyName:String, start:Float, change:Float, isField:Bool = true):Void {\r\n\t\t\r\n\t\tthis.target = target;\r\n\t\tthis.propertyName = propertyName;\r\n\t\tthis.start = start;\r\n\t\tthis.change = change;\r\n\t\tthis.isField = isField;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}","/*\nCopyright (c) 2012 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage msignal;\n\nimport msignal.Slot;\n\n/**\n\tA convenience type describing any kind of signal.\n**/\ntypedef AnySignal = Signal<Dynamic, Dynamic>;\n\n/**\n\tA Signal manages a list of listeners, which are executed when the signal is \n\tdispatched.\n**/\nclass Signal<TSlot:Slot<Dynamic, Dynamic>, TListener>\n{\n\tpublic var valueClasses:Array<Dynamic>;\n\n\t/**\n\t\tThe current number of listeners for the signal.\n\t**/\n\tpublic var numListeners(get_numListeners, null):Int;\n\t\n\tvar slots:SlotList<TSlot, TListener>;\n\tvar priorityBased:Bool;\n\n\tfunction new(?valueClasses:Array<Dynamic>)\n\t{\n\t\tif (valueClasses == null) valueClasses = [];\n\t\tthis.valueClasses = valueClasses;\n\t\tslots = cast SlotList.NIL;\n\t\tpriorityBased = false;\n\t}\n\n\t/**\n\t\tSubscribes a listener for the signal.\n\t\t\n\t\t@param listener A function matching the signature of TListener\n\t\t@return The added listener slot\n\t**/\n\tpublic function add(listener:TListener):TSlot\n\t{\n\t\treturn registerListener(listener);\n\t}\n\n\t/**\n\t\tSubscribes a one-time listener for this signal.\n\t\tThe signal will remove the listener automatically the first time it is called,\n\t\tafter the dispatch to all listeners is complete.\n\t\t\n\t\t@param listener A function matching the signature of TListener\n\t\t@return The added listener slot\n\t**/\n\tpublic function addOnce(listener:TListener):TSlot\n\t{\n\t\treturn registerListener(listener, true);\n\t}\n\n\t/**\n\t\tSubscribes a listener for the signal.\n\t\tAfter you successfully register an event listener,\n\t\tyou cannot change its priority through additional calls to add().\n\t\tTo change a listener's priority, you must first call remove().\n\t\tThen you can register the listener again with the new priority level.\n\t\t\n\t\t@param listener A function matching the signature of TListener\n\t\t@return The added listener slot\n\t**/\n\tpublic function addWithPriority(listener:TListener, ?priority:Int=0):TSlot\n\t{\n\t\treturn registerListener(listener, false, priority);\n\t}\n\n\t/**\n\t\tSubscribes a one-time listener for this signal.\n\t\tThe signal will remove the listener automatically the first time it is \n\t\tcalled, after the dispatch to all listeners is complete.\n\t\t\n\t\t@param listener A function matching the signature of TListener\n\t\t@return The added listener slot\n\t**/\n\tpublic function addOnceWithPriority(listener:TListener, ?priority:Int=0):TSlot\n\t{\n\t\treturn registerListener(listener, true, priority);\n\t}\n\n\t/**\n\t\tUnsubscribes a listener from the signal.\n\t\t\n\t\t@param listener The listener to remove\n\t\t@return The removed listener slot\n\t**/\n\tpublic function remove(listener:TListener):TSlot\n\t{\n\t\tvar slot = slots.find(listener);\n\t\tif (slot == null) return null;\n\t\t\n\t\tslots = slots.filterNot(listener);\n\t\treturn slot;\n\t}\n\n\t/**\n\t\tUnsubscribes all listeners from the signal.\n\t**/\n\tpublic function removeAll():Void\n\t{\n\t\tslots = cast SlotList.NIL;\n\t}\n\n\tfunction registerListener(listener:TListener, once:Bool=false, priority:Int=0):TSlot\n\t{\n\t\tif (registrationPossible(listener, once))\n\t\t{\n\t\t\tvar newSlot = createSlot(listener, once, priority);\n\t\t\t\n\t\t\tif (!priorityBased && priority != 0) priorityBased = true;\n\t\t\tif (!priorityBased && priority == 0) slots = slots.prepend(newSlot);\n\t\t\telse slots = slots.insertWithPriority(newSlot);\n\n\t\t\treturn newSlot;\n\t\t}\n\t\t\n\t\treturn slots.find(listener);\n\t}\n\n\tfunction registrationPossible(listener, once)\n\t{\n\t\tif (!slots.nonEmpty) return true;\n\t\t\n\t\tvar existingSlot = slots.find(listener);\n\t\tif (existingSlot == null) return true;\n\n\t\tif (existingSlot.once != once)\n\t\t{\n\t\t\t// If the listener was previously added, definitely don't add it again.\n\t\t\t// But throw an exception if their once values differ.\n\t\t\tthrow \"You cannot addOnce() then add() the same listener without removing the relationship first.\";\n\t\t}\n\t\t\n\t\treturn false; // Listener was already registered.\n\t}\n\n\t@:IgnoreCover\n\tfunction createSlot(listener:TListener, once:Bool=false, priority:Int=0):TSlot\n\t{\n\t\treturn null;\n\t}\n\n\tfunction get_numListeners()\n\t{\n\t\treturn slots.length;\n\t}\n}\n\n/**\n\tSignal that executes listeners with no arguments.\n**/\nclass Signal0 extends Signal<Slot0, Void -> Void>\n{\n\tpublic function new()\n\t{\n\t\tsuper();\n\t}\n\n\t/**\n\t\tExecutes the signals listeners with no arguements.\n\t**/\n\tpublic function dispatch()\n\t{\n\t\tvar slotsToProcess = slots;\n\t\t\n\t\twhile (slotsToProcess.nonEmpty)\n\t\t{\n\t\t\tslotsToProcess.head.execute();\n\t\t\tslotsToProcess = slotsToProcess.tail;\n\t\t}\n\t}\n\n\toverride function createSlot(listener:Void -> Void, once:Bool=false, priority:Int=0)\n\t{\n\t\treturn new Slot0(this, listener, once, priority);\n\t}\n}\n\n/**\n\tSignal that executes listeners with one arguments.\n**/\nclass Signal1<TValue> extends Signal<Slot1<TValue>, TValue -> Void>\n{\n\tpublic function new(?type:Dynamic=null)\n\t{\n\t\tsuper([type]);\n\t}\n\n\t/**\n\t\tExecutes the signals listeners with one arguement.\n\t**/\n\tpublic function dispatch(value:TValue)\n\t{\n\t\tvar slotsToProcess = slots;\n\t\t\n\t\twhile (slotsToProcess.nonEmpty)\n\t\t{\n\t\t\tslotsToProcess.head.execute(value);\n\t\t\tslotsToProcess = slotsToProcess.tail;\n\t\t}\n\t}\n\n\toverride function createSlot(listener:TValue -> Void, once:Bool=false, priority:Int=0)\n\t{\n\t\treturn new Slot1<TValue>(this, listener, once, priority);\n\t}\n}\n\n/**\n\tSignal that executes listeners with two arguments.\n**/\nclass Signal2<TValue1, TValue2> extends Signal<Slot2<TValue1, TValue2>, TValue1 -> TValue2 -> Void>\n{\n\tpublic function new(?type1:Dynamic=null, ?type2:Dynamic=null)\n\t{\n\t\tsuper([type1, type2]);\n\t}\n\n\t/**\n\t\tExecutes the signals listeners with two arguements.\n\t**/\n\tpublic function dispatch(value1:TValue1, value2:TValue2)\n\t{\n\t\tvar slotsToProcess = slots;\n\t\t\n\t\twhile (slotsToProcess.nonEmpty)\n\t\t{\n\t\t\tslotsToProcess.head.execute(value1, value2);\n\t\t\tslotsToProcess = slotsToProcess.tail;\n\t\t}\n\t}\n\n\toverride function createSlot(listener:TValue1 -> TValue2 -> Void, once:Bool=false, priority:Int=0)\n\t{\n\t\treturn new Slot2<TValue1, TValue2>(this, listener, once, priority);\n\t}\n}\n","/*\nCopyright (c) 2012 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage msignal;\n\nimport msignal.Signal;\n\n/**\n\tA convenience type describing any kind of slot.\n**/\ntypedef AnySlot = Slot<Dynamic, Dynamic>;\n\n/**\n\tDefines the basic properties of a listener associated with a Signal.\n**/\n#if haxe3\nclass Slot<TSignal:msignal.Signal.AnySignal, TListener>\n#else\nclass Slot<TSignal:Signal<Dynamic, TListener>, TListener>\n#end\n{\n\t/**\n\t\tThe listener associated with this slot.\n\t\tNote: for hxcpp 2.10 this requires a getter method to compile\n\t**/\n\t#if cpp\n\t#if haxe3 @:isVar #end\n\tpublic var listener(get_listener, set_listener):TListener;\n\t#else\n\t#if haxe3 @:isVar #end\n\tpublic var listener(default, set_listener):TListener;\n\t#end\n\t\n\n\t/**\n\t\tWhether this slot is automatically removed after it has been used once.\n\t**/\n\tpublic var once(default, null):Bool;\n\n\t/**\n\t\tThe priority of this slot should be given in the execution order.\n\t\tAn Signal will call higher numbers before lower ones.\n\t\tDefaults to 0.\n\t**/\n\tpublic var priority(default, null):Int;\n\n\t/**\n\t\tWhether the listener is called on execution. Defaults to true.\n\t**/\n\tpublic var enabled:Bool;\n\n\tvar signal:TSignal;\n\t\n\tfunction new(signal:TSignal, listener:TListener, once:Bool=false, priority:Int=0)\n\t{\n\t\tthis.signal = signal;\n\t\tthis.listener = listener;\n\t\tthis.once = once;\n\t\tthis.priority = priority;\n\t\tthis.enabled = true;\n\t}\n\n\t/**\n\t\tRemoves the slot from its signal.\n\t**/\n\tpublic function remove()\n\t{\n\t\tsignal.remove(listener);\n\t}\n\n\t#if cpp\n\t/**\n\t\tHxcpp 2.10 requires a getter method for a typed function property in \n\t\torder to compile\n\t**/\n\tfunction get_listener():TListener\n\t{\n\t\treturn listener;\n\t}\n\t#end\n\n\tfunction set_listener(value:TListener):TListener\n\t{\n\t\tif (value == null) throw \"listener cannot be null\";\n\t\treturn listener = value;\n\t}\n}\n\n/**\n\tA slot that executes a listener with no arguments.\n**/\nclass Slot0 extends Slot<Signal0, Void -> Void>\n{\n\tpublic function new(signal:Signal0, listener:Void -> Void, once:Bool=false, priority:Int=0)\n\t{\n\t\tsuper(signal, listener, once, priority);\n\t}\n\n\t/**\n\t\tExecutes a listener with no arguments.\n\t**/\n\tpublic function execute()\n\t{\n\t\tif (!enabled) return;\n\t\tif (once) remove();\n\t\tlistener();\n\t}\n}\n\n/**\n\tA slot that executes a listener with one argument.\n**/\nclass Slot1<TValue> extends Slot<Signal1<TValue>, TValue -> Void>\n{\n\t/**\n\t\tAllows the slot to inject the argument to dispatch.\n\t**/\n\tpublic var param:TValue;\n\n\tpublic function new(signal:Signal1<TValue>, listener:TValue -> Void, once:Bool=false, priority:Int=0)\n\t{\n\t\tsuper(signal, listener, once, priority);\n\t}\n\n\t/**\n\t\tExecutes a listener with one argument.\n\t\tIf <code>param</code> is not null, it overrides the value provided.\n\t**/\n\tpublic function execute(value1:TValue)\n\t{\n\t\tif (!enabled) return;\n\t\tif (once) remove();\n\t\tif (param != null) value1 = param;\n\t\tlistener(value1);\n\t}\n}\n\n/**\n\tA slot that executes a listener with two arguments.\n**/\nclass Slot2<TValue1, TValue2> extends Slot<Signal2<TValue1, TValue2>, TValue1 -> TValue2 -> Void>\n{\n\t/**\n\t\tAllows the slot to inject the first argument to dispatch.\n\t**/\n\tpublic var param1:TValue1;\n\n\t/**\n\t\tAllows the slot to inject the second argument to dispatch.\n\t**/\n\tpublic var param2:TValue2;\n\n\tpublic function new(signal:Signal2<TValue1, TValue2>, listener:TValue1 -> TValue2 -> Void, once:Bool=false, priority:Int=0)\n\t{\n\t\tsuper(signal, listener, once, priority);\n\t}\n\n\t/**\n\t\tExecutes a listener with two arguments.\n\t\tIf <code>param1</code> or <code>param2</code> is set, \n\t\tthey override the values provided.\n\t**/\n\tpublic function execute(value1:TValue1, value2:TValue2)\n\t{\n\t\tif (!enabled) return;\n\t\tif (once) remove();\n\t\t\n\t\tif (param1 != null) value1 = param1;\n\t\tif (param2 != null) value2 = param2;\n\t\t\n\t\tlistener(value1, value2);\n\t}\n}\n","/*\nCopyright (c) 2012 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage msignal;\n\nclass SlotList<TSlot:Slot<Dynamic, Dynamic>, TListener>\n{\n\t@:IgnoreCover\n\tstatic function __init__() { NIL = new SlotList<Dynamic, Dynamic>(null, null); }\n\t\n\t/**\n\t\tRepresents an empty list. Used as the list terminator.\n\t**/\n\tpublic static var NIL:SlotList<Dynamic, Dynamic>;\n\t\n\tpublic var head:TSlot;\n\tpublic var tail:SlotList<TSlot, TListener>;\n\tpublic var nonEmpty:Bool;\n\t\n\t/**\n\t\tCreates and returns a new SlotList object.\n\n\t\t<p>A user never has to create a SlotList manually. \n\t\tUse the <code>NIL</code> element to represent an empty list. \n\t\t<code>NIL.prepend(value)</code> would create a list containing \n\t\t<code>value</code></p>.\n\n\t\t@param head The first slot in the list.\n\t\t@param tail A list containing all slots except head.\n\t**/\n\tpublic function new(head:TSlot, tail:SlotList<TSlot, TListener>=null)\n\t{\n\t\tnonEmpty = false;\n\t\t\n\t\tif (head == null && tail == null)\n\t\t{\n\t\t\tif (NIL != null)\n\t\t\t{\n\t\t\t\tthrow \"Parameters head and tail are null. Use the NIL element instead.\";\n\t\t\t}\n\t\t\t\n\t\t\t// this is the NIL element as per definition\n\t\t\tnonEmpty = false;\n\t\t}\n\t\telse if (head == null)\n\t\t{\n\t\t\tthrow \"Parameter head cannot be null.\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.head = head;\n\t\t\tthis.tail = (tail == null ? cast NIL : tail);\n\t\t\tnonEmpty = true;\n\t\t}\n\t}\n\t\n\t/**\n\t\tThe number of slots in the list.\n\t**/\n\tpublic var length(get_length, null):Int;\n\tfunction get_length():Int\n\t{\n\t\tif (!nonEmpty) return 0;\n\t\tif (tail == NIL) return 1;\n\t\t\n\t\t// We could cache the length, but it would make methods like filterNot unnecessarily complicated.\n\t\t// Instead we assume that O(n) is okay since the length property is used in rare cases.\n\t\t// We could also cache the length lazy, but that is a waste of another 8b per list node (at least).\n\t\t\n\t\tvar result = 0;\n\t\tvar p = this;\n\t\t\n\t\twhile (p.nonEmpty)\n\t\t{\n\t\t\t++result;\n\t\t\tp = p.tail;\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n\t\n\t/**\n\t\tPrepends a slot to this list.\n\t\t@param\tslot The item to be prepended.\n\t\t@return\tA list consisting of slot followed by all elements of this list.\n\t**/\n\tpublic function prepend(slot:TSlot)\n\t{\n\t\treturn new SlotList<TSlot, TListener>(slot, this);\n\t}\n\t\n\t/**\n\t\tAppends a slot to this list.\n\t\tNote: appending is O(n). Where possible, prepend which is O(1).\n\t\tIn some cases, many list items must be cloned to \n\t\tavoid changing existing lists.\n\t\t@param\tslot The item to be appended.\n\t\t@return\tA list consisting of all elements of this list followed by slot.\n\t**/\n\tpublic function append(slot:TSlot)\n\t{\n\t\tif (slot == null) return this;\n\t\tif (!nonEmpty) return new SlotList<TSlot, TListener>(slot);\n\t\t\n\t\t// Special case: just one slot currently in the list.\n\t\tif (tail == NIL) \n\t\t{\n\t\t\treturn new SlotList<TSlot, TListener>(slot).prepend(head);\n\t\t}\n\t\t\n\t\t// The list already has two or more slots.\n\t\t// We have to build a new list with cloned items because they are immutable.\n\t\tvar wholeClone = new SlotList<TSlot, TListener>(head);\n\t\tvar subClone = wholeClone;\n\t\tvar current = tail;\n\t\t\n\t\twhile (current.nonEmpty)\n\t\t{\n\t\t\tsubClone = subClone.tail = new SlotList<TSlot, TListener>(current.head);\n\t\t\tcurrent = current.tail;\n\t\t}\n\t\t\n\t\t// Append the new slot last.\n\t\tsubClone.tail = new SlotList<TSlot, TListener>(slot);\n\t\treturn wholeClone;\n\t}\t\t\n\t\n\t/**\n\t\tInsert a slot into the list in a position according to its priority.\n\t\tThe higher the priority, the closer the item will be inserted to the \n\t\tlist head.\n\t\t@param slot The item to be inserted.\n\t**/\n\tpublic function insertWithPriority(slot:TSlot)\n\t{\n\t\tif (!nonEmpty) return new SlotList<TSlot, TListener>(slot);\n\t\t\n\t\tvar priority:Int = slot.priority;\n\t\t\n\t\t// Special case: new slot has the highest priority.\n\t\tif (priority >= this.head.priority) return prepend(slot);\n\n\t\tvar wholeClone = new SlotList<TSlot, TListener>(head);\n\t\tvar subClone = wholeClone;\n\t\tvar current = tail;\n\n\t\t// Find a slot with lower priority and go in front of it.\n\t\twhile (current.nonEmpty)\n\t\t{\n\t\t\tif (priority > current.head.priority)\n\t\t\t{\n\t\t\t\tsubClone.tail = current.prepend(slot);\n\t\t\t\treturn wholeClone;\n\t\t\t}\n\t\t\t\n\t\t\tsubClone = subClone.tail = new SlotList<TSlot, TListener>(current.head);\n\t\t\tcurrent = current.tail;\n\t\t}\n\t\t\n\t\t// Slot has lowest priority.\n\t\tsubClone.tail = new SlotList<TSlot, TListener>(slot);\n\t\treturn wholeClone;\n\t}\n\t\n\t/**\n\t\tReturns the slots in this list that do not contain the supplied \n\t\tlistener. Note: assumes the listener is not repeated within the list.\n\t\t@param\tlistener The function to remove.\n\t\t@return A list consisting of all elements of this list that do not \n\t\t\t\thave listener.\n\t**/\n\tpublic function filterNot(listener:TListener)\n\t{\n\t\tif (!nonEmpty || listener == null) return this;\n\t\t\n\t\tif (Reflect.compareMethods(head.listener, listener)) return tail;\n\t\t\n\t\t// The first item wasn't a match so the filtered list will contain it.\n\t\tvar wholeClone = new SlotList<TSlot, TListener>(head);\n\t\tvar subClone = wholeClone;\n\t\tvar current = tail;\n\t\t\n\t\twhile (current.nonEmpty)\n\t\t{\n\t\t\tif (Reflect.compareMethods(current.head.listener, listener))\n\t\t\t{\n\t\t\t\t// Splice out the current head.\n\t\t\t\tsubClone.tail = current.tail;\n\t\t\t\treturn wholeClone;\n\t\t\t}\n\t\t\t\n\t\t\tsubClone = subClone.tail = new SlotList<TSlot, TListener>(current.head);\n\t\t\tcurrent = current.tail;\n\t\t}\n\t\t\n\t\t// The listener was not found so this list is unchanged.\n\t\treturn this;\n\t}\n\t\n\t/**\n\t\tDetermines whether the supplied listener Function is contained \n\t\twithin this list\n\t**/\n\tpublic function contains(listener:TListener):Bool\n\t{\n\t\tif (!nonEmpty) return false;\n\n\t\tvar p = this;\n\t\twhile (p.nonEmpty)\n\t\t{\n\t\t\tif (Reflect.compareMethods(p.head.listener, listener)) return true;\n\t\t\tp = p.tail;\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t/**\n\t\tRetrieves the Slot associated with a supplied listener within the SlotList.\n\t\t@param   listener The Function being searched for\n\t\t@return  The ISlot in this list associated with the listener parameter \n\t\t\t\t through the ISlot.listener property. Returns null if no such \n\t\t\t\t ISlot instance exists or the list is empty.  \n\t**/\n\tpublic function find(listener:TListener):TSlot\n\t{\n\t\tif (!nonEmpty) return null;\n\t\t\n\t\tvar p = this;\n\t\twhile (p.nonEmpty)\n\t\t{\n\t\t\tif (Reflect.compareMethods(p.head.listener, listener)) return p.head;\n\t\t\tp = p.tail;\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage;\n\n// Can't enable @:coreApi because some fields are now inline getters\n// @:coreApi\n@:keepInit\nextern class Math\n{\n\tstatic var PI(default,null) : Float;\n\n\tstatic var NEGATIVE_INFINITY(get, null) : Float;\n\tprivate static inline function get_NEGATIVE_INFINITY () : Float {\n\t\treturn -(untyped __js__(\"Infinity\"));\n\t}\n\n\tstatic var POSITIVE_INFINITY(get,null) : Float;\n\tprivate static inline function get_POSITIVE_INFINITY () : Float {\n\t\treturn (untyped __js__(\"Infinity\"));\n\t}\n\n\tstatic var NaN(get, null) : Float;\n\tprivate static inline function get_NaN () : Float {\n\t\treturn (untyped __js__(\"NaN\"));\n\t}\n\n\tstatic function abs(v:Float):Float;\n\tstatic function acos(v:Float):Float;\n\tstatic function asin(v:Float):Float;\n\tstatic function atan(v:Float):Float;\n\tstatic function atan2(y:Float, x:Float):Float;\n\tstatic function ceil(v:Float):Int;\n\tstatic function cos(v:Float):Float;\n\tstatic function exp(v:Float):Float;\n\tstatic function floor(v:Float):Int;\n\tstatic function log(v:Float):Float;\n\tstatic function max(a:Float, b:Float):Float;\n\tstatic function min(a:Float, b:Float):Float;\n\tstatic function pow(v:Float, exp:Float):Float;\n\tstatic function random() : Float;\n\tstatic function round(v:Float):Int;\n\tstatic function sin(v:Float):Float;\n\tstatic function sqrt(v:Float):Float;\n\tstatic function tan(v:Float):Float;\n\n\tstatic inline function ffloor( v : Float ) : Float {\n\t\treturn floor(v);\n\t}\n\n\tstatic inline function fceil( v : Float ) : Float {\n\t\treturn ceil(v);\n\t}\n\n\tstatic inline function fround( v : Float ) : Float {\n\t\treturn round(v);\n\t}\n\n\tstatic inline function isFinite( f : Float ) : Bool {\n\t\treturn (untyped __js__(\"isFinite\"))(f);\n\t}\n\n\tstatic inline function isNaN( f : Float ) : Bool {\n\t\treturn (untyped __js__(\"isNaN\"))(f);\n\t}\n\n\tstatic function __init__() : Void {\n\t\tuntyped __feature__(\"Type.resolveClass\", $hxClasses[\"Math\"] = Math);\n\t}\n}\n","interface IWaudSound {\n\tvar isSpriteSound:Bool;\n\tfunction play(?spriteName:String, ?soundProps:AudioSpriteSoundProperties):IWaudSound;\n\tfunction stop():Void;\n\tfunction onEnd(callback:IWaudSound -> Void):IWaudSound;\n\tfunction mute(val:Bool):Void;\n\tfunction loop(val:Bool):Void;\n\tfunction setVolume(val:Float):Void;\n\tfunction getVolume():Float;\n\tfunction isPlaying():Bool;\n\tfunction destroy():Void;\n}","package bindx;\n\n@:autoBuild(bindx.macro.BindableMacros.buildIBindable())\ninterface IBindable {\n}\n","/*\n * Copyright (C)2005-2013 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe;\n\n/**\n\tThis type unifies with any function type.\n\n\tIt is intended to be used as a type parameter constraint. If used as a real\n\ttype, the underlying type will be `Dynamic`.\n**/\n@:callable\nabstract Function(Dynamic) { }\n\n/**\n\tThis type unifies with an enum instance if all constructors of the enum\n\trequire no arguments.\n\n\tIt is intended to be used as a type parameter constraint. If used as a real\n\ttype, the underlying type will be `Dynamic`.\n**/\nabstract FlatEnum(Dynamic) { }\n\ninterface IMap<K,V> {\n\tpublic function get(k:K):Null<V>;\n\tpublic function set(k:K, v:V):Void;\n\tpublic function exists(k:K):Bool;\n\tpublic function remove(k:K):Bool;\n\tpublic function keys():Iterator<K>;\n\tpublic function iterator():Iterator<V>;\n\tpublic function toString():String;\n}","/*\nCopyright (c) 2012-2014 Massive Interactive\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of \nthis software and associated documentation files (the \"Software\"), to deal in \nthe Software without restriction, including without limitation the rights to \nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies \nof the Software, and to permit persons to whom the Software is furnished to do \nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all \ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, \nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE \nSOFTWARE.\n*/\n\npackage minject.point;\n\nimport minject.Injector;\n\ninterface InjectionPoint\n{\n\tfunction applyInjection(target:Dynamic, injector:Injector):Dynamic;\n}\n","package motion.actuators;\r\n\r\n\r\nimport motion.easing.IEasing;\r\n\r\n\r\ninterface IGenericActuator {\r\n\t\r\n\t\r\n\t/**\r\n\t * Flash performs faster when objects are set to visible = false rather than only alpha = 0. autoVisible toggles automatically based on alpha values\r\n\t * @param\tvalue\t\tWhether autoVisible should be enabled (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function autoVisible (?value:Null<Bool>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Increases the delay before a tween is executed\r\n\t * @param\tduration\t\tThe amount of seconds to delay\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function delay (duration:Float):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Sets the easing which is used when running the tween\r\n\t * @param\teasing\t\tAn easing equation, like Elastic.easeIn or Quad.easeOut\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function ease (easing:IEasing):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween finishes\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onComplete (handler:Dynamic, ?parameters:Array <Dynamic>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween repeats\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onRepeat (handler:Dynamic, ?parameters:Array <Dynamic>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween updates\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onUpdate (handler:Dynamic, ?parameters:Array <Dynamic>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Automatically changes the reverse value when the tween repeats. Repeat must be enabled for this to have any effect\r\n\t * @param\tvalue\t\tWhether reflect should be enabled (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function reflect (?value:Null<Bool>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Repeats the tween after it finishes\r\n\t * @param\ttimes\t\tThe number of times you would like the tween to repeat, or -1 if you would like to repeat the tween indefinitely (Default is -1)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function repeat (?times:Null<Int>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Sets if the tween should be handled in reverse\r\n\t * @param\tvalue\t\tWhether the tween should be reversed (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function reverse (?value:Null<Bool>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Enabling smartRotation can prevent undesired results when tweening rotation values\r\n\t * @param\tvalue\t\tWhether smart rotation should be enabled (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function smartRotation (?value:Null<Bool>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Snapping causes tween values to be rounded automatically\r\n\t * @param\tvalue\t\tWhether tween values should be rounded (Default is true)\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function snapping (?value:Null<Bool>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween is paused\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onPause (handler:Dynamic, ?parameters:Array <Dynamic>):IGenericActuator;\r\n\t\r\n\t/**\r\n\t * Defines a function which will be called when the tween resumed after pause\r\n\t * @param\thandler\t\tThe function you would like to be called\r\n\t * @param\tparameters\t\tParameters you would like to pass to the handler function when it is called\r\n\t * @return\t\tThe current actuator instance\r\n\t */\r\n\tpublic function onResume (handler:Dynamic, ?parameters:Array <Dynamic>):IGenericActuator;\r\n\t\r\n\t\r\n\t//private var properties:Dynamic;\r\n\tprivate function apply ():Void;\r\n\tprivate function move ():Void;\r\n\tprivate function pause ():Void;\r\n\tprivate function resume ():Void;\r\n\tprivate function stop (properties:Dynamic, complete:Bool, sendEvent:Bool):Void;\r\n\t\r\n\t\r\n}","package motion.easing;\r\n\t\r\n\t\r\n/**\r\n * @author Joshua Granick\r\n * @author Philippe / http://philippe.elsass.me\r\n */\r\ninterface IEasing {\r\n\t\r\n\t\r\n\tfunction calculate (k:Float):Float;\r\n\tfunction ease (t:Float, b:Float, c:Float, d:Float):Float;\r\n\t\r\n\t\r\n}","﻿package motion;\r\n\t\r\n\t\r\nclass MotionPath {\r\n\t\r\n\t\r\n\tpublic var rotation (get, null):RotationPath;\r\n\tpublic var x (get, null):IComponentPath;\r\n\tpublic var y (get, null):IComponentPath;\r\n\t\r\n\tprivate var _rotation:RotationPath;\r\n\tprivate var _x:ComponentPath;\r\n\tprivate var _y:ComponentPath;\r\n\t\r\n\t\r\n\tpublic function new () {\r\n\t\t\r\n\t\t_x = new ComponentPath ();\r\n\t\t_y = new ComponentPath ();\r\n\t\t\r\n\t\t_rotation = null;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Adds a bezier curve to the current motion path\r\n\t * @param\tx\t\tThe x position of the end point for the curve\r\n\t * @param\ty\t\tThe y position of the end point for the curve\r\n\t * @param\tcontrolX\t\tThe x position of the control point for the curve, which affects the angle and midpoint\r\n\t * @param\tcontrolX\t\tThe x position of the control point for the curve, which affects the angle and midpoint\r\n\t * @param\tstrength\t\tThe degree of emphasis that should be placed on this segment. If a motion path contains multiple segments with the same strength, they all receive equal emphasis (Default is 1)\r\n\t * @return\t\tThe current motion path instance\r\n\t */\r\n\tpublic function bezier (x:Float, y:Float, controlX:Float, controlY:Float, strength:Float = 1):MotionPath {\r\n\t\t\r\n\t\t_x.addPath (new BezierPath (x, controlX, strength));\r\n\t\t_y.addPath (new BezierPath (y, controlY, strength));\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Adds a line to the current motion path\r\n\t * @param\tx\t\tThe x position of the end point for the line\r\n\t * @param\tx\t\tThe y position of the end point for the line\r\n\t * @param\tstrength\t\tThe degree of emphasis that should be placed on this segment . If a motion path contains multiple segments with the same strength, they all receive equal emphasis (Default is 1)\r\n\t * @return\t\tThe current motion path instance\r\n\t */\r\n\tpublic function line (x:Float, y:Float, strength:Float = 1):MotionPath {\r\n\t\t\r\n\t\t_x.addPath (new LinearPath (x, strength));\r\n\t\t_y.addPath (new LinearPath (y, strength));\r\n\t\t\r\n\t\treturn this;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t// Get & Set Methods\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tprivate function get_rotation ():RotationPath {\r\n\t\t\r\n\t\tif (_rotation == null) {\r\n\t\t\t\r\n\t\t\t_rotation = new RotationPath (_x, _y);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn _rotation;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function get_x ():IComponentPath {\r\n\t\t\r\n\t\treturn _x;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate function get_y ():IComponentPath {\r\n\t\t\r\n\t\treturn _y;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\nclass ComponentPath implements IComponentPath {\r\n\t\r\n\t\r\n\tpublic var start:Float;\r\n\tpublic var end (get, null):Float;\r\n\t\r\n\tprivate var paths:Array <BezierPath>;\r\n\tprivate var totalStrength:Float;\r\n\t\r\n\t\r\n\tpublic function new () {\r\n\t\t\r\n\t\tpaths = new Array <BezierPath> ();\r\n\t\tstart = 0;\r\n\t\ttotalStrength = 0;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function addPath (path:BezierPath):Void {\r\n\t\t\r\n\t\tpaths.push (path);\r\n\t\ttotalStrength += path.strength;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function calculate (k:Float):Float {\r\n\t\t\r\n\t\tif (paths.length == 1) {\r\n\t\t\t\r\n\t\t\treturn paths[0].calculate (start, k);\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tvar ratio = k * totalStrength;\r\n\t\t\tvar lastEnd = start;\r\n\t\t\t\r\n\t\t\tfor (path in paths) {\r\n\t\t\t\t\r\n\t\t\t\tif (ratio > path.strength) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tratio -= path.strength;\r\n\t\t\t\t\tlastEnd = path.end;\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn path.calculate (lastEnd, ratio / path.strength);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn 0;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t// Get & Set Methods\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tprivate function get_end ():Float {\r\n\t\t\r\n\t\tif (paths.length > 0) {\r\n\t\t\t\r\n\t\t\tvar path = paths[paths.length - 1];\r\n\t\t\treturn path.end;\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\treturn start;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\ninterface IComponentPath {\r\n\t\r\n\t\r\n\tvar end (get, null):Float;\r\n\tvar start:Float;\r\n\t\r\n\tfunction calculate (k:Float):Float;\r\n\t\r\n\t\r\n}\r\n\r\n\r\nclass BezierPath {\r\n\t\r\n\t\r\n\tpublic var control:Float;\r\n\tpublic var end:Float;\r\n\tpublic var strength:Float;\r\n\t\r\n\t\r\n\tpublic function new (end:Float, control:Float, strength:Float) {\r\n\t\t\r\n\t\tthis.end = end;\r\n\t\tthis.control = control;\r\n\t\tthis.strength = strength;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function calculate (start:Float, k:Float):Float {\r\n\t\t\r\n\t\treturn (1 - k) * (1 - k) * start + 2 * (1 - k) * k * control + k * k * end;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\nclass LinearPath extends BezierPath {\r\n\t\r\n\t\r\n\tpublic function new (end:Float, strength:Float) {\r\n\t\t\r\n\t\tsuper (end, 0, strength);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic override function calculate (start:Float, k:Float):Float {\r\n\t\t\r\n\t\treturn start + k * (end - start);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n\r\nclass RotationPath implements IComponentPath {\r\n\t\r\n\t\r\n\tpublic var end (get, null):Float;\r\n\tpublic var offset:Float;\r\n\tpublic var start:Float;\r\n\t\r\n\tprivate var step = 0.01;\r\n\tprivate var _x:ComponentPath;\r\n\tprivate var _y:ComponentPath;\r\n\t\r\n\t\r\n\tpublic function new (x:ComponentPath, y:ComponentPath) {\r\n\t\t\r\n\t\t_x = x;\r\n\t\t_y = y;\r\n\t\t\r\n\t\toffset = 0;\r\n\t\t\r\n\t\tstart = calculate (0.0);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic function calculate (k:Float):Float {\r\n\t\t\r\n\t\tvar dX = _x.calculate (k) - _x.calculate (k + step);\r\n\t\tvar dY = _y.calculate (k) - _y.calculate (k + step);\r\n\t\t\r\n\t\tvar angle = Math.atan2(dY, dX) * (180 / Math.PI);\r\n\t\tangle = (angle + offset) % 360;\r\n\t\t\r\n\t\treturn angle;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t// Get & Set Methods\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tpublic function get_end ():Float {\r\n\t\t\r\n\t\treturn calculate (1.0);\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}"],
"names":[],
"mappings":"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"
}