{
"version":3,
"file":"webglinfo.js",
"sourceRoot":"file:///",
"sources":["/usr/local/lib/haxe/std/js/_std/Reflect.hx","/projects/pixi-haxe/samples/webglinfo/Main.hx"],
"sourcesContent":["/*\n * Copyright (C)2005-2017 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:coreApi class Reflect {\n\n\t@:pure\n\tpublic inline static function hasField( o : Dynamic, field : String ) : Bool {\n\t\treturn untyped __js__('Object').prototype.hasOwnProperty.call(o, field);\n\t}\n\n\tpublic static function field( o : Dynamic, field : String ) : Dynamic {\n\t\ttry return untyped o[field] catch( e : Dynamic ) return null;\n\t}\n\n\tpublic inline static function setField( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\to[field] = value;\n\t}\n\n\tpublic static function getProperty( o : Dynamic, field : String ) : Dynamic untyped {\n\t\tvar tmp;\n\t\treturn if( o == null ) __define_feature__(\"Reflect.getProperty\",null) else if( o.__properties__ && (tmp=o.__properties__[\"get_\"+field]) ) o[tmp]() else o[field];\n\t}\n\n\tpublic static function setProperty( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\tvar tmp;\n\t\tif( o.__properties__ && (tmp=o.__properties__[\"set_\"+field]) ) o[tmp](value) else o[field] = __define_feature__(\"Reflect.setProperty\",value);\n\t}\n\n\tpublic inline static function callMethod( o : Dynamic, func : haxe.Constraints.Function, args : Array<Dynamic> ) : Dynamic untyped {\n\t\treturn func.apply(o,args);\n\t}\n\n\tpublic static function fields( o : Dynamic ) : Array<String> {\n\t\tvar a = [];\n\t\tif (o != null) untyped {\n\t\t\tvar hasOwnProperty = __js__('Object').prototype.hasOwnProperty;\n\t\t\t__js__(\"for( var f in o ) {\");\n\t\t\tif( f != \"__id__\" && f != \"hx__closures__\" && hasOwnProperty.call(o, f) ) a.push(f);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn a;\n\t}\n\n\tpublic static function isFunction( f : Dynamic ) : Bool untyped {\n\t\treturn __js__(\"typeof(f)\") == \"function\" && !(js.Boot.isClass(f) || js.Boot.isEnum(f));\n\t}\n\n\tpublic static function compare<T>( a : T, b : T ) : Int {\n\t\treturn ( a == b ) ? 0 : (((cast a) > (cast b)) ? 1 : -1);\n\t}\n\n\tpublic static function compareMethods( f1 : Dynamic, f2 : Dynamic ) : Bool {\n\t\tif( f1 == f2 )\n\t\t\treturn true;\n\t\tif( !isFunction(f1) || !isFunction(f2) )\n\t\t\treturn false;\n\t\treturn f1.scope == f2.scope && f1.method == f2.method && f1.method != null;\n\t}\n\n\tpublic static function isObject( v : Dynamic ) : Bool untyped {\n\t\tif( v == null )\n\t\t\treturn false;\n\t\tvar t = __js__(\"typeof(v)\");\n\t\treturn (t == \"string\" || (t == \"object\" && v.__enum__ == null)) || (t == \"function\" && (js.Boot.isClass(v) || js.Boot.isEnum(v)) != null);\n\t}\n\n\tpublic static function isEnumValue( v : Dynamic ) : Bool {\n\t\treturn v != null && v.__enum__ != null;\n\t}\n\n\tpublic static function deleteField( o : Dynamic, field : String ) : Bool untyped {\n\t\tif( !hasField(o,field) ) return false;\n\t\t__js__(\"delete\")(o[field]);\n\t\treturn true;\n\t}\n\n\tpublic static function copy<T>( o : T ) : T {\n\t\tvar o2 : Dynamic = {};\n\t\tfor( f in Reflect.fields(o) )\n\t\t\tReflect.setField(o2,f,Reflect.field(o,f));\n\t\treturn o2;\n\t}\n\n\t@:overload(function( f : Array<Dynamic> -> Void ) : Dynamic {})\n\tpublic static function makeVarArgs( f : Array<Dynamic> -> Dynamic ) : Dynamic {\n\t\treturn function() {\n\t\t\tvar a = untyped Array.prototype.slice.call(__js__(\"arguments\"));\n\t\t\treturn f(a);\n\t\t};\n\t}\n\n}\n","package webglinfo;\n\nimport js.html.CanvasElement;\nimport js.Browser;\n\nclass Main {\n\n\tvar contextName:String;\n\n\tpublic function new() {\n\t\tcontextName = \"\";\n\t\tvar checkSupport = detectWebGL({ stencil: true });\n\t\tlog(\"WebGL Support\", checkSupport + \" \" + contextName);\n\t\tif (checkSupport) displayWebGLProperties();\n\n\t\tlog(\"---------------------------------------------------\");\n\t\tcheckSupport = detectWebGL({ stencil: true, failIfMajorPerformanceCaveat: true });\n\t\tlog(\"WebGL Support (performance caveat set to true)\", checkSupport + \" \" + contextName);\n\t}\n\n\tfunction detectWebGL(?props:Dynamic):Bool {\n\t\tvar ctx = Reflect.field(Browser.window, \"WebGLRenderingContext\");\n\t\tif (ctx != null) {\n\t\t\tvar canvas:CanvasElement = Browser.document.createCanvasElement();\n\t\t\tvar supportedContextNames:Array<String> = [\"webgl\", \"experimental-webgl\"];\n\t\t\tvar gl:Dynamic;\n\n\t\t\tfor (context in supportedContextNames) {\n\t\t\t\ttry {\n\t\t\t\t\tgl = props != null ? canvas.getContext(context, props) : canvas.getContext(context);\n\t\t\t\t\tif (gl != null && gl.getParameter != null) {\n\t\t\t\t\t\tcontextName = context;\n\t\t\t\t\t\treturn gl.getContextAttributes().stencil;\n\t\t\t\t\t}\n\t\t\t\t} catch (e:Dynamic) {}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction displayWebGLProperties() {\n\t\tif (contextName != \"\") {\n\t\t\tvar gl = Browser.document.createCanvasElement().getContext(contextName);\n\t\t\tlog(\"WebGL Version\", gl.getParameter(gl.VERSION));\n\t\t\tlog(\"Shading Language Version\", gl.getParameter(gl.SHADING_LANGUAGE_VERSION));\n\t\t\tlog(\"WebGL Vendor\", gl.getParameter(gl.VENDOR));\n\t\t\tlog(\"WebGL Renderer\", gl.getParameter(gl.RENDERER));\n\n\t\t\tvar dbgRenderInfo = gl.getExtension(\"WEBGL_debug_renderer_info\");\n\t\t\tif (dbgRenderInfo != null) {\n\t\t\t\tlog(\"Renderer\", gl.getParameter(dbgRenderInfo.UNMASKED_RENDERER_WEBGL));\n\t\t\t\tlog(\"Vendor\", gl.getParameter(dbgRenderInfo.UNMASKED_VENDOR_WEBGL));\n\t\t\t}\n\n\t\t\tlog(\"Antialias Support\", gl.getContextAttributes().antialias);\n\t\t\tlog(\"Drawing Buffer\", gl.drawingBufferWidth + \"x\" + gl.drawingBufferHeight);\n\t\t\tlog(\"Max Render Buffer Size\", gl.getParameter(gl.MAX_RENDERBUFFER_SIZE));\n\t\t\tlog(\"Max Texture Size (recommended 2048)\", gl.getParameter(gl.MAX_TEXTURE_SIZE));\n\t\t\tlog(\"Max Texture Image Units\", gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));\n\t\t\tlog(\"Max Vertex Texture Image Units (recommended 4)\", gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS));\n\t\t\tlog(\"Max Combined Texture Image Units\", gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS));\n\t\t\tlog(\"Max Fragmented Uniform Vectors\", gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS));\n\t\t\tlog(\"Max Vertex Attributes (recommended 16)\", gl.getParameter(gl.MAX_VERTEX_ATTRIBS));\n\t\t\tlog(\"Max Varying Vectors (recommended 8)\", gl.getParameter(gl.MAX_VARYING_VECTORS));\n\t\t\tlog(\"RGBA Bits\", \"[\" + gl.getParameter(gl.RED_BITS) + \", \" + gl.getParameter(gl.GREEN_BITS) + \", \" + gl.getParameter(gl.BLUE_BITS) + \", \" + gl.getParameter(gl.ALPHA_BITS) + \"]\");\n\t\t\tlog(\"Depth & Stencil Bits\", \"[\" + gl.getParameter(gl.DEPTH_BITS) + \", \" + gl.getParameter(gl.STENCIL_BITS) + \"]\");\n\t\t\tif (gl.getExtension(\"WEBGL_draw_buffers\") != null) log(\"Max Color Buffers\", gl.getParameter(gl.getExtension(\"WEBGL_draw_buffers\").MAX_DRAW_BUFFERS_WEBGL));\n\n\t\t\tif (gl.getExtension(\"EXT_texture_filter_anisotropic\") != null) {\n\t\t\t\tlog(\"Max Anisotropy\", gl.getParameter(gl.getExtension(\"EXT_texture_filter_anisotropic\").MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n\t\t\t}\n\t\t\telse if (gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\") != null) {\n\t\t\t\tlog(\"Max Anisotropy\", gl.getParameter(gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\").MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n\t\t\t}\n\t\t\telse if (gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") != null) {\n\t\t\t\tlog(\"Max Anisotropy\", gl.getParameter(gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\").MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n\t\t\t}\n\n\t\t\tlog(\"---------------------------------------------------\");\n\t\t\tlog(\"Supported Extensions\", \"<br />\" + gl.getSupportedExtensions().join(\"<br />\"));\n\t\t}\n\t}\n\n\tfunction log(msg:String, ?val:String = \"\") {\n\t\tBrowser.window.document.writeln(msg + \": <b>\" + val + \"</b><br/>\");\n\t}\n\n\tstatic function main() {\n\t\tnew Main();\n\t}\n}"],
"names":[],
"mappings":";;;gBA4Be,kBACb;AAAA,KAAI;AAAA,SAAe,EAAE;;EAA4B,OAAO;;;qBCpBlD,WAAe;AAAA,CACrB,mBAAc;CACd,mBAAmB,iBAAY,YAAW;CAC1C,SAAI,gBAAiB,sDAAe,MAAM;CAC1C,EAAI,eAAc;AAAA;;CAElB,SAAI;CACJ,eAAe,iBAAY,YAAW,qCAAoC;CAC1E,SAAI,iDAAkD,sDAAe,MAAM;;sBAyErE,WACN;AAAA;;;cAvED,gBAA0C;AAAA,EACzC,UAAU,cAAc,OAAgB;EACxC,EAAI,QAAO,MAAM;AAAA,GAChB,aAA2B;GAC3B,4BAA0C,CAAC,QAAS;GACpD;GAEA;cAAgB,8BAAhB;AAAA,IAAK,cAAL,AAAgB,sBAAhB;;IACC,IAAI;AAAA,KACE,YAAS,MAAO;AAAA,MAArB,KAAqB,kBAAkB,QAAS;YAAS;AAAA,MAAzD,KAAyD,kBAAkB;;KAC3E,EAAI,OAAM,QAAQ,mBAAmB,MAAM;AAAA,MAC1C,mBAAc;MACd,OAAO;;;;;GAKV,OAAO;;EAGR,OAAO;;0BAGR,WACC;AAAA,IAAI,qBAAe,IAAI;AAAA,GACtB,SAAS,mDAAkD;GAC3D,SAAI,gBAAiB,gBAAgB;GACrC,SAAI,2BAA4B,gBAAgB;GAChD,SAAI,eAAgB,gBAAgB;GACpC,SAAI,iBAAkB,gBAAgB;GAEtC,oBAAoB,gBAAgB;GACpC,EAAI,kBAAiB,MAAM;AAAA,IAC1B,SAAI,WAAY,gBAAgB;IAChC,SAAI,SAAU,gBAAgB;;GAG/B,SAAI,oBAAqB;GACzB,SAAI,iBAAkB,wBAAwB,MAAM;GACpD,SAAI,yBAA0B,gBAAgB;GAC9C,SAAI,sCAAuC,gBAAgB;GAC3D,SAAI,0BAA2B,gBAAgB;GAC/C,SAAI,iDAAkD,gBAAgB;GACtE,SAAI,mCAAoC,gBAAgB;GACxD,SAAI,iCAAkC,gBAAgB;GACtD,SAAI,yCAA0C,gBAAgB;GAC9D,SAAI,sCAAuC,gBAAgB;GAC3D,SAAI,YAAa,MAAM,gBAAgB,eAAe,OAAO,gBAAgB,iBAAiB,OAAO,gBAAgB,gBAAgB,OAAO,gBAAgB,iBAAiB;GAC7K,SAAI,uBAAwB,MAAM,gBAAgB,iBAAiB,OAAO,gBAAgB,mBAAmB;GAC7G,EAAI,iBAAgB,yBAAyB,MAAM;AAAA,aAAI,oBAAqB,gBAAgB,gBAAgB;;GAE5G,EAAI,iBAAgB,qCAAqC,MACxD;AAAA,aAAI,iBAAkB,gBAAgB,gBAAgB;UAElD,EAAI,iBAAgB,4CAA4C,MACpE;AAAA,aAAI,iBAAkB,gBAAgB,gBAAgB;UAElD,EAAI,iBAAgB,yCAAyC,MACjE;AAAA,aAAI,iBAAkB,gBAAgB,gBAAgB;;GAGvD,SAAI;GACJ,SAAI,uBAAwB,WAAW,iCAAiC;;;OAI1E;AAAA;;;EACC,wBAAgC,MAAM,UAAU,MAAM;;;;;;"
}