{
"version":3,
"file":"hx-pixi-video.js",
"sourceRoot":"file://",
"sources":["/haxe/haxe-pixi/pixi/Application.hx","/haxe/haxe-pixi/pixi/display/DisplayObject.hx","/haxe/haxe-pixi/pixi/display/DisplayObjectContainer.hx","/haxe/haxe-pixi/samples/video/Main.hx"],
"sourcesContent":["/* Helper class that can be used by any pixi application\n *\n * @author Adi Reddy Mora\n * http://adireddy.github.io\n * @license MIT\n * @copyright 2015\n */\n\npackage pixi;\n\nimport pixi.renderers.webgl.WebGLRenderer;\nimport pixi.renderers.canvas.CanvasRenderer;\nimport js.html.Event;\nimport js.html.CanvasElement;\nimport js.Browser;\nimport pixi.utils.Detector;\nimport pixi.display.Stage;\nimport pixi.utils.Stats;\nimport pixi.renderers.IRenderer;\n\nclass Application {\n\n\t/*\n\t * Sets the pixel ratio of the application\n\t * @default 1\n\t */\n\tpublic var pixelRatio(null, default):Float;\n\n\t/*\n\t * Default frame rate is 60 FPS and this can be set to true to get 30 FPS\n\t * @default false\n\t */\n\tpublic var skipFrame(null, default):Bool;\n\n\t/*\n\t * Width of the application\n\t * @default Browser.window.innerWidth\n\t */\n\tpublic var width(null, default):Float;\n\n\t/*\n\t * Height of the application\n\t * @default Browser.window.innerHeight\n\t */\n\tpublic var height(null, default):Float;\n\n\t/*\n\t * Whether you want to resize the canvas and renderer on browser resize\n\t * Should be set to false when custom width and height are used for the application\n\t * @default true\n\t */\n\tpublic var resize(null, default):Bool;\n\n\t/*\n\t * Sets the background color of the stage\n\t * @default 0xFFFFFF\n\t */\n\tpublic var backgroundColor(null, default):Int;\n\n\t/*\n\t * Update listener function\n\t */\n\tpublic var onUpdate:Float -> Void;\n\n\t/*\n\t * Windo resize listener function\n\t */\n\tpublic var onResize:Void -> Void;\n\n\t/*\n\t * Pixi stage\n\t * Read-only\n\t */\n\tvar _stage(default, null):Stage;\n\n\tpublic static inline var AUTO:String = \"auto\";\n\tpublic static inline var RECOMMENDED:String = \"recommended\";\n\tpublic static inline var CANVAS:String = \"canvas\";\n\tpublic static inline var WEBGL:String = \"webgl\";\n\n\t@:noCompletion var _canvas:CanvasElement;\n\t@:noCompletion var _renderer:IRenderer;\n\t@:noCompletion var _stats:Stats;\n\n\t@:noCompletion var _lastTime:Date;\n\t@:noCompletion var _currentTime:Date;\n\t@:noCompletion var _elapsedTime:Float;\n\t@:noCompletion var _skipFrame:Bool;\n\n\tpublic function new() {\n\t\t_lastTime = Date.now();\n\t\t_setDefaultValues();\n\t}\n\n\t@:noCompletion function _setDefaultValues() {\n\t\tpixelRatio = 1;\n\t\tskipFrame = false;\n\t\tbackgroundColor = 0xFFFFFF;\n\t\twidth = Browser.window.innerWidth;\n\t\theight = Browser.window.innerHeight;\n\t\tresize = true;\n\t\t_skipFrame = false;\n\t}\n\n\t/*\n\t * Type of the renderer to use AUTO | RECOMMENDED | CANVAS | WEBGL - @default AUTO\n\t * and Enable/disable stats for the application - @default true\n\t * Note that stats.js is not part of pixi so don't forget to include it you html page\n\t * Can be found in libs folder - <script type=\"text/javascript\" src=\"libs/stats.min.js\"></script>\n\t */\n\tpublic function start(?renderer:String = AUTO, ?stats:Bool = true) {\n\t\t_canvas = Browser.document.createCanvasElement();\n\t\t_canvas.style.width = width + \"px\";\n\t\t_canvas.style.height = height + \"px\";\n\t\t_canvas.style.position = \"absolute\";\n\t\tBrowser.document.body.appendChild(_canvas);\n\n\t\t_stage = new Stage(backgroundColor);\n\n\t\tvar renderingOptions:RenderingOptions = {};\n\t\trenderingOptions.view = _canvas;\n\t\trenderingOptions.resolution = pixelRatio;\n\n\t\tif (renderer == AUTO) _renderer = Detector.autoDetectRenderer(width, height, renderingOptions);\n\t\telse if (renderer == RECOMMENDED) _renderer = Detector.autoDetectRecommendedRenderer(width, height, renderingOptions);\n\t\telse if (renderer == CANVAS) _renderer = new CanvasRenderer(width, height, renderingOptions);\n\t\telse _renderer = new WebGLRenderer(width, height, renderingOptions);\n\n\t\tBrowser.document.body.appendChild(_renderer.view);\n\t\tif (resize) Browser.window.onresize = _onWindowResize;\n\t\tBrowser.window.requestAnimationFrame(cast _onRequestAnimationFrame);\n\t\t_lastTime = Date.now();\n\n\t\tif (stats) _addStats();\n\t}\n\n\t@:noCompletion function _onWindowResize(event:Event) {\n\t\twidth = Browser.window.innerWidth;\n\t\theight = Browser.window.innerHeight;\n\t\t_renderer.resize(width, height);\n\t\t_canvas.style.width = width + \"px\";\n\t\t_canvas.style.height = height + \"px\";\n\t\tif (onResize != null) onResize();\n\t}\n\n\t@:noCompletion function _onRequestAnimationFrame() {\n\t\tif (skipFrame && _skipFrame) _skipFrame = false;\n\t\telse {\n\t\t\t_skipFrame = true;\n\t\t\t_calculateElapsedTime();\n\t\t\tif (onUpdate != null) onUpdate(_elapsedTime);\n\t\t\t_renderer.render(_stage);\n\t\t}\n\t\tBrowser.window.requestAnimationFrame(cast _onRequestAnimationFrame);\n\t\tif (_stats != null) _stats.update();\n\t}\n\n\t@:noCompletion function _calculateElapsedTime() {\n\t\t_currentTime = Date.now();\n\t\t_elapsedTime = _currentTime.getTime() - _lastTime.getTime();\n\t\t_lastTime = _currentTime;\n\t}\n\n\t@:noCompletion function _addStats() {\n\t\tif (untyped __js__(\"window\").Stats != null) {\n\t\t\tvar _container = Browser.document.createElement(\"div\");\n\t\t\tBrowser.document.body.appendChild(_container);\n\t\t\t_stats = new Stats();\n\t\t\t_stats.domElement.style.position = \"absolute\";\n\t\t\t_stats.domElement.style.top = \"2px\";\n\t\t\t_stats.domElement.style.right = \"2px\";\n\t\t\t_container.appendChild(_stats.domElement);\n\t\t\t_stats.begin();\n\t\t}\n\t}\n}","package pixi.display;\n\nclass DisplayObject extends CoreDisplayObject {\n\n\tpublic var name:String;\n\n\tpublic function new() {\n\t\tsuper();\n\t\tname = \"\";\n\t}\n}","package pixi.display;\n\nclass DisplayObjectContainer extends CoreDisplayObjectContainer {\n\n\tpublic function new() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Returns the child with the specified name\n\t *\n\t * @method getChildByName\n\t * @param name {String} The name of the child\n\t * @return {DisplayObject}\n\t*/\n\t@:keep public function getChildByName(name:String):DisplayObject {\n\t\tfor (i in 0 ... children.length) {\n\t\t\tif (children[i].name == name) {\n\t\t\t\treturn children[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}","package samples.video;\n\nimport pixi.display.DisplayObjectContainer;\nimport pixi.textures.VideoTexture;\nimport pixi.display.Sprite;\nimport pixi.textures.Texture;\nimport pixi.Application;\nimport js.html.VideoElement;\nimport js.Browser;\n\nclass Main extends Application {\n\n\tvar _vidTexture:Texture;\n\tvar _vidSprite:Sprite;\n\tvar _vidElement:VideoElement;\n\tvar _vidContainer:DisplayObjectContainer;\n\n\tvar _bg:Sprite;\n\n\tpublic function new() {\n\t\tsuper();\n\t\t_init();\n\t}\n\n\tfunction _init() {\n\t\tbackgroundColor = 0xFFFFFF;\n\t\tonUpdate = _onUpdate;\n\t\tonResize = _onResize;\n\t\tresize = true;\n\t\twidth = Browser.window.innerWidth;\n\t\theight = Browser.window.innerHeight;\n\t\tsuper.start(Application.CANVAS);\n\n\t\t_bg = new Sprite(Texture.fromImage(\"assets/video/bg.jpg\"));\n\t\t_stage.addChild(_bg);\n\n\t\t_bg.interactive = true;\n\t\t_bg.mousedown = _bg.touchstart = _addVideo;\n\n\t\t_vidContainer = new DisplayObjectContainer();\n\t\t_stage.addChild(_vidContainer);\n\n\t\t/*var _vidElement = Browser.document.createVideoElement();\n\t\t_vidElement.autoplay = true;\n\t\t_vidElement.loop = true;\n\t\t_vidElement.src =  _vidURL;\n\t\t//Browser.document.body.appendChild(_vidElement);*/\n\t}\n\n\tfunction _addVideo(data) {\n\t\tvar _vidURL:String = \"assets/video/test.mp4\";\n\t\t_vidTexture = VideoTexture.fromUrl(_vidURL);\n\t\t_vidSprite = new Sprite(_vidTexture);\n\t\t_vidContainer.addChild(_vidSprite);\n\t}\n\n\tfunction _onUpdate(elapsedTime:Float) {\n\n\t}\n\n\tfunction _onResize() {\n\n\t}\n\n\tstatic function main() {\n\t\tnew Main();\n\t}\n\n\tfunction _isAndroid():Bool {\n\t\treturn ~/Android/i.match(Browser.navigator.userAgent);\n\t}\n\n\tfunction _isiOS():Bool {\n\t\treturn ~/(iPad|iPhone|iPod)/i.match(Browser.navigator.userAgent);\n\t}\n}"],
"names":[],
"mappings":";;;;;;;;mBAyFO,RAAe;CACrB,EAAY;CACZ;;;mBAGc,RAA6B;EAC3C,CAAa;EACb,CAAY;EACZ,CAAkB;EAClB,CAAQ;EACR,CAAS;EACT,CAAS;EACT,CAAa;;OASP;;;EACI;EAAV,CAAU;EACV,CAAsB,AAAQ;EAC9B,CAAuB,AAAS;EAChC,CAAyB;EACzB,DAAkC;EAElC,CAAS,YAAU;EAEqB;EACxC,CAAwB;EACxB,CAA8B;EAE9B,AAAI,EAAY,HAAM,EAAY,FAA4B,AAAO,AAAQ,KACxE,JAAI,EAAY,HAAa,EAAY,FAAuC,AAAO,AAAQ,KAC/F,JAAI,EAAY,HAAQ,EAAY,qBAAmB,vBAAO,AAAQ,KACtE,HAAY,oBAAkB,tBAAO,AAAQ;EAElD,DAAkC;EAClC,AAAI,DAAQ,EAA0B;EACtC,DAAqC,AAAK;EAC1C,CAAY;EAEZ,AAAI,DAAO;;iBAGG,DAAsC;EACpD,CAAQ;EACR,CAAS;EACT,DAAiB,AAAO;EACxB,CAAsB,AAAQ;EAC9B,CAAuB,AAAS;EAChC,AAAI,EAAY,HAAM;;0BAGR,fAAoC;EAClD,AAAI,EAAa,HAAY,EAAa,GACrC;GACJ,AAAa;GACb;GACA,DAAI,EAAY,HAAM,AAAS;GAC/B,FAAiB;;EAElB,DAAqC,AAAK;EAC1C,AAAI,EAAU,HAAM;;uBAGN,ZAAiC;EAC/C,CAAe;EACf,CAAe,AAAyB;EACxC,CAAY;;WAGE,AACd;EAAY,EAA0B,HAAM;GAC1B,FAA+B;GAChD,FAAkC;GAClC,AAAS;GACT,AAAmC;GACnC,AAA8B;GAC9B,AAAgC;GAChC,FAAuB;GACvB;;;;;6BCtKK,lBAAe;CACrB;CACA,EAAO;;;;;sCCJD,3BACN;;;;;gBAUa,DAAmD;EACtD;EAAM;EAAhB,DAAiC;GAAjC;GACC,DAAI,DAAS,GAAW,HAChB,AAAS;;EAGX;;;;;;;qBCFD,VAAe;CACrB;CACA;;0BA2CM,fACN;;;;;OAzCD,IAAiB;EAChB,CAAkB;EAClB,CAAW;EACX,CAAW;EACX,CAAS;EACT,CAAQ;EACR,CAAS;EACT,DAAY;EAEZ,CAAM,aAAW,fAAkB;EACnC,DAAgB;EAEhB,CAAkB;EAClB,CAAgB,AAAiB;EAEjC,CAAgB;EAChB,DAAgB;;WASjB,IAAyB;EACH;EACrB,CAAc,FAAqB;EACnC,CAAa,aAAW;EACxB,DAAuB;;WAGxB,WAAsC;;WAItC,AAAqB;;;;;;;;"
}