PIXI.EPSY=function(){PIXI.DisplayObjectContainer.call(this),this._sortFn=function(a,b){return(a.__z||0)-(b.__z||0)},this.lastTimestamp=Date.now(),this.emitters=[],this.particleRenderer=new EPSY.PixiRenderer(this)},PIXI.EPSY.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.EPSY.prototype.constructor=PIXI.EPSY,PIXI.EPSY.prototype.updateTransform=function(){var a=(new Date).getTime(),b=a-(this.lastTimestamp||a);this.lastTimestamp=a,b/=1e3;for(var c=0;c<this.emitters.length;c++){var d=this.emitters[c];d&&(d.update(b),this.particleRenderer.render(d))}PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)},PIXI.EPSY.prototype.createEmitter=function(a,b,c){var d=new EPSY.Emitter(a);return void 0!=b&&(d.settings.pos.x=b),void 0!=c&&(d.settings.pos.y=c),d.restart(),this.emitters.push(d),d.container=new PIXI.DisplayObjectContainer,this.addChild(d.container),d.zIndex=a.zIndex,d},PIXI.EPSY.prototype.loadSystem=function(a,b,c){b=b||0,c=c||0;var d;d="string"==typeof a?JSON.parse(a):"object"!=typeof a||a instanceof Array?a:[a];for(var e=0;e<d.length;e++){var a=d[e];a.pos.x+=b,a.pos.y+=c,this.createEmitter(a)}this.children.sort(this._sortFn)};